!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("i2d",[],e):"object"==typeof exports?exports.i2d=e():t.i2d=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,r){"use strict";(function(t){var i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,a){"object"===n(t)&&t.exports?t.exports=a():void 0!==(i=function(){return a()}.call(e,r,e,t))&&(t.exports=i)}(0,function(){function t(t){function e(t,e){var r=1;if(0===e)return r;for(var i=1;i<=e;i+=1)r*=t;return r}function r(t,e){return Math.atan2(t,e)}function i(t){return Math.sqrt(t)}function n(t,e,r){var i={},n={};i.x=t.x+r.x-2*e.x,i.y=t.y+r.y-2*e.y,n.x=2*e.x-2*t.x,n.y=2*e.y-2*t.y;var o=4*(i.x*i.x+i.y*i.y),a=4*(i.x*n.x+i.y*n.y),s=n.x*n.x+n.y*n.y,h=2*Math.sqrt(o+a+s),c=Math.sqrt(o),l=2*o*c,u=2*Math.sqrt(s),f=a/c,p=(2*c+f+h)/(f+u);return p=isNaN(p)||Math.abs(p)===1/0?1:p,(l*h+c*a*(h-u)+(4*s*o-a*a)*Math.log(p))/(4*l)}function o(t,r){for(var n=0,o=f.bind(null,t,r),a=void 0,s=void 0,h=0;h<=1;h+=.001)a=o(h),s=o(h+.001),n+=.001*i(e((s.x-a.x)/.001,2)+e((s.y-a.y)/.001,2));return n}function a(t,r){var n=0;for(var o in t)n+=e(r[o]-t[o],2);if(isNaN(n))throw new Error("error");return i(n)}function s(t,e){return r(e.x-t.x,e.y-t.y)}function h(t,e){var r={};for(var i in t)r[i]=t[i]*e;return r}function c(t,e,r){var i=(t.y-e.y)/(t.x-e.x),n=t.x*r;return{x:n,y:(i*(n-e.x)+e.y)*r}}function l(t,e){var r=3*(t.cntrl1.x-t.p0.x),i=3*(t.cntrl2.x-t.cntrl1.x)-r,n=t.p1.x-t.p0.x-r-i,o=3*(t.cntrl1.y-t.p0.y),a=3*(t.cntrl2.y-t.cntrl1.y)-o;return{cx:r,bx:i,ax:n,cy:o,by:a,ay:t.p1.y-t.p0.y-o-a}}function u(t){if(t.length){for(var e=t,r=[],i=0;i<e.length;i+=1)if(-1!==["M","C","S","Q"].indexOf(e[i].type))r.push(e[i]);else if(-1!==["V","H","L","Z"].indexOf(e[i].type)){var n={x:(e[i].p0.x+e[i].p1.x)/2,y:(e[i].p0.y+e[i].p1.y)/2};r.push({p0:e[i].p0,cntrl1:n,cntrl2:n,p1:e[i].p1,type:"C",length:e[i].length})}else console.log("wrong cmd type");return r}}function f(t,r,i){var n=e(i,3),o=e(i,2);return{x:r.ax*n+r.bx*o+r.cx*i+t.x,y:r.ay*n+r.by*o+r.cy*i+t.y}}function p(t,e,r,i){return{x:(t.x-2*e.x+r.x)*i*i+(2*e.x-2*t.x)*i+t.x,y:(t.y-2*e.y+r.y)*i*i+(2*e.y-2*t.y)*i+t.y}}function d(t,e,r){return{x:t.x+(e.x-t.x)*r,y:t.y+(e.y-t.y)*r}}function y(t,e,r){return t+(e-t)*r}function x(t){for(var e=1/0,r=1/0,i=-1/0,n=-1/0,o=void 0,a=void 0,s=0;s<t.length;s+=1)if(o=t[s],-1!==["V","H","L"].indexOf(o.type))[o.p0?o.p0:t[s-1].p1,o.p1].forEach(function(t){t.x<e&&(e=t.x),t.x>i&&(i=t.x),t.y<r&&(r=t.y),t.y>n&&(n=t.y)});else if(-1!==["Q","C"].indexOf(o.type))for(var h=l(o),c=f.bind(null,o.p0,h),u=0,p=void 0;u<1;)p=c(u),u+=.05,p.x<e&&(e=p.x),p.x>i&&(i=p.x),p.y<r&&(r=p.y),p.y>n&&(n=p.y);else a=o.p0,a.x<e&&(e=a.x),a.x>i&&(i=a.x),a.y<r&&(r=a.y),a.y>n&&(n=a.y);return{x:e,y:r,width:i-e,height:n-r}}function g(t,e,r,i){var n={},o=t.x,a=t.y,s=e.x,h=e.y,c=Math.PI/180*r,l=Math.cos(-c),u=Math.sin(-c);return n.x=l*(o-s)+u*(a-h)+s,n.y=l*(a-h)-u*(o-s)+h,{x:l*(o-s)+u*(a-h)+s,y:l*(a-h)-u*(o-s)+h}}function v(t,e){var r={x:t.x,y:t.y},i={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},o={x:t.x+t.width,y:t.y+t.height},s=e.translate,h=e.rotate,c={x:h[1]||0,y:h[2]||0},l=h[0];s&&s.length>0&&(c.x+=s[0],c.y+=s[1]),r=g(r,c,l,a(r,c)),i=g(i,c,l,a(i,c)),n=g(n,c,l,a(n,c)),o=g(o,c,l,a(o,c));var u=[r.x,i.x,n.x,o.x].sort(function(t,e){return t-e}),f=[r.y,i.y,n.y,o.y].sort(function(t,e){return t-e});return{x:u[0],y:f[0],width:u[3]-u[0],height:f[3]-f[0]}}function m(){}var b=function(){function t(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=2*Math.PI,A=function(t,e,r,i,n,o,a){var s=t.x,h=t.y;return s*=e,h*=r,{x:i*s-n*h+o,y:n*s+i*h+a}},B=function(t,e){var r=4/3*Math.tan(e/4),i=Math.cos(t),n=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:i-n*r,y:n+i*r},{x:o+a*r,y:a-o*r},{x:o,y:a}]},S=function(t,e,r,i){var n=t*i-e*r<0?-1:1,o=Math.sqrt(t*t+e*e),a=Math.sqrt(t*t+e*e),s=t*r+e*i,h=s/(o*a);return h>1&&(h=1),h<-1&&(h=-1),n*Math.acos(h)},k=function(t,r,i,n,o,a,s,h,c,l,u,f){var p=e(o,2),d=e(a,2),y=e(u,2),x=e(f,2),g=p*d-p*x-d*y;g<0&&(g=0),g/=p*x+d*y,g=Math.sqrt(g)*(s===h?-1:1);var v=g*o/a*f,m=g*-a/o*u,b=l*v-c*m+(t+i)/2,A=c*v+l*m+(r+n)/2,B=(u-v)/o,k=(f-m)/a,T=(-u-v)/o,D=(-f-m)/a,C=S(1,0,B,k),E=S(B,k,T,D);return 0===h&&E>0&&(E-=w),1===h&&E<0&&(E+=w),[b,A,C,E]},T=function(t){var r=t.px,i=t.py,n=t.cx,o=t.cy,a=t.rx,s=t.ry,h=t.xAxisRotation,c=void 0===h?0:h,l=t.largeArcFlag,u=void 0===l?0:l,f=t.sweepFlag,p=void 0===f?0:f,d=[];if(0===a||0===s)return[];var y=Math.sin(c*w/360),x=Math.cos(c*w/360),g=x*(r-n)/2+y*(i-o)/2,v=-y*(r-n)/2+x*(i-o)/2;if(0===g&&0===v)return[];a=Math.abs(a),s=Math.abs(s);var m=e(g,2)/e(a,2)+e(v,2)/e(s,2);m>1&&(a*=Math.sqrt(m),s*=Math.sqrt(m));var S=k(r,i,n,o,a,s,u,p,y,x,g,v),T=b(S,4),D=T[0],C=T[1],E=T[2],O=T[3],L=Math.max(Math.ceil(Math.abs(O)/(w/4)),1);O/=L;for(var P=0;P<L;P++)d.push(B(E,O)),E+=O;return d.map(function(t){var e=A(t[0],a,s,x,y,D,C),r=e.x,i=e.y,n=A(t[1],a,s,x,y,D,C),o=n.x,h=n.y,c=A(t[2],a,s,x,y,D,C);return{x1:r,y1:i,x2:o,y2:h,x:c.x,y:c.y}})};return m.prototype={pow:e,getAngle:s,getDistance:a,scaleAlongOrigin:h,scaleAlongPoint:c,linearTransitionBetweenPoints:d,bezierTransition:p,bezierLength:n,cubicBezierTransition:f,cubicBezierLength:o,cubicBezierCoefficients:l,arcToBezier:T,intermediateValue:y,getBBox:x,toCubicCurves:u,rotatePoint:g,rotateBBox:v},function(){return new m}()}return t})}).call(e,r(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";var i,n;"function"==typeof Symbol&&Symbol.iterator;!function(r,o){i=[],void 0!==(n=function(){return o()}.apply(e,i))&&(t.exports=n)}(0,function(){function t(t,e,r){this.executable=e,this.duration=e.duration?e.duration:0,this.currTime=Date.now(),this.lastTime=0-(e.delay?e.delay:0),this.loopTracker=0,this.loop=e.loop?e.loop:0,this.direction=e.direction,this.easying=r,this.end=e.end?e.end:null,"reverse"===this.direction?this.factor=1:this.factor=0}function e(t){return this.endExe=t,this}function r(t){if("function"!=typeof t)throw new Error("Wrong input");d.push(t),d.length>0&&!p&&this.startAnimeFrames()}function i(t){if("function"!=typeof t)throw new Error("Wrong input");var e=d.indexOf(t);-1!==e&&d.splice(e,1)}function n(e,r,i){u[u.length]=new t(e,r,i)}function o(){p||(p=window.requestAnimationFrame(h))}function a(){p&&(window.cancelAnimFrame(p),p=null)}function s(){this.vDoms=[]}function h(){p=window.requestAnimationFrame(h),m=[],v=0;for(var t=0;t<u.length;t+=1)y=u[t],x=Date.now(),y.lastTime+=x-y.currTime,y.currTime=x,y.lastTime<=y.duration&&y.lastTime>=0?(y.execute(g(y.factor-y.easying(y.lastTime,y.duration))),m[v++]=y):y.lastTime>y.duration?(y.execute(1-y.factor),y.loopTracker>=y.loop-1?y.end&&y.end():(y.loopTracker+=1,y.lastTime=0,"alternate"===y.direction?y.factor=1-y.factor:"reverse"===y.direction?y.factor=1:y.factor=0,m[v++]=y)):y.lastTime<y.duration?m[v++]=y:console.log("unknown");if(u=m,d.length>0)for(var e=0;e<d.length;e+=1)d[e](x);for(var r=0,i=f.length;r<i;r+=1)f[r].stateModified&&(f[r].execute(),f[r].stateModified=!1)}function c(){return l||(l=new s),l}var l=null,u=[],f=[],p=void 0,d=[];window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)}}(),window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)}}(),t.prototype.execute=function(t){this.executable.run(t)},t.prototype.resetCallBack=function(t){"function"==typeof t&&(this.callBack=t)},s.prototype={startAnimeFrames:o,stopAnimeFrame:a,add:n,end:e,onRequestFrame:r,removeRequestFrameCall:i,destroy:function(){this.endExe&&this.endExe(),this.stopAnimeFrame()}},s.prototype.addVdom=function(t){return f.push(t),f.length-1},s.prototype.removeVdom=function(t){for(var e=0;e<f.length;e++)f[e]===t&&f.splice(e,1);console.log(f)},s.prototype.vDomChanged=function(t){f[t]&&(f[t].stateModified=!0)},s.prototype.execute=function(){p||(p=window.requestAnimationFrame(h))};var y=void 0,x=void 0,g=Math.abs,v=0,m=[];return c})},function(t,e,r){"use strict";(function(t){var i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){"object"===o(t)&&t.exports?t.exports=s(r(0)):(i=[r(0)],void 0!==(n=function(t){return s(t)}.apply(e,i))&&(t.exports=n))}(0,function(t){function e(t,e){return t/e}function r(t,e){var r=t/e;return 1-(1-r)*Math.sin(r*e*.002*Math.PI*2+Math.PI/2)/Math.exp(8*r)}function i(t,e){var r=t/e,i=r/100;return 1-(1-r)*Math.abs(Math.sin(r*e*i*Math.PI*2+Math.PI/2))/Math.exp(10*r)}function n(t,e){var r=t/e;return r*r}function o(t,e){var r=t/e;return r*(2-r)}function a(t,e){var r=t/e;return r<.5?2*r*r:(4-2*r)*r-1}function s(t,e){var r=t/e;return d.pow(r,3)}function h(t,e){var r=t/e;return(r-=1)*r*r+1}function c(t,e){var r=t/e;return r<.5?4*d.pow(r,3):(r-1)*(2*r-2)*(2*r-2)+1}function l(t,e){var r=t/e;return 1-Math.cos(r*Math.PI/2)}function u(t,e){var r=t/e;return Math.cos(r*Math.PI/2)}function f(t,e){var r=t/e;return(1-Math.cos(Math.PI*r))/2}function p(){function t(t){var p=void 0;if("function"==typeof t)return function(e,r){return t(e/r)};switch(t){case"easeOutQuad":p=o;break;case"easeInQuad":p=n;break;case"easeInOutQuad":p=a;break;case"easeInCubic":p=s;break;case"easeOutCubic":p=h;break;case"easeInOutCubic":p=c;break;case"easeInSin":p=l;break;case"easeOutSin":p=u;break;case"easeInOutSin":p=f;break;case"bounce":p=i;break;case"linear":p=e;break;case"elastic":p=r;break;default:p=e}return p}return t}var d=t("2D");return p})}).call(e,r(1)(t))},function(t,e,r){"use strict";(function(t){var i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){"object"===o(t)&&t.exports?t.exports=s(r(3),r(2)):(i=[r(3),r(2)],void 0!==(n=function(t,e){return s(t,e)}.apply(e,i))&&(t.exports=n))}(0,function(t,e){function r(){return x+=1}function i(){return g+=1}function n(t){return this.easying=v(t),this.transition=t,this}function o(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.durationP=t,this}function a(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.loopValue=t,this}function s(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.directionV=t,this}function h(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.data=t,"CANVAS"===this.data.nodeName&&(this.canvasStack=[]),this}function c(t){return"function"!=typeof t?null:(this.callbckExe=t,this)}function l(t){return this.resetV=t,this}function u(t){return this.end=t,this}function f(t){return this.endExe=t,this}function p(){this.start()}function d(){this.queue=e(),this.sequenceQueue=[],this.lengthV=0,this.currPos=0,this.ID=r(),this.loopCounter=0}function y(){this.queue=e(),this.group=[],this.currPos=0,this.ID=r(),this.loopCounter=1}var x=0,g=0,v=t();d.prototype={duration:o,loop:a,callbck:c,bind:h,child:u,ease:n,end:f,commit:p,reset:l,direction:s},d.prototype.add=function(t){var e=this;return Array.isArray(t)||"function"==typeof t||(t=[t]),Array.isArray(t)&&t.map(function(t){return e.lengthV+=t.length?t.length:0,t}),this.sequenceQueue=this.sequenceQueue.concat(t),this},d.prototype.easyingGlobal=function(t,e){return t/e},d.prototype.start=function(){var t=this;if("alternate"===t.directionV)t.factor=t.factor?-1*t.factor:1,t.currPos=t.factor<0?this.sequenceQueue.length-1:0;else if("reverse"===t.directionV){for(var e=0;e<this.sequenceQueue.length;e+=1){var r=this.sequenceQueue[e];r instanceof d||r instanceof y||r.run(1),t.currPos=e}t.factor=-1}else t.currPos=0,t.factor=1;this.execute()},d.prototype.execute=function(){var t=this,e=this.sequenceQueue[t.currPos];if(e="function"==typeof e?e():e)return e instanceof d||e instanceof y?e.end(t.triggerEnd.bind(t,e)).commit():(this.currObj=e,this.queue.add(i(),{run:function(t){e.run(t)},duration:void 0!==e.duration?e.duration:t.durationP,direction:t.factor<0?"reverse":"default",end:t.triggerEnd.bind(t,e)},function(t,e){return t/e})),this},d.prototype.triggerEnd=function(t){var e=this;if(e.currPos+=e.factor,t.end&&e.triggerChild(t),e.sequenceQueue.length===e.currPos||e.currPos<0)return e.endExe&&e.endExe(),e.loopCounter+=1,void(e.loopCounter<e.loopValue&&e.start());this.execute()},d.prototype.triggerChild=function(t){t.end instanceof y||t.end instanceof d?setTimeout(function(){t.end.commit()},0):t.end()},y.prototype={duration:o,loop:a,callbck:c,bind:h,child:u,ease:n,end:f,commit:p,direction:s},y.prototype.add=function(t){var e=this;return Array.isArray(t)||(t=[t]),this.group=this.group.concat(t),this.group.forEach(function(t){t.durationP=t.durationP?t.durationP:e.durationP}),this},y.prototype.execute=function(){var t=this;t.currPos=0;for(var e=0,r=t.group.length;e<r;e++)!function(e,r){var n=t.group[e];n instanceof d||n instanceof y?n.end(t.triggerEnd.bind(t,n)).commit():t.queue.add(i(),{run:function(t){n.run(t)},duration:void 0!==n.duration?n.duration:t.durationP,loop:n.loop?n.loop:1,direction:n.direction?n.direction:"default",end:t.triggerEnd.bind(t,n)},t.easying?t.easying:v(n.ease))}(e);return t},y.prototype.start=function(){var t=this;"alternate"===t.directionV?t.factor=t.factor?-1*t.factor:1:"reverse"===t.directionV?t.factor=-1:t.factor=1,this.execute()},y.prototype.triggerEnd=function(t){var e=this;this.currPos+=1,t.end&&this.triggerChild(t.end),this.currPos===this.group.length&&(this.endExe&&this.triggerChild(this.endExe),e.loopCounter+=1,e.loopCounter<e.loopValue&&e.start())},y.prototype.triggerChild=function(t){t instanceof y||t instanceof d?t.commit():"function"==typeof t?t():console.log("wrong type")};var m={};return m.sequenceChain=function(){return new d},m.parallelChain=function(){return new y},m})}).call(e,r(1)(t))},function(t,e,r){"use strict";(function(t){var i,n,o=function(){function t(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,s){"object"===a(t)&&t.exports?t.exports=s(r(0)):(i=[r(0)],void 0!==(n=function(t){return s(t)}.apply(e,i))&&(t.exports=n))}(0,function(t){function e(){}function r(t,e){var r=0,i=0,n=1,a=1,s=e;if(t.attr.transform&&t.attr.transform.translate){var h=o(t.attr.transform.translate,2);r=h[0],i=h[1],s.x-=r,s.y-=i}if(t.attr.transform&&t.attr.transform.scale&&(n=void 0!==t.attr.transform.scale[0]?t.attr.transform.scale[0]:1,a=void 0!==t.attr.transform.scale[1]?t.attr.transform.scale[1]:n,s.x/=n,s.y/=a),t.attr.transform&&t.attr.transform.rotate){var c=t.attr.transform.rotate[0],l=(t.dom.BBox,{x:t.attr.transform.rotate[1],y:t.attr.transform.rotate[2]}),u=s.x,f=s.y,p=l.x,d=l.y,y=Math.PI/180*c,x=Math.cos(y),g=Math.sin(y);s.x=x*(u-p)+g*(f-d)+p,s.y=x*(f-d)-g*(u-p)+d}}t("2D");return e.prototype.execute=function(){this.root.execute(),this.stateModified=!1},e.prototype.root=function(t){this.root=t,this.stateModified=!0},e.prototype.eventsCheck=function(t,e){for(var i=this,n=void 0,o=void 0,a=0;a<=t.length-1;a+=1){var s=t[a],h={x:e.x,y:e.y};r(s,h),s.in({x:h.x,y:h.y})&&(s.children&&s.children.length>0?(o=i.eventsCheck(s.children,{x:h.x,y:h.y}))&&(n=o):n=s)}return n},e.prototype.transformCoOr=r,function(){return new e}})}).call(e,r(1)(t))},function(t,e,r){"use strict";var i,n;"function"==typeof Symbol&&Symbol.iterator;!function(r,o){i=[],void 0!==(n=function(){return o()}.apply(e,i))&&(t.exports=n)}(0,function(){function t(t){for(var e=t.replace(/[^0-9\.,]+/g,"").split(","),r={},i=["r","g","b","a"],n=0;n<e.length;n+=1)r[i[n]]=parseFloat(e[n]);return r}function e(t){for(var e=rgb.replace(/[^0-9\.,]+/g,"").split(","),r={},i=["h","s","l","a"],n=0;n<e.length;n+=1)r[i[n]]=e[n];return r}for(var r=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],i=["f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","000000","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"],n={},o=0;o<r.length;o+=1)n[r[o]]=i[o];var a={};return a.nameToHex=function(t){return n[t]?"#"+n[t]:"#000"},a.hexToRgb=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,r,i){return e+e+r+r+i+i});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null},a.rgbToHex=function(t){var e=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")).split(",");return"#"+((1<<24)+(parseInt(e[0],10)<<16)+(parseInt(e[1],10)<<8)+parseInt(e[2],10)).toString(16).slice(1)},a.hslToRgb=function(t){var e=void 0,r=void 0,i=void 0,n=void 0,o=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},a=NaN;return e=o(NaN,a,NaN),r=o(NaN,a,n),i=o(NaN,a,NaN),{r:Math.round(255*e),g:Math.round(255*r),b:Math.round(255*i)}},a.transition=function(r,i){return r=r||"rgb(0,0,0)",i=i||"rgb(0,0,0)",r=r.startsWith("#")?this.hexToRgb(r):r.startsWith("rgb")?t(r):r.startsWith("hsl")?e(r):{r:0,g:0,b:0},i=i.startsWith("#")?this.hexToRgb(i):i.startsWith("rgb")?t(i):i.startsWith("hsl")?e(i):{r:0,g:0,b:0},function(t){return"rgb("+Math.round(r.r+(i.r-r.r)*t)+","+Math.round(r.g+(i.g-r.g)*t)+","+Math.round(r.b+(i.b-r.b)*t)+")"}},a})},function(t,e,r){"use strict";(function(t){var i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){"object"===o(t)&&t.exports?t.exports=s(r(0)):(i=[r(0)],void 0!==(n=function(t){return s(t)}.apply(e,i))&&(t.exports=n))}(0,function(t){function e(t){var e=t.replace(/e-/g,"$");e=e.replace(/ /g,","),e=e.replace(/-/g,",-"),e=e.split(/([a-zA-Z,])/g).filter(function(t){return""!==t&&","!==t}).map(function(t){return t.replace(/\$/g,"e-")});for(var r=0;r<e.length;r+=1)if(e[r].split(".").length>2){for(var i=e[r].split("."),n=[i[0]+"."+i[1]],o=2;o<i.length;o+=1)n.push("."+i[o]);e.splice(r,1,n[0],n[1])}return e}function r(t,e){return{x:t.x+e.x,y:t.y+e.y}}function i(t,e){return{x:t.x-e.x,y:t.y-e.y}}function n(){return{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:parseFloat(this.pathArr[this.currPathArr+=1])}}function o(t,e,r){return t?r:e}function a(t,e){var i=o(t,this.pp?this.pp:{x:0,y:0},{x:0,y:0});return this.cp=r(e,i),this.start=this.cp,this.segmentLength=0,this.length=this.segmentLength,0!==this.currPathArr&&this.pp?(this.stackGroup.push(this.stack),this.stack=[]):this.stackGroup.push(this.stack),this.stack.push({type:"M",p0:this.cp,length:this.segmentLength,pointAt:function(t){return this.p0}}),this.pp=this.cp,this}function s(t,e){var i=o(t,this.pp,{x:this.pp.x,y:0});return this.cp=r(e,i),this.segmentLength=x.getDistance(this.pp,this.cp),this.stack.push({type:"V",p0:this.pp,p1:this.cp,length:this.segmentLength,pointAt:function(t){return x.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function h(t,e){var i=o(t,this.pp,{x:0,y:0});return this.cp=r(e,i),this.segmentLength=x.getDistance(this.pp,this.cp),this.stack.push({type:"L",p0:this.pp,p1:this.cp,length:this.segmentLength,pointAt:function(t){return x.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function c(t,e){var i=o(t,this.pp,{x:0,y:this.pp.y});return this.cp=r(e,i),this.segmentLength=x.getDistance(this.pp,this.cp),this.stack.push({type:"H",p0:this.pp,p1:this.cp,length:this.segmentLength,pointAt:function(t){return x.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function l(){return this.cp=this.start,this.segmentLength=x.getDistance(this.pp,this.cp),this.stack.push({p0:this.pp,p1:this.cp,type:"Z",length:this.segmentLength,pointAt:function(t){return x.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function u(t,e,i){var n=o(t,this.pp,{x:0,y:0}),a=r(e,n),s=r(i,n);return this.cp=s,this.segmentLength=x.bezierLength(this.pp,a,this.cp),this.cp=s,this.stack.push({type:"Q",p0:this.pp,cntrl1:a,cntrl2:a,p1:this.cp,length:this.segmentLength,pointAt:function(t){return x.bezierTransition(this.p0,this.cntrl1,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function f(t,e,i,n){var a=o(t,this.pp,{x:0,y:0}),s=r(e,a),h=r(i,a),c=r(n,a),l=x.cubicBezierCoefficients({p0:this.pp,cntrl1:s,cntrl2:h,p1:c});return this.cntrl=h,this.cp=c,this.segmentLength=x.cubicBezierLength(this.pp,l),this.stack.push({type:"C",p0:this.pp,cntrl1:s,cntrl2:h,p1:this.cp,length:this.segmentLength,co:l,pointAt:function(t){return x.cubicBezierTransition(this.p0,this.co,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function p(t,e,n){var a=o(t,this.pp,{x:0,y:0}),s=r(this.pp,i(this.pp,this.cntrl?this.cntrl:this.pp)),h=r(e,a),c=r(n,a);this.cp=c;var l=x.cubicBezierCoefficients({p0:this.pp,cntrl1:s,cntrl2:h,p1:this.cp});return this.segmentLength=x.cubicBezierLength(this.pp,l),this.stack.push({type:"S",p0:this.pp,cntrl1:s,cntrl2:h,p1:this.cp,length:this.segmentLength,pointAt:function(t){return x.cubicBezierTransition(this.p0,this.co,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function d(t,e,i,n,a,s,h){var c=o(t,this.pp,{x:0,y:0}),l=this,u=r(h,c);this.cp=u;var f=x.arcToBezier({px:this.pp.x,py:this.pp.y,cx:u.x,cy:u.y,rx:e,ry:i,xAxisRotation:n,largeArcFlag:a,sweepFlag:s});return f.forEach(function(t,e){var r=0===e?l.pp:{x:f[0].x,y:f[0].y},i={x:t.x1,y:t.y1},n={x:t.x2,y:t.y2},o={x:t.x,y:t.y},a=x.cubicBezierLength(r,x.cubicBezierCoefficients({p0:r,cntrl1:i,cntrl2:n,p1:o}));l.stack.push({type:"C",p0:r,cntrl1:i,cntrl2:n,p1:o,length:a,pointAt:function(t){return x.bezierTransition(this.p0,this.cntrl1,this.cntrl2,this.p1,t)}}),l.length+=a}),this.pp=this.cp,this}function y(t){this.stack=[],this.length=0,this.stackGroup=[],t&&(this.path=t,this.parse())}var x=t("2D");return y.prototype={z:l,m:a,v:s,h:c,l:h,q:u,s:p,c:f,a:d,fetchXY:n},y.prototype.parse=function(){for(this.currPathArr=-1,this.stack=[],this.length=0,this.pathArr=e(this.path),this.stackGroup=[];this.currPathArr<this.pathArr.length-1;)this.case(this.pathArr[this.currPathArr+=1]);return this.stack},y.prototype.fetchPathString=function(){for(var t="",e=void 0,r=0;r<this.stack.length;r++)e=this.stack[r],"M"===e.type?t+=e.type+" "+e.p0.x+","+e.p0.y+" ":"Z"===e.type?t+="z":"C"===e.type?t+=e.type+" "+e.cntrl1.x+","+e.cntrl1.y+" "+e.cntrl2.x+","+e.cntrl2.y+" "+e.p1.x+","+e.p1.y+" ":"Q"===e.type?t+=e.type+" "+e.cntrl1.x+","+e.cntrl1.y+" "+e.p1.x+","+e.p1.y+" ":"S"===e.type?t+=e.type+" "+e.cntrl2.x+","+e.cntrl2.y+" "+e.p1.x+","+e.p1.y+" ":"V"===e.type?t+=e.type+" "+e.p1.y+" ":"H"===e.type?t+=e.type+" "+e.p1.x+" ":"L"===e.type&&(t+=e.type+" "+e.p1.x+","+e.p1.y+" ");return t},y.prototype.getTotalLength=function(){return this.length},y.prototype.getAngleAtLength=function(t,e){if(t>this.length)return null;var r=this.getPointAtLength(t),i=this.getPointAtLength(t+("src"===e?-1*t*.01:.01*t));return Math.atan2(i.y-r.y,i.x-r.x)},y.prototype.getPointAtLength=function(t){var e={x:0,y:0},r=t;return this.stack.every(function(t,i){return r-=t.length,Math.floor(r)>=0||(e=t.pointAt((t.length+r)/(0===t.length?1:t.length)),!1)}),e},y.prototype.isValid=function(t){return-1!==["m","M","v","V","l","L","h","H","q","Q","c","C","s","S","a","A","z","Z"].indexOf(t)},y.prototype.case=function(t){var e=t;switch(this.isValid(e)?this.PC=e:(e=this.PC,this.currPathArr=this.currPathArr-1),e){case"m":this.m(!1,this.fetchXY());break;case"M":this.m(!0,this.fetchXY());break;case"v":this.v(!1,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"V":this.v(!0,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"l":this.l(!1,this.fetchXY());break;case"L":this.l(!0,this.fetchXY());break;case"h":this.h(!1,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"H":this.h(!0,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"q":this.q(!1,this.fetchXY(),this.fetchXY());break;case"Q":this.q(!0,this.fetchXY(),this.fetchXY());break;case"c":this.c(!1,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"C":this.c(!0,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"s":this.s(!1,this.fetchXY(),this.fetchXY());break;case"S":this.s(!0,this.fetchXY(),this.fetchXY());break;case"a":var r=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),a=parseFloat(this.pathArr[this.currPathArr+=1]);this.a(!1,r,i,n,o,a,this.fetchXY());break;case"A":r=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),a=parseFloat(this.pathArr[this.currPathArr+=1]),this.a(!0,r,i,n,o,a,this.fetchXY());break;case"z":this.z()}},{instance:function(t){return new y(t)},isTypePath:function(t){return t instanceof y}}})}).call(e,r(1)(t))},function(t,e,r){"use strict";(function(t){var r,i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,a){"object"===n(t)&&t.exports?t.exports=a():(r=[],void 0!==(i=function(){return a()}.apply(e,r))&&(t.exports=i))}(0,function(){function t(t){var e=void 0;switch(t){case"point":e={vertexShader:"\n          attribute vec2 a_position;\n          attribute vec4 a_color;\n          attribute float a_size;\n          uniform vec2 u_resolution;\n          varying vec4 v_color;\n          void main() {\n            vec2 zeroToOne = a_position / u_resolution;\n            vec2 zeroToTwo = zeroToOne * 2.0;\n            vec2 clipSpace = zeroToTwo - 1.0;\n            gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n            gl_PointSize = a_size;\n            v_color = a_color;\n          }\n          ",fragmentShader:"\n                    precision mediump float;\n                    varying vec4 v_color;\n                    void main() {\n                        gl_FragColor = v_color;\n                    }\n                    "};break;case"circle":e={vertexShader:"\n          attribute vec2 a_position;\n          attribute vec4 a_color;\n          attribute float a_radius;\n          uniform vec2 u_resolution;\n          varying vec4 v_color;\n          void main() {\n            vec2 zeroToOne = a_position / u_resolution;\n            vec2 zeroToTwo = zeroToOne * 2.0;\n            vec2 clipSpace = zeroToTwo - 1.0;\n            gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n            gl_PointSize = a_radius;\n            v_color = a_color;\n          }\n          ",fragmentShader:"\n                    precision mediump float;\n                    varying vec4 v_color;\n                    void main() {\n                      float r = 0.0, delta = 0.0, alpha = 1.0;\n                      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n                      r = dot(cxy, cxy);\n                      if(r > 1.0) {\n                        discard;\n                      }\n                      delta = 0.09;\n                      alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);                      \n                      gl_FragColor = v_color * alpha;\n                    }\n                    "};break;default:e={vertexShader:"\n                    attribute vec2 a_position;\n                    attribute vec4 a_color;\n                    uniform vec2 u_resolution;\n                    varying vec4 v_color;\n                    void main() {\n                    vec2 zeroToOne = a_position / u_resolution;\n                    vec2 zeroToTwo = zeroToOne * 2.0;\n                    vec2 clipSpace = zeroToTwo - 1.0;\n                    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n                    v_color = a_color;\n                    }\n                    ",fragmentShader:"\n                    precision mediump float;\n                    varying vec4 v_color;\n                    void main() {\n                        gl_FragColor = v_color;\n                    }\n                    "}}return e}return t})}).call(e,r(1)(t))},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i=e&&e.length,o=i?e[0]*r:t.length,s=n(t,0,o,r,!0),h=[];if(!s)return h;var c,l,f,p,d,y,x;if(i&&(s=u(t,e,s,r)),t.length>80*r){c=f=t[0],l=p=t[1];for(var g=r;g<o;g+=r)d=t[g],y=t[g+1],d<c&&(c=d),y<l&&(l=y),d>f&&(f=d),y>p&&(p=y);x=Math.max(f-c,p-l),x=0!==x?1/x:0}return a(s,h,r,c,l,x),h}function n(t,e,r,i,n){var o,a;if(n===L(t,e,r,i)>0)for(o=e;o<r;o+=i)a=C(o,t[o],t[o+1],a);else for(o=r-i;o>=e;o-=i)a=C(o,t[o],t[o+1],a);return a&&A(a,a.next)&&(E(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!A(i,i.next)&&0!==w(i.prev,i,i.next))i=i.next;else{if(E(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function a(t,e,r,i,n,u,f){if(t){!f&&u&&y(t,i,n,u);for(var p,d,x=t;t.prev!==t.next;)if(p=t.prev,d=t.next,u?h(t,i,n,u):s(t))e.push(p.i/r),e.push(t.i/r),e.push(d.i/r),E(t),t=d.next,x=d.next;else if((t=d)===x){f?1===f?(t=c(t,e,r),a(t,e,r,i,n,u,2)):2===f&&l(t,e,r,i,n,u):a(o(t),e,r,i,n,u,1);break}}}function s(t){var e=t.prev,r=t,i=t.next;if(w(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(m(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&w(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,r,i){var n=t.prev,o=t,a=t.next;if(w(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,h=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,c=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,l=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,u=g(s,h,e,r,i),f=g(c,l,e,r,i),p=t.prevZ,d=t.nextZ;p&&p.z>=u&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&m(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&m(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&m(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&m(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function c(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!A(n,o)&&B(n,i,i.next,o)&&k(n,o)&&k(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),E(i),E(i.next),i=t=o),i=i.next}while(i!==t);return i}function l(t,e,r,i,n,s){var h=t;do{for(var c=h.next.next;c!==h.prev;){if(h.i!==c.i&&b(h,c)){var l=D(h,c);return h=o(h,h.next),l=o(l,l.next),a(h,e,r,i,n,s),void a(l,e,r,i,n,s)}c=c.next}h=h.next}while(h!==t)}function u(t,e,r,i){var a,s,h,c,l,u=[];for(a=0,s=e.length;a<s;a++)h=e[a]*i,c=a<s-1?e[a+1]*i:t.length,l=n(t,h,c,i,!1),l===l.next&&(l.steiner=!0),u.push(v(l));for(u.sort(f),a=0;a<u.length;a++)p(u[a],r),r=o(r,r.next);return r}function f(t,e){return t.x-e.x}function p(t,e){if(e=d(t,e)){var r=D(e,t);o(r,r.next)}}function d(t,e){var r,i=e,n=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===a)return r.prev;var h,c=r,l=r.x,u=r.y,f=1/0;for(i=r.next;i!==c;)n>=i.x&&i.x>=l&&n!==i.x&&m(o<u?n:a,o,l,u,o<u?a:n,o,i.x,i.y)&&((h=Math.abs(o-i.y)/(n-i.x))<f||h===f&&i.x>r.x)&&k(i,t)&&(r=i,f=h),i=i.next;return r}function y(t,e,r,i){var n=t;do{null===n.z&&(n.z=g(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,x(n)}function x(t){var e,r,i,n,o,a,s,h,c=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,i=r,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(h=c;s>0||h>0&&i;)0!==s&&(0===h||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,c*=2}while(a>1);return t}function g(t,e,r,i,n){return t=32767*(t-r)*n,e=32767*(e-i)*n,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function v(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function m(t,e,r,i,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S(t,e)&&k(t,e)&&k(e,t)&&T(t,e)}function w(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function A(t,e){return t.x===e.x&&t.y===e.y}function B(t,e,r,i){return!!(A(t,e)&&A(r,i)||A(t,i)&&A(r,e))||w(t,e,r)>0!=w(t,e,i)>0&&w(r,i,t)>0!=w(r,i,e)>0}function S(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&B(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function k(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function T(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}function D(t,e){var r=new O(t.i,t.x,t.y),i=new O(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function C(t,e,r,i){var n=new O(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(t,e,r,i){for(var n=0,o=e,a=r-i;o<r;o+=i)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}t.exports=i,t.exports.default=i,i.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,a=Math.abs(L(t,0,o,r));if(n)for(var s=0,h=e.length;s<h;s++){var c=e[s]*r,l=s<h-1?e[s+1]*r:t.length;a-=Math.abs(L(t,c,l,r))}var u=0;for(s=0;s<i.length;s+=3){var f=i[s]*r,p=i[s+1]*r,d=i[s+2]*r;u+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[n][o][a]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";(function(t){var i,n,o=function(){function t(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,s){"object"===a(t)&&t.exports?t.exports=s(r(0),r(2),r(3),r(4),r(5),r(6),r(7),r(8),r(9)):(i=[r(0),r(2),r(3),r(4),r(5),r(6),r(7),r(8),r(9)],void 0!==(n=function(t,e,r,i,n,o,a,h,c){return s(t,e,r,i,n,o,a,h,c)}.apply(e,i))&&(t.exports=n))}(0,function(t,e,r,i,n,s,h,c,l){function u(){return vt+=1}function f(){return mt+=1}function p(t,e){for(var r=void 0,i=[],n=0;n<this.stack.length;n+=1)r=this.stack[n],i.push(r.fetchEls(t,e));var o=new X;return o.wrapper(i),o}function d(t,e){var r=[],i=new X;if(this.children.length>0)if("."===t.charAt(0)){var n=t.substring(1,t.length);this.children.forEach(function(t){(e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.class===n||!e&&t.attr.class===n)&&r.push(t)})}else if("#"===t.charAt(0)){var o=t.substring(1,t.length);this.children.every(function(t){return!(e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.id===o||!e&&t.attr.id===o)||(r.push(t),!1)})}else this.children.forEach(function(i){(e&&i.dataObj&&-1!==e.indexOf(i.dataObj)&&i.nodeName===t||!e&&i.nodeName===t)&&r.push(i)});return i.wrapper(r)}function y(t,e){var r=void 0;if(this.children.length>0)if("."===t.charAt(0)){var i=t.substring(1,t.length);this.children.every(function(t){return!(e&&t.dataObj&&e===t.dataObj&&t.attr.class===i||!e&&t.attr.class===i)||(r=t,!1)})}else if("#"===t.charAt(0)){var n=t.substring(1,t.length);this.children.every(function(t){return!(e&&t.dataObj&&e===t.dataObj&&t.attr.id===n||!e&&t.attr.id===n)||(r=t,!1)})}else this.children.forEach(function(i){(e&&i.dataObj&&e===i.dataObj&&i.nodeName===t||!e&&i.nodeName===t)&&(r=i)});return r}function x(t,e,r){for(var i=void 0,n=[],o=0;o<this.stack.length;o+=1)i=this.stack[o],n.push(i.join(t,e,r));var a=new X;return a.wrapper(n),a}function g(t){for(var e=void 0,r=[],i=0,n=this.stack.length;i<n;i+=1){var o={};if(e=this.stack[i],"function"==typeof t)o=t.call(e,e.dataObj,i);else for(var s=Object.keys(t),h=0,c=s.length;h<c;h+=1){var l=s[h];"object"!==a(t[l])?o[l]=t[l]:o[l]=JSON.parse(JSON.stringify(t[l]))}r.push(e.createEl(o))}var u=new X;return u.wrapper(r),u}function v(t,e){for(var r=void 0,i=[],n=t,o=0,a=this.stack.length;o<a;o+=1){var s={};if(r=this.stack[o],"function"==typeof t&&(n=t.call(r,r.dataObj,o)),"function"==typeof e)s=e.call(r,r.dataObj,o);else for(var h=Object.keys(e),c=0,l=h.length;c<l;c+=1){var u=h[c];s[u]=e[u]}i.push(r.createEls(n,s))}var f=new X;return f.wrapper(i),f}function m(t){for(var e=0,r=this.stack.length;e<r;e+=1)t.call(this.stack[e],this.stack[e].dataObj,e);return this}function b(t,e){for(var r=void 0,i=0,n=this.stack.length;i<n;i+=1)if(r=this.stack[i],arguments.length>1)"function"==typeof e?r.setAttr(t,e.call(r,r.dataObj,i)):r.setAttr(t,e);else if("function"==typeof t)r.setAttr(t.call(r,r.dataObj,i));else for(var o=Object.keys(t),a=0,s=o.length;a<s;a+=1){var h=o[a];"function"==typeof t[h]?r.setAttr(h,t[h].call(r,r.dataObj,i)):r.setAttr(h,t[h])}return this}function w(t,e){for(var r=void 0,i=0,n=this.stack.length;i<n;i+=1)if(r=this.stack[i],arguments.length>1)"function"==typeof e?r.setStyle(t,e.call(r,r.dataObj,i)):r.setStyle(t,e);else{if("function"==typeof t)r.setStyle(t.call(r,r.dataObj,i));else for(var o=Object.keys(t),a=0,s=o.length;a<s;a+=1){var h=o[a];"function"==typeof t[h]?r.setStyle(h,t[h].call(r,r.dataObj,i)):r.setStyle(h,t[h])}"function"==typeof t?r.setStyle(t.call(r,r.dataObj,i)):r.setStyle(t)}return this}function A(t){for(var e=void 0,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.translate(t.call(e,e.dataObj,r)):e.translate(t);return this}function B(t){for(var e=void 0,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.rotate(t.call(e,e.dataObj,r)):e.rotate(t);return this}function S(t){for(var e=void 0,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.scale(t.call(e,e.dataObj,r)):e.scale(t);return this}function k(t,e){for(var r=0,i=this.stack.length;r<i;r+=1)this.stack[r].on(t,e);return this}function T(){for(var t=0,e=this.stack.length;t<e;t+=1)this.stack[t].remove();return this}function D(t,e){this[t]=e}function C(t,e,r){for(var i=t.map(r),n={new:[],update:[],old:[]},o=0;o<e.length;o+=1){var a=i.indexOf(r(e[o].dataObj,o));-1!==a?(e[o].dataObj=t[a],n.update.push(e[o]),i[a]=null):n.old.push(e[o])}return n.new=t.filter(function(t,e){var n=i.indexOf(r(t,e));return-1!==n&&(i[n]=null,!0)}),n}function E(t,e,r){var i=this,n=e.split(","),o=r.joinOn,a={new:{},update:{},old:{}};o||(o=function(t,e){return e});for(var s=0,h=n.length;s<h;s++){var c=n[s],l=i.fetchEls(c),u=C(t,l.stack,o);a.new[c]=u.new,a.update[c]=(new X).wrapper(u.update),a.old[c]=(new X).wrapper(u.old)}return r.action&&(r.action.enter&&r.action.enter.call(i,a.new),r.action.exit&&r.action.exit.call(i,a.old),r.action.update&&r.action.update.call(i,a.update)),wt.action={value:r.action,enumerable:!1,configurable:!0,writable:!1},wt.selector={value:e,enumerable:!1,configurable:!0,writable:!1},wt.data={value:t,enumerable:!1,configurable:!0,writable:!1},Object.create(i,wt)}function O(t,e,r){for(var i={},n=Object.keys(t),o=0;o<n.length;o+=1){var a=n[o];"end"!==a&&("function"==typeof t[a]?i[a]=t[a].call(e,e.dataObj,r):i[a]=t[a])}return i}function L(t,e,r){this.config=t,this.type=e||"linear",this.pDom=r}function P(t,e){var r=null;switch(t.el){case"group":r=Gt("g");break;default:r=Gt(t.el)}var i=new zt(r,t,u(),e);return t.dataObj&&(r.dataObj=t.dataObj),i}function j(t){var e=this;if(t.transform){var r=t.transform,i=r.scale&&r.scale.length>0?r.scale[0]:1,n=r.scale&&r.scale.length>1?r.scale[1]:i||1,o=r.skewX?r.skewX[0]:0,a=r.skewY?r.skewY[0]:0,s=r.translate&&r.translate.length>0?r.translate[0]:0,h=r.translate&&r.translate.length>1?r.translate[1]:s||0;e.ctx.transform(i,o,a,n,s,h),r.rotate&&(e.ctx.translate(r.rotate[1]||0,r.rotate[2]||0),e.ctx.rotate(r.rotate[0]*(Math.PI/180)),e.ctx.translate(-r.rotate[1]||0,-r.rotate[2]||0))}for(var c=0;c<e.stack.length;c+=1)e.stack[c].execute()}function I(t,e){void 0!==e?this.attr[t]=e:delete this.attr[t]}function M(t,e){void 0!==e?this.style[t]=e:delete this.style[t]}function _(t,e){this.config=t,this.type=e||"linear",this.mode=this.config.mode&&"percent"!==this.config.mode?"absolute":"percent"}function F(t){return new _(t,"linear")}function R(t){return new _(t,"radial")}function G(t,e,r,i,n){this.pixels=t,this.width=e,this.height=r,this.x=i,this.y=n}function z(t){return t((this.rImageObj?this.rImageObj:this.imageObj).getContext("2d").getImageData(0,0,this.attr.width,this.attr.height))}function N(t,e){var r=document.createElement("canvas");return r.setAttribute("height",e),r.setAttribute("width",t),r.style.height=e+"px",r.style.width=t+"px",r}function Y(t,e){}function U(){this.style.fillStyle&&this.ctx.fill(),this.style.strokeStyle&&this.ctx.stroke()}function q(){this.BBox={x:0,y:0,width:0,height:0},this.BBoxHit={x:0,y:0,width:0,height:0}}function H(t,e,r,i,n,o){var a=this;a.ctx=t,a.attr=e,a.style=r,a.nodeName="Image",a.image=new Image,a.image.onload=function(){if(this.crossOrigin="anonymous",a.attr.height=a.attr.height?a.attr.height:this.height,a.attr.width=a.attr.width?a.attr.width:this.width,Ht[a.attr.src])a.imageObj=Ht[a.attr.src];else{var t=N(this.width,this.height);t.getContext("2d").drawImage(this,0,0,this.width,this.height),a.imageObj=t,Ht[a.attr.src]=t}if(a.attr.clip){var e=void 0,r=a.attr,n=r.clip,s=r.width,h=r.height,c=n.sx,l=n.sy,u=n.swidth,f=n.sheight;this.rImageObj||(a.rImageObj=N(a.attr.width,a.attr.height)),e=a.rImageObj.getContext("2d"),c=void 0!==c?c:0,l=void 0!==l?l:0,u=void 0!==u?u:s,f=void 0!==f?f:h,e.drawImage(a.imageObj,c,l,u,f,0,0,s,h)}if(a.attr.pixels){var p=void 0,d=a.attr,y=d.width,x=d.height;a.rImageObj||(a.rImageObj=N(a.attr.width,a.attr.height),p=a.rImageObj.getContext("2d"),p.drawImage(a.imageObj,0,0,y,x)),p=a.rImageObj.getContext("2d"),p.putImageData(z.call(a,a.attr.pixels),0,0)}i&&"function"==typeof i&&i.call(o),a.nodeExe.BBoxUpdate=!0,gt.vDomChanged(a.nodeExe.vDomIndex)},a.image.onerror=function(){n&&"function"==typeof n&&n.call(o)},a.attr.src&&(a.image.src=a.attr.src),gt.vDomChanged(o.vDomIndex),a.stack=[a]}function V(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="text",i.stack=[i]}function W(t){var e=new Path2D,r=t,i=[];r=r.replace(/,/g," ").split(" "),e.moveTo(r[0],r[1]),i.push({x:parseFloat(r[0]),y:parseFloat(r[1])});for(var n=2;n<r.length;n+=2)e.lineTo(r[n],r[n+1]),i.push({x:parseFloat(r[n]),y:parseFloat(r[n+1])});return e.closePath(),{path:e,points:i}}function X(t,e,r,i){e||(e=[]);var n=void 0,o=void 0,a=r&&r.attr?Object.keys(r.attr):[],s=r&&r.style?Object.keys(r.style):[],h=!r||(void 0===r.bbox||r.bbox);return this.stack=e.map(function(e,c){var l=void 0;"SVG"===t.type?l=P({el:r.el},i):"CANVAS"===t.type?l=new Jt(t.ctx,{el:r.el,bbox:h},u(),i):"WEBGL"===t.type?l=new pt(t.ctx,{el:r.el,bbox:h},u(),i):console.log("unknow type");for(var f=0,p=a.length;f<p;f+=1)if("transform"!==(o=a[f]))if("function"==typeof r.attr[o]){var d=r.attr[o].call(l,e,c);l.setAttr(o,d)}else l.setAttr(o,r.attr[o]);else{n="function"==typeof r.attr.transform?r.attr[o].call(l,e,c):r.attr.transform;for(var y in n)l[y](n[y])}for(var x=0,g=s.length;x<g;x+=1)if(o=s[x],"function"==typeof r.style[o]){var v=r.style[o].call(l,e,c);l.setStyle(o,v)}else l.setStyle(o,r.style[o]);return l.dataObj=e,l}),this}function Z(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}function Q(t,e,r){var i=t.createShader(r);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var n=t.getShaderInfoLog(i);return console.error("*** Error compiling shader '"+i+"':"+n),t.deleteShader(i),null}return i}function $(t,e){var r=t.createProgram();if(e.forEach(function(e){t.attachShader(r,e)}),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var i=t.getProgramInfoLog(r);return console.error("Error in program linking:"+i),t.deleteProgram(r),null}return r}function K(t,e){return $(t,[Q(t,e.vertexShader,t.VERTEX_SHADER),Q(t,e.fragmentShader,t.FRAGMENT_SHADER)])}function J(t,e){this.attr=t||{},this.style=e||{}}function tt(t,e){this.attr=t||{},this.style=e||{}}function et(t,e){this.attr=t||{},this.style=e||{}}function rt(t,e){this.attr=t||{},this.style=e||{}}function it(t,e){this.attr=t,this.style=e,this.attr.points&&(this.attr.triangulatedPoints=l(this.attr.points.reduce(function(t,e){return t.push(e.x),t.push(e.y),t},[])).map(function(t){return value[t]}))}function nt(t,e){this.attr=t,this.style=e}function ot(t){for(var e=0;e<t.length;e++)this.ctx.bindBuffer(t[e].bufferType,t[e].buffer),this.ctx.bufferData(t[e].bufferType,t[e].data,t[e].drawType),this.ctx.enableVertexAttribArray(t[e].attribute),this.ctx.vertexAttribPointer(t[e].attribute,t[e].size,t[e].valueType,!0,0,0)}function at(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=K(t,c("point")),this.colorBuffer=t.createBuffer(),this.sizeBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.sizeAttributeLocation=t.getAttribLocation(this.program,"a_size"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution")}function st(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=K(t,c("rect")),this.colorBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution")}function ht(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=K(t,c("line")),this.colorBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution")}function ct(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=K(t,c("line")),this.colorBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution")}function lt(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=K(t,c("line")),this.colorBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution")}function ut(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=K(t,c("circle")),this.colorBuffer=t.createBuffer(),this.radiusBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.radiusAttributeLocation=t.getAttribLocation(this.program,"a_radius"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution")}function ft(t,e,r,i,n){var o=void 0;switch(i){case"rects":o=new st(t,e,r,n);break;case"points":o=new at(t,e,r,n);break;case"lines":o=new ht(t,e,r,n);break;case"polylines":o=new ct(t,e,r,n);break;case"polygons":o=new lt(t,e,r,n);break;case"circles":o=new ut(t,e,r,n);break;default:o=null}this.shader=o}function pt(t,e,r,i){switch(this.ctx=t,this.style=e.style?e.style:{},this.attr=e.attr?e.attr:{},this.id=r,this.nodeName=e.el,this.nodeType="WEBGL",this.children=[],this.ctx=t,this.vDomIndex=i,this.el=e.el,this.shaderType=e.shaderType,e.el){case"point":this.dom=new J(this.attr,this.style);break;case"rect":this.dom=new tt(this.attr,this.style);break;case"line":this.dom=new rt(this.attr,this.style);break;case"polyline":this.dom=new et(this.attr,this.style);break;case"polygon":this.dom=new it(this.attr,this.style);break;case"circle":this.dom=new nt(this.attr,this.style);break;case"group":this.dom=new ft(this.ctx,this.attr,this.style,this.shaderType,this.vDomIndex);break;default:this.dom=null}this.dom.nodeExe=this}var dt={},yt=t("2D"),xt=r(),gt=e(),vt=0,mt=0,bt=void 0,wt={};wt.push={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var e=0,r=t.length;e<r;e++)this.data.push(t[e]);if(this.action.enter){var i={};this.selector.split(",").forEach(function(e){i[e]=t}),this.action.enter.call(this,i)}},enumerable:!1,configurable:!1,writable:!1},wt.pop={value:function(){var t=this,e=this.data.pop();if(this.action.exit){var r={};this.selector.split(",").forEach(function(i){r[i]=t.fetchEls(i,[e])}),this.action.exit.call(this,r)}},enumerable:!1,configurable:!1,writable:!1},wt.remove={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);var e=this;if(this.action.exit){var r={};this.selector.split(",").forEach(function(i){r[i]=e.fetchEls(i,t)}),this.action.exit.call(this,r)}for(var i=0,n=t.length;i<n;i++)-1!==this.data.indexOf(t[i])&&this.data.splice(this.data.indexOf(t[i]),1)},enumerable:!1,configurable:!0,writable:!1},wt.update={value:function(){var t=this;if(this.action.update){var e={};this.selector.split(",").forEach(function(r){e[r]=t.fetchEls(r,t.data)}),this.action.update.call(this,e)}},enumerable:!1,configurable:!0,writable:!1};var At=function(t,e){var r=e.attr?e.attr:{},i=e.style?e.style:{},n=[],o=void 0,a=void 0;if("function"!=typeof r)for(var s=r?Object.keys(r):[],h=0,c=s.length;h<c;h+=1)if("transform"!==(a=s[h]))"d"===a?t.morphTo(e):n[n.length]=kt(t,a,r[a]);else if("function"==typeof(o=r[a]))n[n.length]=Bt(t,a,o);else{var l=t.attr.transform;l||(t.attr.transform={});for(var u=Object.keys(r.transform),f=0,p=u.length;f<p;f+=1)n[n.length]=St(t,u[f],r.transform[u[f]])}else n[n.length]=r.bind(t);if("function"!=typeof i)for(var d=i?Object.keys(i):[],y=0,x=d.length;y<x;y+=1)n[n.length]=Tt(t,d[y],i[d[y]]);else n[n.length]=i.bind(t);return{run:function(t){for(var e=0,r=n.length;e<r;e+=1)n[e](t)},duration:e.duration,delay:e.delay?e.delay:0,end:e.end?e.end.bind(t,t.dataObj):null,loop:e.loop?e.loop:0,direction:e.direction?e.direction:"default",ease:e.ease?e.ease:"default"}},Bt=function(t,e,r){return function(i){t.setAttr(e,r.call(t,i))}},St=function(t,e,r){var i=[],n=t.attr.transform;return"function"==typeof r?function(i){t[e](r.call(t,i))}:(r.forEach(function(t,r){var o=void 0;o=n[e]&&void 0!==n[e][r]?n[e][r]:"scale"===e?1:0,i.push(yt.intermediateValue.bind(null,o,t))}),function(r){t[e](i.map(function(t){return t(r)}))})},kt=function(t,e,r){var i=t.attr[e];return"function"==typeof r?function(i){t.setAttr(e,r.call(t,i))}:function(n){t.setAttr(e,yt.intermediateValue(i,r,n))}},Tt=function(t,e,r){var i=void 0,n=void 0,o=void 0;if("function"==typeof r)return function(i){t.setStyle(e,r.call(t,t.dataObj,i))};if(i=t.style[e],isNaN(r)){if(r.startsWith("#")||r.startsWith("rgb")||r.startsWith("hsl")){var a=s.transition(i,r);return function(r){t.setStyle(e,a(r))}}i=i.match(/(\d+)/g),o=r.match(/(\d+)/g),n=r.match(/\D+$/),i=parseInt(i.length>0?i[0]:0,10),o=parseInt(o.length>0?o[0]:0,10),n=n.length>0?n[0]:"px"}else i=void 0!==t.style[e]?t.style[e]:1,o=r,n=0;return function(r){t.setStyle(e,yt.intermediateValue(i,o,r)+n)}},Dt=function(t){return gt.add(f(),At(this,t),xt(t.ease)),this},Ct=function(t){return At(this,t)},Et=function(t){for(var e=void 0,r=void 0,i=0;i<this.stack.length;i+=1)r={},e=this.stack[i],r=O(t,e,i),t.attr&&"function"!=typeof t.attr&&(r.attr=O(t.attr,e,i)),t.style&&"function"!=typeof t.style&&(r.style=O(t.style,e,i)),t.end&&(r.end=t.end),t.ease&&(r.ease=t.ease),e.animateTo(r);return this},Ot=function(t){for(var e=void 0,r=void 0,i=[],n=0;n<this.stack.length;n+=1)r={},e=this.stack[n],r=O(t,e,n),t.attr&&"function"!=typeof t.attr&&(r.attr=O(t.attr,e,n)),t.style&&"function"!=typeof t.style&&(r.style=O(t.style,e,n)),t.end&&(r.end=t.end),t.ease&&(r.ease=t.ease),i.push(e.animateExe(r));return i},Lt=function(t){for(var e=void 0,r=Object.keys(t),i=0;i<this.stack.length;i+=1){e=this.stack[i];for(var n={},o=0;o<r.length;o++){var a=t[r[o]];"function"==typeof a&&(a=a.call(e,e.dataObj,i)),n[r[o]]=a}e.animatePathTo(n)}return this},Pt=function(t){var e=void 0;if("function"!=typeof t)for(var r=0;r<this.stack.length;r+=1)e=this.stack[r],e.text(t);else for(var i=0;i<this.stack.length;i+=1)e=this.stack[i],e.text(t.call(e,e.dataObj,i));return this},jt=function(t){function e(t){if(t.length){for(var e=t,r=[],i=0;i<e.length;i+=1)if(-1!==["M","C","S","Q"].indexOf(e[i].type))r.push(e[i]);else if(-1!==["V","H","L","Z"].indexOf(e[i].type)){var n={x:(e[i].p0.x+e[i].p1.x)/2,y:(e[i].p0.y+e[i].p1.y)/2};r.push({p0:e[i].p0,cntrl1:n,cntrl2:n,p1:e[i].p1,type:"C",length:e[i].length})}return r}}function r(t,e){S.push({run:function(t,e){var r=this.pointTansition(e);t.m(!0,{x:r.x,y:r.y})},pointTansition:yt.linearTransitionBetweenPoints.bind(null,t.p0,e.p0)})}function i(t,e){S.push({run:function(t,e){var r=this,i=r.ctrl1Transition(e),n=r.ctrl2Transition(e),o=r.destTransition(e);t.c(!0,{x:i.x,y:i.y},{x:n.x,y:n.y},{x:o.x,y:o.y})},srcTransition:yt.linearTransitionBetweenPoints.bind(null,t.p0,e.p0),ctrl1Transition:yt.linearTransitionBetweenPoints.bind(null,t.cntrl1,e.cntrl1),ctrl2Transition:yt.linearTransitionBetweenPoints.bind(null,t.cntrl2,e.cntrl2),destTransition:yt.linearTransitionBetweenPoints.bind(null,t.p1,e.p1)})}function n(t,e){if(t.length===e)return t;for(var r=t.reduce(function(t,e){return t+e.length},0),i=[],n=0;n<t.length;n+=1){var a=t[n].length,s=Math.floor(e/r*a);if(s<=1)i.push(t[n]);else{for(var h=t[n],c=void 0;s>1;){var l=h;c=o([l.p0,l.cntrl1,l.cntrl2,l.p1].slice(0),1/s),i.push({p0:l.p0,cntrl1:c.b1[0],cntrl2:c.b1[1],p1:c.b1[2],type:"C"}),h={p0:c.b1[2],cntrl1:c.b2[0],cntrl2:c.b2[1],p1:c.b2[2],type:"C"},s-=1}i.push(h)}}return i}function o(t,e){for(var r=[],i=t;i.length>0;){for(var n=0;n<i.length-1;n+=1)r.unshift(i[n]),i[n]=a(i[n],i[n+1],e);r.unshift(i.pop())}return{b1:[{x:r[5].x,y:r[5].y},{x:r[2].x,y:r[2].y},{x:r[0].x,y:r[0].y}],b2:[{x:r[1].x,y:r[1].y},{x:r[3].x,y:r[3].y},{x:r[6].x,y:r[6].y}]}}function a(t,e,r){return{x:t.x+(e.x-t.x)*(void 0!==r?r:.5),y:t.y+(e.y-t.y)*(void 0!==r?r:.5)}}function s(t){for(var e=0,r=0;r<t.length;r+=1)"M"!==t[r].type&&(e+=(t[r].p1.x-t[r].p0.x)*(t[r].p1.y+t[r].p0.y));return e}function c(t){var e=t.reverse(),r=[{type:"M",p0:e[0].p1}];return e.forEach(function(t){if("C"===t.type){var e=t,i=e.p0,n=e.cntrl1;e.p0=t.p1,e.p1=i,e.cntrl1=t.cntrl2,e.cntrl2=n,r.push(e)}}),r}function l(t){var e=0,r=0,i=0,n=0;return t.forEach(function(t){t.p0&&(e+=t.p0.x,r+=t.p0.y,i+=1,n+=1),t.p1&&(e+=t.p1.x,r+=t.p1.y,i+=1,n+=1)}),{x:e/i,y:r/n}}function u(t,e){return e.x>=t.x&&e.y<=t.y?1:e.x<=t.x&&e.y<=t.y?2:e.x<=t.x&&e.y>=t.y?3:4}function p(t,e){for(var r=l(t),i=l(e),n=t,o=e,a=0;a<t.length;a+=1)n[a].quad=u(r,t[a].p0);for(var s=0;s<e.length;s+=1)o[s].quad=u(i,e[s].p0);var h=0;return t.forEach(function(t,e){var i=yt.getDistance(t.p0,r);1===t.quad&&i>=h&&(h=i)}),h=0,e.forEach(function(t,e){var r=yt.getDistance(t.p0,i);1===t.quad&&r>h&&(h=r)}),{src:d(t,0),dest:d(e,0),srcCentroid:r,destCentroid:i}}function d(t,e){if(e<=0)return t;var r=t,i=r.splice(0,e);return i.shift(),r=r.concat(i),r.unshift({type:"M",p0:r[0].p0}),r.push({type:"M",p0:r[0].p0}),r}function y(t,e){var o=void 0,a=void 0,h=t.length>e.length?t.length:e.length;e.length>2&&t.length>2?(h>50?h+=30:h=h>=20?h+15:h+4,o=n(t,h),a=n(e,h)):(o=t,a=e),s(o)<0&&(o=c(o)),s(a)<0&&(a=c(a));var l=p(o,a,this);o=l.src.length>1?l.src:[{type:"M",p0:l.destCentroid}],a=l.dest.length>1?l.dest:[{type:"M",p0:l.srcCentroid}];for(var u=a.length<o.length?o.length:a.length,f=0;f<o.length;f+=1)o[f].index=f;for(var d=0;d<a.length;d+=1)a[d].index=d;for(var y=0;y<u;y+=1){var x=o[o.length-1].p0?o[o.length-1].p0:o[o.length-1].p1,g=a[a.length-1].p0?a[a.length-1].p0:a[a.length-1].p1,v=o[y]?o[y]:{type:"C",p0:x,p1:x,cntrl1:x,cntrl2:x,length:0},m=a[y]?a[y]:{type:"C",p0:g,p1:g,cntrl1:g,cntrl2:g,length:0};"M"===v.type&&"M"===m.type?r(v,m):"M"===v.type||"M"===m.type?"M"===v.type?i({type:"C",p0:v.p0,p1:v.p0,cntrl1:v.p0,cntrl2:v.p0,length:0},m):i(v,{type:"C",p0:m.p0,p1:m.p0,cntrl1:m.p0,cntrl2:m.p0,length:0}):i(v,m)}}var x=this,g=t.duration,v=t.ease,m=t.loop?t.loop:0,b=t.direction?t.direction:"default",w=t.attr.d?t.attr.d:x.attr.d,A=h.isTypePath(x.attr.d)?x.attr.d.stackGroup:dt.Path(x.attr.d).stackGroup,B=h.isTypePath(w)?w.stackGroup:dt.Path(w).stackGroup,S=[];x.arrayStack=[],A.length>1&&(A=A.sort(function(t,e){return e.segmentLength-t.segmentLength})),B.length>1&&(B=B.sort(function(t,e){return e.segmentLength-t.segmentLength}));var k=A.length>B.length?A.length:B.length;y(e(A[0]),e(B[0]));for(var T=1;T<k;T+=1)A[T]&&y(e(A[T]),[{type:"M",p0:A[T][0].p0}]),B[T]&&y([{type:"M",p0:B[T][0].p0}],e(B[T]));gt.add(f(),{run:function(t){for(var e=dt.Path(),r=0,i=S.length;r<i;r++)S[r].run(e,t);x.setAttr("d",x instanceof zt?e.fetchPathString():e)},duration:g,loop:m,direction:b},xt(v))},It=function(t){var e=this,r=t.duration,n=t.ease,o=t.end,a=t.loop,s=t.direction,c=t.d,l=c||e.attr.d,u=0;if(e.arrayStack=[],!l)throw Error("Path Not defined");for(var f=i.sequenceChain(),p=h.isTypePath(l)?l:dt.Path(l),d=p.stackGroup.reduce(function(t,e){return t=t.concat(e)},[]),y=[],x=0;x<d.length;x+=1)!function(t){if("Z"===d[t].type)y.push({run:function(t){p.stack.splice(this.id,p.stack.length-1-e.id),p.stack[this.id]=this.render.execute(t),e.setAttr("d",e instanceof zt?p.fetchPathString():p)},id:t,render:new Ft(d[t].p0,d[0].p0,d[t].segmentLength),length:d[t].length}),u+=0;else if(-1!==["V","H","L"].indexOf(d[t].type))y.push({run:function(t){p.stack.splice(this.id,p.stack.length-1-e.id),p.stack[this.id]=this.render.execute(t),e.setAttr("d",e instanceof zt?p.fetchPathString():p)},id:t,render:new Ft(d[t].p0,d[t].p1,d[t].length),length:d[t].length}),u+=d[t].length;else if("Q"===d[t].type)y.push({run:function(t){p.stack.splice(this.id,p.stack.length-1-e.id),p.stack[this.id]=this.render.execute(t),e.setAttr("d",e instanceof zt?p.fetchPathString():p)},id:t,render:new _t(d[t].p0,d[t].cntrl1,d[t].p1,d[t].length),length:d[t].length}),u+=d[t].length;else if("C"===d[t].type||"S"===d[t].type){var r=yt.cubicBezierCoefficients(d[t]);y.push({run:function(t){p.stack.splice(this.id,p.stack.length-1-e.id),p.stack[this.id]=this.render.execute(t),e.setAttr("d",e instanceof zt?p.fetchPathString():p)},id:t,co:r,render:new Mt(d[t].p0,d[t].cntrl1,d[t].cntrl2,r,d[t].length),length:d[t].length}),u+=d[t].length}else"M"===d[t].type&&(y.push({run:function(){p.stack.splice(this.id,p.stack.length-1-e.id),p.stack[this.id]={type:"M",p0:d[t].p0,length:0,pointAt:function(t){return this.p0}}},id:t,length:0}),u+=0)}(x);return y.forEach(function(t){t.duration=t.length/u*r}),f.duration(r).add(y).ease(n).loop(a||0).direction(s||"default"),"function"==typeof o&&f.end(o.bind(e)),f.commit(),this},Mt=function(t,e,r,i,n){this.type="C",this.p0=t,this.c1_src=e,this.c2_src=r,this.co=i,this.length_src=n};Mt.prototype.execute=function(t){var e=this.co,r=this.p0,i=this.c1_src,n=this.c2_src,o={x:r.x+(i.x-r.x)*t,y:r.y+(i.y-r.y)*t},a={x:i.x+(n.x-i.x)*t,y:i.y+(n.y-i.y)*t};return this.cntrl1=o,this.cntrl2={x:o.x+(a.x-o.x)*t,y:o.y+(a.y-o.y)*t},this.p1={x:e.ax*yt.pow(t,3)+e.bx*yt.pow(t,2)+e.cx*t+r.x,y:e.ay*yt.pow(t,3)+e.by*yt.pow(t,2)+e.cy*t+r.y},this.length=this.length_src*t,this},Mt.prototype.pointAt=function(t){return yt.cubicBezierTransition(this.p0,this.co,t)};var _t=function(t,e,r,i,n){this.type="Q",this.p0=t,this.p1_src=e,this.p2_src=r,this.length_src=i,this.length=0};_t.prototype.execute=function(t){var e=this.p0,r=this.p1_src,i=this.p2_src;return this.length=this.length_src*t,this.cntrl1={x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t},this.cntrl2=this.cntrl1,this.p1={x:(e.x-2*r.x+i.x)*t*t+(2*r.x-2*e.x)*t+e.x,y:(e.y-2*r.y+i.y)*t*t+(2*r.y-2*e.y)*t+e.y},this},_t.prototype.pointAt=function(t){return yt.bezierTransition(this.p0,this.cntrl1,this.p1,t)};var Ft=function(t,e,r,i){this.type="L",this.p0=t,this.p1=t,this.p2_src=e,this.length_src=r,this.length=0};Ft.prototype.execute=function(t){var e=this.p0,r=this.p2_src;return this.p1={x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t},this.length=this.length_src*t,this},Ft.prototype.pointAt=function(t){return yt.linearTransitionBetweenPoints(this.p0,this.p1,t)},L.prototype.exe=function(){return"url(#"+this.config.id+")"},L.prototype.linearGradient=function(){var t=this;return this.defs||(this.defs=this.pDom.createEl({el:"defs"})),this.linearEl=this.defs.join([1],"linearGradient",{action:{enter:function(e){this.createEls(e.linearGradient,{el:"linearGradient"}).setAttr({id:t.config.id,x1:t.config.x1+"%",y1:t.config.y1+"%",x2:t.config.x2+"%",y2:t.config.y2+"%"})},exit:function(t){t.linearGradient.remove()},update:function(e){e.linearGradient.setAttr({id:t.config.id,x1:t.config.x1+"%",y1:t.config.y1+"%",x2:t.config.x2+"%",y2:t.config.y2+"%"})}}}),this.linearEl=this.linearEl.fetchEl("linearGradient"),this.linearEl.fetchEls("stop").remove(),this.linearEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:function(t,e){return t.value+"%"},"stop-color":function(t,e){return t.color}}}),this},L.prototype.radialGradient=function(){var t=this;return this.defs||(this.defs=this.pDom.createEl({el:"defs"})),this.radialEl=this.defs.join([1],"radialGradient",{action:{enter:function(e){this.createEls(e.radialGradient,{el:"radialGradient"}).setAttr({id:t.config.id,cx:t.config.innerCircle.x+"%",cy:t.config.innerCircle.y+"%",r:t.config.outerCircle.r+"%",fx:t.config.outerCircle.x+"%",fy:t.config.outerCircle.y+"%"})},exit:function(t){t.radialGradient.remove()},update:function(e){e.radialGradient.setAttr({id:t.config.id,cx:t.config.innerCircle.x+"%",cy:t.config.innerCircle.y+"%",r:t.config.outerCircle.r+"%",fx:t.config.outerCircle.x+"%",fy:t.config.outerCircle.y+"%"})}}}),this.radialEl=this.radialEl.fetchEl("radialGradient"),this.radialEl.fetchEls("stop").remove(),this.radialEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:function(t,e){return t.value+"%"},"stop-color":function(t,e){return t.color}}}),this},L.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,"linear"===this.type?this.linearGradient():"radial"===this.type&&this.radialGradient())};var Rt={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Gt=function(t){return document.createElementNS(Rt.svg,t)},zt=function(t,e,r,i){this.dom=t,this.nodeName=t.nodeName,this.attr=e.attr?e.attr:{},this.changedAttribute=this.attr,this.style=e.style?e.style:{},this.changedStyles=this.style,this.id=r,this.nodeType="svg",this.dom.nodeId=r,this.attrChanged=!0,this.styleChanged=!0,this.children=[],this.vDomIndex=i};zt.prototype.node=function(){return this.execute(),this.dom};var Nt=void 0,Yt=void 0,Ut=void 0,qt=void 0;zt.prototype.transFormAttributes=function(){var t=this;Yt=Object.keys(t.changedAttribute);for(var e=0,r=Yt.length;e<r;e+=1){var i=Yt[e];if("transform"!==i){var n=i.indexOf(":");n>=0?t.dom.setAttributeNS(Rt[i.slice(0,n)],i.slice(n+1),this.changedAttribute[i]):"text"===i?t.dom.textContent=this.changedAttribute[i]:t.dom.setAttribute(i,this.changedAttribute[i])}}if(this.changedAttribute.transform){var o="";Ut=Object.keys(this.attr.transform);for(var a=0;a<Ut.length;a+=1)qt=Ut[a],o+="rotate"===qt?qt+"("+this.attr.transform.rotate[0]+" "+(this.attr.transform.rotate[1]||0)+" "+(this.attr.transform.rotate[2]||0)+") ":qt+"("+this.attr.transform[qt].join(" ")+") ";this.dom.setAttribute("transform",o)}this.changedAttribute={},Nt=Object.keys(this.changedStyles);for(var s=0,h=Nt.length;s<h;s+=1)this.changedStyles[Nt[s]]instanceof L&&(this.changedStyles[Nt[s]]=this.changedStyles[Nt[s]].exe()),this.dom.style.setProperty(Nt[s],this.changedStyles[Nt[s]],"");this.changedStyles={}},zt.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.scale=t,this.changedAttribute.transform=this.attr.transform,gt.vDomChanged(this.vDomIndex),this},zt.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewX=[t],this.changedAttribute.transform=this.attr.transform,gt.vDomChanged(this.vDomIndex),this},zt.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewY=[t],this.changedAttribute.transform=this.attr.transform,gt.vDomChanged(this.vDomIndex),this},zt.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.changedAttribute.transform=this.attr.transform,gt.vDomChanged(this.vDomIndex),this},zt.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)&&t.length>0?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.changedAttribute.transform=this.attr.transform,gt.vDomChanged(this.vDomIndex),this},zt.prototype.setStyle=function(t,e){if(2===arguments.length)"function"==typeof e&&(e=e.call(this,this.dataObj)),this.style[t]=e,this.changedStyles[t]=e;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r=Object.keys(t),i=0,n=r.length;i<n;i+=1){var o=r[i];this.style[o]=t[o],this.changedStyles[o]=t[o]}return this.styleChanged=!0,gt.vDomChanged(this.vDomIndex),this},zt.prototype.setAttr=function(t,e){if(2===arguments.length)this.attr[t]=e,this.changedAttribute[t]=e;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r=Object.keys(t),i=0,n=r.length;i<n;i+=1){var o=r[i];this.attr[o]=t[o],this.changedAttribute[o]=t[o]}return this.attrChanged=!0,gt.vDomChanged(this.vDomIndex),this},zt.prototype.getAttr=function(t){return this.attr[t]},zt.prototype.execute=function(){if(this.styleChanged||this.attrChanged){this.transFormAttributes();for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute()}else for(var r=0,i=this.children.length;r<i;r+=1)this.children[r].execute()},zt.prototype.child=function(t){var e=this.dom,r=this;if(t instanceof X){for(var i=document.createDocumentFragment(),n=0,o=t.stack.length;n<o;n++)i.appendChild(t.stack[n].dom),t.stack[n].parentNode=r,this.children[this.children.length]=t.stack[n];e.appendChild(i)}else t instanceof zt?(e.appendChild(t.dom),t.parentNode=r,this.children.push(t)):console.log("wrong node type");return this},zt.prototype.fetchEl=y,zt.prototype.fetchEls=d,zt.prototype.animateTo=Dt,zt.prototype.animateExe=Ct,zt.prototype.animatePathTo=It,zt.prototype.morphTo=jt,zt.prototype.exec=function(t){return"function"!=typeof t&&console.Error("Wrong Exe type"),t.call(this,this.dataObj),this},zt.prototype.createRadialGradient=function(t){var e=new L(t,"radial",this);return e.radialGradient(),e},zt.prototype.createLinearGradient=function(t){var e=new L(t,"linear",this);return e.linearGradient(),e},zt.prototype.join=E,zt.prototype.on=function(t,e){var r=e.bind(this),i=this;return this.dom.addEventListener(t,function(t){r(i.dataObj,t)}),this},zt.prototype.html=function(t){return arguments.length?(this.dom.innerHTML(t),this):this.dom.innerHTML},zt.prototype.text=function(t){return arguments.length?(this.attr.text=t,this.changedAttribute.text=t,this):this.attr.text},zt.prototype.remove=function(){this.parentNode.removeChild(this)},zt.prototype.createEls=function(t,e){var r=new X({type:"SVG"},t,e,this.vDomIndex);return this.child(r),gt.vDomChanged(this.vDomIndex),r},zt.prototype.createEl=function(t){var e=P(t,this.vDomIndex);return this.child(e),gt.vDomChanged(this.vDomIndex),e},zt.prototype.removeChild=function(t){var e=this.children,r=e.indexOf(t);-1!==r&&this.dom.removeChild(e.splice(r,1)[0].dom)},_.prototype.exe=function(t,e){return"linear"===this.type&&"percent"===this.mode?this.linearGradient(t,e):"linear"===this.type&&"absolute"===this.mode?this.absoluteLinearGradient(t):"radial"===this.type&&"percent"===this.mode?this.radialGradient(t,e):"radial"===this.type&&"absolute"===this.mode?this.absoluteRadialGradient(t):void console.Error("wrong Gradiant type")},_.prototype.linearGradient=function(t,e){var r=t.createLinearGradient(e.x+e.width*(this.config.x1/100),e.y+e.height*(this.config.y1/100),e.x+e.width*(this.config.x2/100),e.y+e.height*(this.config.y2/100));return this.config.colorStops.forEach(function(t){r.addColorStop(t.value/100,t.color)}),r},_.prototype.absoluteLinearGradient=function(t){console.log("called");var e=t.createLinearGradient(this.config.x1,this.config.y1,this.config.x2,this.config.y2);return this.config.colorStops.forEach(function(t){e.addColorStop(t.value,t.color)}),e},_.prototype.radialGradient=function(t,e){var r=t.createRadialGradient(e.x+e.width*(this.config.innerCircle.x/100),e.y+e.height*(this.config.innerCircle.y/100),e.width>e.height?e.width*this.config.innerCircle.r/100:e.height*this.config.innerCircle.r/100,e.x+e.width*(this.config.outerCircle.x/100),e.y+e.height*(this.config.outerCircle.y/100),e.width>e.height?e.width*this.config.outerCircle.r/100:e.height*this.config.outerCircle.r/100);return this.config.colorStops.forEach(function(t){r.addColorStop(t.value/100,t.color)}),r},_.prototype.absoluteRadialGradient=function(t,e){var r=t.createRadialGradient(this.config.innerCircle.x,this.config.innerCircle.y,this.config.innerCircle.r,this.config.outerCircle.x,this.config.outerCircle.y,this.config.outerCircle.r);return this.config.colorStops.forEach(function(t){r.addColorStop(t.value/100,t.color)}),r},_.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,this)},G.prototype.get=function(t){var e=(t.y-1)*(4*this.width)+4*(t.x-1);return"rgba("+this.pixels[e]+", "+this.pixels[e+1]+", "+this.pixels[e+2]+", "+this.pixels[e+3]+")"},G.prototype.put=function(t,e){var r=(e.y-1)*(4*this.width)+4*(e.x-1);return this.pixels[r]=t[0],this.pixels[r+1]=t[1],this.pixels[r+2]=t[2],this.pixels[r+3]=t[3],this},Y.prototype={},Y.prototype.setAttr=function(t,e){},Y.prototype.execute=function(){},q.prototype={render:j,on:D,setAttr:I,setStyle:M,applyStyles:U};var Ht={};H.prototype=new q,H.prototype.constructor=H,H.prototype.setAttr=function(t,e){var r=this;if(this.attr[t]=e,"src"===t&&(this.image.src=e),"clip"===t){this.rImageObj||(this.rImageObj=N(r.attr.width,r.attr.height));var i=this.rImageObj.getContext("2d"),n=this.attr,o=n.clip,a=n.width,s=n.height,h=o.sx,c=o.sy,l=o.swidth,u=o.sheight;h=void 0!==h?h:0,c=void 0!==c?c:0,l=void 0!==l?l:a,u=void 0!==u?u:s,i.clearRect(0,0,a,s),this.imageObj&&i.drawImage(this.imageObj,h,c,l,u,0,0,a,s)}if(r.attr.pixels){var f=void 0;f=r.rImageObj.getContext("2d"),f.putImageData(z.call(r,r.attr.pixels),0,0)}gt.vDomChanged(this.nodeExe.vDomIndex)},H.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform,s=t.attr,h=s.x,c=s.y,l=s.width,u=s.height;if(a){if(a.translate){var f=o(a.translate,2);e=f[0],r=f[1]}a.scale&&(i=void 0!==a.scale[0]?a.scale[0]:1,n=void 0!==a.scale[1]?a.scale[1]:i)}t.BBox={x:(e+h)*i,y:(r+c)*n,width:(l||0)*i,height:(u||0)*n},a&&a.rotate?t.BBoxHit=yt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},H.prototype.execute=function(){var t=this.attr,e=t.width,r=t.height,i=t.x,n=t.y;this.imageObj&&this.ctx.drawImage(this.rImageObj?this.rImageObj:this.imageObj,i||0,n||0,e,r)},H.prototype.applyStyles=function(){},H.prototype.in=function(t){return t.x>=this.attr.x&&t.x<=this.attr.x+this.attr.width&&t.y>=this.attr.y&&t.y<=this.attr.y+this.attr.height},V.prototype=new q,V.prototype.constructor=V,V.prototype.text=function(t){this.attr.text=t},V.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=1,s=t.attr.transform;if(s&&s.translate){var h=o(s.translate,2);e=h[0],r=h[1]}if(s&&s.scale){var c=o(s.scale,2);i=c[0],n=c[1]}this.style.font&&(this.ctx.font=this.style.font,a=parseInt(this.style.font,10)),t.BBox={x:e+t.attr.x*i,y:r+(t.attr.y-a+5)*n,width:this.ctx.measureText(this.attr.text).width*i,height:a*n},s&&s.rotate?t.BBoxHit=yt.rotateBBox(this.BBox,s):t.BBoxHit=this.BBox},V.prototype.execute=function(){void 0!==this.attr.text&&null!==this.attr.text&&(this.style.fillStyle&&this.ctx.fillText(this.attr.text,this.attr.x,this.attr.y),this.style.strokeStyle&&this.ctx.strokeText(this.attr.text,this.attr.x,this.attr.y))},V.prototype.applyStyles=function(){},V.prototype.in=function(t){return t.x>=this.attr.x&&t.x<=this.attr.x+this.attr.width&&t.y>=this.attr.y&&t.y<=this.attr.y+this.attr.height};var Vt=function(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="circle",i.stack=[i]};Vt.prototype=new q,Vt.prototype.constructor=Vt,Vt.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a){if(a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}}t.BBox={x:(e+(t.attr.cx-t.attr.r))*i,y:(r+(t.attr.cy-t.attr.r))*n,width:2*t.attr.r*i,height:2*t.attr.r*n},a&&a.rotate?t.BBoxHit=yt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},Vt.prototype.execute=function(){this.ctx.beginPath(),this.ctx.arc(this.attr.cx,this.attr.cy,this.attr.r,0,2*Math.PI,!1),this.applyStyles(),this.ctx.closePath()},Vt.prototype.in=function(t){return Math.sqrt((t.x-this.attr.cx)*(t.x-this.attr.cx)+(t.y-this.attr.cy)*(t.y-this.attr.cy))<=this.attr.r};var Wt=function(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="line",i.stack=[i]};Wt.prototype=new q,Wt.prototype.constructor=Wt,Wt.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a&&a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a&&a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}t.BBox={x:e+(t.attr.x1<t.attr.x2?t.attr.x1:t.attr.x2)*i,y:r+(t.attr.y1<t.attr.y2?t.attr.y1:t.attr.y2)*n,width:Math.abs(t.attr.x2-t.attr.x1)*i,height:Math.abs(t.attr.y2-t.attr.y1)*n},a&&a.rotate?t.BBoxHit=yt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},Wt.prototype.execute=function(){var t=this.ctx;t.beginPath(),t.moveTo(this.attr.x1,this.attr.y1),t.lineTo(this.attr.x2,this.attr.y2),this.applyStyles(),t.closePath()},Wt.prototype.in=function(t){return parseFloat(yt.getDistance({x:this.attr.x1,y:this.attr.y1},t)+yt.getDistance(t,{x:this.attr.x2,y:this.attr.y2})).toFixed(1)===parseFloat(yt.getDistance({x:this.attr.x1,y:this.attr.y1},{x:this.attr.x2,y:this.attr.y2})).toFixed(1)};var Xt=function(t,e,r){var i=this;return i.ctx=t,i.angle=0,i.nodeName="path",i.attr=e,i.style=r,i.attr.d&&(h.isTypePath(i.attr.d)?(i.path=i.attr.d,i.attr.d=i.attr.d.fetchPathString()):i.path=dt.Path(i.attr.d),i.pathNode=new Path2D(i.attr.d)),i.stack=[i],i};Xt.prototype=new q,Xt.prototype.constructor=Xt,Xt.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a&&a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a&&a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}t.BBox=t.path?yt.getBBox(t.path.stack):{x:0,y:0,width:0,height:0},t.BBox.x=e+t.BBox.x*i,t.BBox.y=r+t.BBox.y*n,t.BBox.width*=i,t.BBox.height*=n,a&&a.rotate?t.BBoxHit=yt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},Xt.prototype.setAttr=function(t,e){this.attr[t]=e,"d"===t&&(h.isTypePath(e)?(this.path=e,this.attr.d=e.fetchPathString()):this.path=dt.Path(this.attr.d),this.pathNode=new Path2D(this.attr.d))},Xt.prototype.getPointAtLength=function(t){return this.path?this.path.getPointAtLength(t):{x:0,y:0}},Xt.prototype.getAngleAtLength=function(t){return this.path?this.path.getAngleAtLength(t):0},Xt.prototype.getTotalLength=function(){return this.path?this.path.getTotalLength():0},Xt.prototype.execute=function(){this.attr.d&&(this.style.fillStyle&&this.ctx.fill(this.pathNode),this.style.strokeStyle&&this.ctx.stroke(this.pathNode))},Xt.prototype.applyStyles=function(){},Xt.prototype.in=function(t){var e=!1;return this.attr.d?(this.ctx.save(),this.ctx.scale(1/bt,1/bt),e=this.style.fillStyle?this.ctx.isPointInPath(this.pathNode,t.x,t.y):e,this.ctx.restore(),e):e};var Zt=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="polygon",i.attr=e,i.style=r,i.stack=[i],e.points&&(i.polygon=W(i.attr.points)),this};Zt.prototype=new q,Zt.prototype.constructor=Zt,Zt.prototype.setAttr=function(t,e){this.attr[t]=e,"points"===t&&(this.polygon=W(this.attr[t]))},Zt.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(t.polygon&&t.polygon.points.length>0){var s=t.polygon.points;if(a&&a.translate){var h=o(a.translate,2);e=h[0],r=h[1]}if(a&&a.scale){var c=o(a.scale,2);i=c[0],n=c[1]}for(var l=s[0].x,u=s[0].x,f=s[0].y,p=s[0].y,d=1;d<s.length;d+=1)l>s[d].x&&(l=s[d].x),u<s[d].x&&(u=s[d].x),f>s[d].y&&(f=s[d].y),p<s[d].y&&(p=s[d].y);t.BBox={x:e+l*i,y:r+f*n,width:(u-l)*i,height:(p-f)*n}}else t.BBox={x:0,y:0,width:0,height:0};a&&a.rotate?t.BBoxHit=yt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},Zt.prototype.execute=function(){this.attr.points&&(this.style.fillStyle&&this.ctx.fill(this.polygon.path),this.style.strokeStyle&&this.ctx.stroke(this.polygon.path))},Zt.prototype.applyStyles=function(){},Zt.prototype.in=function(t){var e=!1;return this.attr.points?(this.ctx.save(),this.ctx.scale(1/bt,1/bt),e=this.style.fillStyle?this.ctx.isPointInPath(this.polygon.path,t.x,t.y):e,this.ctx.restore(),e):e};var Qt=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="ellipse",i.attr=e,i.style=r,i.stack=[i],this};Qt.prototype=new q,Qt.prototype.constructor=Qt,Qt.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a&&a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a&&a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}t.BBox={x:e+(t.attr.cx-t.attr.rx)*i,y:r+(t.attr.cy-t.attr.ry)*n,width:2*t.attr.rx*i,height:2*t.attr.ry*n},a&&a.rotate?t.BBoxHit=yt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},Qt.prototype.execute=function(){var t=this.ctx;t.beginPath(),t.moveTo(this.attr.cx,this.attr.cy-this.attr.ry),t.bezierCurveTo(this.attr.cx+this.attr.rx,this.attr.cy-this.attr.ry,this.attr.cx+this.attr.rx,this.attr.cy+this.attr.ry,this.attr.cx,this.attr.cy+this.attr.ry),t.bezierCurveTo(this.attr.cx-this.attr.rx,this.attr.cy+this.attr.ry,this.attr.cx-this.attr.rx,this.attr.cy-this.attr.ry,this.attr.cx,this.attr.cy-this.attr.ry),this.applyStyles(),t.closePath()},Qt.prototype.in=function(t){var e=this.attr,r=e.cx,i=e.cy,n=e.rx,o=e.ry;return(t.x-r)*(t.x-r)/(n*n)+(t.y-i)*(t.y-i)/(o*o)<=1};var $t=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="rect",i.attr=e,i.style=r,i.stack=[i],this};$t.prototype=new q,$t.prototype.constructor=$t,$t.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a&&a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a&&a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}t.BBox={x:e+t.attr.x*i,y:r+t.attr.y*n,width:t.attr.width*i,height:t.attr.height*n},a&&a.rotate?t.BBoxHit=yt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},$t.prototype.applyStyles=function(){},$t.prototype.execute=function(){var t=this.ctx;this.style.fillStyle&&t.fillRect(this.attr.x,this.attr.y,this.attr.width,this.attr.height),this.style.strokeStyle&&t.strokeRect(this.attr.x,this.attr.y,this.attr.width,this.attr.height)},$t.prototype.in=function(t){var e=this.attr,r=e.x,i=e.y,n=e.width,o=e.height;return t.x>=r&&t.x<=r+n&&t.y>=i&&t.y<=i+o};var Kt=function(t,e,r){var i=this;return i.nodeName="group",i.ctx=t,i.attr=e,i.style=r,i.stack=new Array(0),this};Kt.prototype=new q,Kt.prototype.constructor=Kt,Kt.prototype.updateBBox=function(t){var e=this,r=void 0,i=void 0,n=void 0,o=void 0,a=0,s=0,h=1,c=1,l=e.attr.transform;if(e.BBox={},l&&l.translate&&(a=void 0!==l.translate[0]?l.translate[0]:0,s=void 0!==l.translate[1]?l.translate[1]:a),l&&e.attr.transform.scale&&"rootNode"!==e.attr.id&&(h=void 0!==l.scale[0]?l.scale[0]:1,c=void 0!==l.scale[1]?l.scale[1]:h),t&&t.length>0)for(var u=void 0,f=void 0,p=void 0,d=0;d<t.length;d+=1)u=t[d],f=u.dom.BBoxHit.x,p=u.dom.BBoxHit.y,r=void 0===r?f:r>f?f:r,n=void 0===n?p:n>p?p:n,i=void 0===i?f+u.dom.BBoxHit.width:i<f+u.dom.BBoxHit.width?f+u.dom.BBoxHit.width:i,o=void 0===o?p+u.dom.BBoxHit.height:o<p+u.dom.BBoxHit.height?p+u.dom.BBoxHit.height:o;r=void 0===r?0:r,n=void 0===n?0:n,i=void 0===i?0:i,o=void 0===o?0:o,e.BBox.x=a+r*h,e.BBox.y=s+n*c,e.BBox.width=Math.abs(i-r)*h,e.BBox.height=Math.abs(o-n)*c,e.attr.transform&&e.attr.transform.rotate?e.BBoxHit=yt.rotateBBox(this.BBox,this.attr.transform):e.BBoxHit=this.BBox},Kt.prototype.child=function(t){var e=this,r=t;r instanceof Jt?(r.dom.parent=e,e.stack[e.stack.length]=r):r instanceof X?r.stack.forEach(function(t){t.dom.parent=e,e.stack[e.stack.length]=t}):console.log("wrong Object")},Kt.prototype.in=function(t){var e=this,r={x:t.x,y:t.y},i=this.BBox,n=e.attr.transform,a=0,s=0,h=1,c=1;if(n&&n.translate){var l=o(n.translate,2);a=l[0],s=l[1]}return n&&n.scale&&(h=void 0!==n.scale[0]?n.scale[0]:1,c=void 0!==n.scale[1]?n.scale[1]:h),r.x>=(i.x-a)/h&&r.x<=(i.x-a+i.width)/h&&r.y>=(i.y-s)/c&&r.y<=(i.y-s+i.height)/c};var Jt=function(t,e,r,i){switch(this.style=e.style?e.style:{},this.attr=e.attr?e.attr:{},this.id=r,this.nodeName=e.el,this.nodeType="CANVAS",this.children=[],this.ctx=t,this.vDomIndex=i,this.bbox=void 0===e.bbox||e.bbox,e.el){case"circle":this.dom=new Vt(this.ctx,this.attr,this.style);break;case"rect":this.dom=new $t(this.ctx,this.attr,this.style);break;case"line":this.dom=new Wt(this.ctx,this.attr,this.style);break;case"path":this.dom=new Xt(this.ctx,this.attr,this.style);break;case"group":this.dom=new Kt(this.ctx,this.attr,this.style);break;case"text":this.dom=new V(this.ctx,this.attr,this.style);break;case"image":this.dom=new H(this.ctx,this.attr,this.style,e.onload,e.onerror,this);break;case"polygon":this.dom=new Zt(this.ctx,this.attr,this.style,this);break;case"ellipse":this.dom=new Qt(this.ctx,this.attr,this.style,this);break;default:this.dom=null}this.dom.nodeExe=this,this.BBoxUpdate=!0};Jt.prototype.node=function(){return this.updateBBox(),this.dom},Jt.prototype.stylesExe=function(){for(var t=Object.keys(this.style),e=void 0,r=0,i=t.length;r<i;r+=1)"function"==typeof this.style[t[r]]||this.style[t[r]]instanceof _?"function"==typeof this.style[t[r]]?(this.style[t[r]]=this.style[t[r]].call(this,this.dataObj),e=this.style[t[r]]):this.style[t[r]]instanceof _?e=this.style[t[r]].exe(this.ctx,this.dom.BBox):console.log("unkonwn Style"):e=this.style[t[r]],"function"!=typeof this.ctx[t[r]]?this.ctx[t[r]]=e:"function"==typeof this.ctx[t[r]]?this.ctx[t[r]](e):console.log("junk comp")},Jt.prototype.remove=function(){var t=this.dom.parent.children,e=t.indexOf(this);-1!==e&&t.splice(e,1),this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex)},Jt.prototype.attributesExe=function(){this.dom.render(this.attr)},Jt.prototype.setStyle=function(t,e){if(2===arguments.length)this.style[t]=e,this.dom.setStyle(t,e);else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r=Object.keys(t),i=0,n=r.length;i<n;i+=1)this.style[r[i]]=t[r[i]],this.dom.setStyle(r[i],t[r[i]]);return gt.vDomChanged(this.vDomIndex),this},Jt.prototype.setAttr=function(t,e){if(2===arguments.length)this.attr[t]=e,this.dom.setAttr(t,e);else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r=Object.keys(t),i=0;i<r.length;i+=1)this.attr[r[i]]=t[r[i]],this.dom.setAttr(r[i],t[r[i]]);return this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex),this},Jt.prototype.getAttr=function(t){return this.attr[t]},Jt.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex),this},Jt.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),t.length<1?null:(this.attr.transform.scale=[t[0],t[1]?t[1]:t[0]],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex),this)},Jt.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex),this},Jt.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewX=[t],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex),this},Jt.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewY=[t],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex),this},Jt.prototype.execute=function(){if(this.ctx.save(),this.stylesExe(),this.attributesExe(),this.dom instanceof Kt)for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();this.ctx.restore()},Jt.prototype.child=function(t){var e=this,r=t;if(e.dom instanceof Kt)for(var i=0;i<r.length;i+=1)r[i].dom.parent=e,e.children[e.children.length]=r[i];else console.log("Error");return this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex),e},Jt.prototype.fetchEl=y,Jt.prototype.fetchEls=d,Jt.prototype.updateBBox=function(){for(var t=void 0,e=0,r=this.children.length;e<r;e+=1)this.bbox&&(t=this.children[e].updateBBox()||t);return!(!this.bbox||!this.BBoxUpdate&&!t)&&(this.dom.updateBBox(this.children),this.BBoxUpdate=!1,!0)},Jt.prototype.in=function(t){return this.dom.in(t)},Jt.prototype.on=function(t,e){return this.dom.on(t,e),this},Jt.prototype.exec=function(t){return"function"!=typeof t&&console.Error("Wrong Exe type"),t.call(this,this.dataObj),this},Jt.prototype.animateTo=Dt,Jt.prototype.animateExe=Ct,Jt.prototype.animatePathTo=It,Jt.prototype.morphTo=jt,Jt.prototype.vDomIndex=null,Jt.prototype.join=E,Jt.prototype.createRadialGradient=R,Jt.prototype.createLinearGradient=F,Jt.prototype.createPattern=Y,Jt.prototype.createEls=function(t,e){var r=new X({type:"CANVAS",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(r.stack),gt.vDomChanged(this.vDomIndex),r},Jt.prototype.text=function(t){return this.dom instanceof V&&this.dom.text(t),gt.vDomChanged(this.vDomIndex),this},Jt.prototype.createEl=function(t){var e=new Jt(this.dom.ctx,t,u(),this.vDomIndex);return this.child([e]),gt.vDomChanged(this.vDomIndex),e},Jt.prototype.removeChild=function(t){var e=-1;if(this.children.forEach(function(r,i){r===t&&(e=i)}),-1!==e){var r=this.children.splice(e,1)[0];this.dom.removeChild(r.dom)}gt.vDomChanged(this.vDomIndex)},X.prototype={createEls:v,createEl:g,forEach:m,setAttr:b,fetchEls:p,setStyle:w,translate:A,rotate:B,scale:S,animateTo:Et,animateExe:Ot,animatePathTo:Lt,remove:T,text:Pt,join:x,on:k},X.prototype.wrapper=function(t){var e=this;if(t)for(var r=0,i=t.length;r<i;r++){var n=t[r];n instanceof zt||n instanceof Jt||n instanceof pt||n instanceof X?e.stack.push(n):e.stack.push(new zt(n,{},u()))}return this};var te={dragStart:function(t){return"function"==typeof t&&(this.onDragStart=t),this},drag:function(t){return"function"==typeof t&&(this.onDrag=t),this},dragEnd:function(t){return"function"==typeof t&&(this.onDragEnd=t),this}};return dt.dragEvent=function(){return Object.create(te)},dt.CanvasLayer=function(t){function e(){var t=i.width?i.width:this.container.clientWidth,e=i.height?i.height:this.container.clientHeight;if(this.domEl.setAttribute("height",e*o),this.domEl.setAttribute("width",t*o),this.domEl.style.height=e+"px",this.domEl.style.width=t+"px",this.height=e,this.width=t,i.rescale){var r=t/this.width,n=e/this.height;this.scale([r,n])}else this.execute()}function r(){g.resize()}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=void 0,s=void 0,h=document.querySelector(t),c=i.height?i.height:h.clientHeight,l=i.width?i.width:h.clientWidth,f=document.createElement("canvas"),p=f.getContext("2d");bt=Z(p),o=bt;var d="clear"!==i.onClear&&i.onClear?i.onClear:function(t){t.clearRect(0,0,l*bt,c*bt)};f.setAttribute("height",c*bt),f.setAttribute("width",l*bt),f.style.height=c+"px",f.style.width=l+"px",f.style.position="absolute",h.appendChild(f);var y=new n,x=gt.addVdom(y),g=new Jt(p,{el:"group",attr:{id:"rootNode"}},u(),x),v=g.execute.bind(g);return g.container=h,g.domEl=f,g.height=c,g.width=l,g.type="CANVAS",g.execute=function(){d(p),p.setTransform(bt,0,0,bt,0,0),g.updateBBox(),v()},g.setAttr=function(t,r){if(2===arguments.length)i[t]=r;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var n=Object.keys(t),o=0,s=n.length;o<s;o+=1)i[n[o]]=t[n[o]];e.call(this)},g.resize=e,window.addEventListener("resize",r),g.destroy=function(){window.removeEventListener("resize",r),f.remove(),gt.removeVdom(y)},y.root(g),(i.events||void 0===i.events)&&(h.addEventListener("mousemove",function(t){if(t.preventDefault(),s&&s.dom.drag&&s.dom.drag.dragStartFlag&&s.dom.drag.onDrag){var e=s.dom.drag.event;s.dom.drag.event&&(e.dx=t.offsetX-e.x,e.dy=t.offsetY-e.y),e.x=t.offsetX,e.y=t.offsetY,s.dom.drag.event=e,s.dom.drag.onDrag.call(s,s.dataObj,e)}else{var r=y.eventsCheck([g],{x:t.offsetX,y:t.offsetY});if(s&&r!==s&&((s.dom.mouseout||s.dom.mouseleave)&&s.hovered&&(s.dom.mouseout&&s.dom.mouseout.call(s,s.dataObj,t),s.dom.mouseleave&&s.dom.mouseleave.call(s,s.dataObj,t)),s.hovered=!1,s.dom.drag&&s.dom.drag.dragStartFlag&&(s.dom.drag.dragStartFlag=!1,s.dom.drag.onDragEnd.call(s,s.dataObj,t),s.dom.drag.event=null)),s&&r===s&&s.dom.drag&&s.dom.drag.dragStartFlag&&s.dom.drag.onDrag){var i=s.dom.drag.event;s.dom.drag.event&&(i.dx=t.offsetX-i.x,i.dy=t.offsetY-i.y),i.x=t.offsetX,i.y=t.offsetY,s.dom.drag.event=i,s.dom.drag.onDrag.call(s,s.dataObj,i)}r?(s=r,!s.dom.mouseover&&!s.dom.mouseenter||s.hovered||(s.dom.mouseover&&s.dom.mouseover.call(s,s.dataObj,t),s.dom.mouseenter&&s.dom.mouseenter.call(s,s.dataObj,t),s.hovered=!0),s.dom.mousemove&&s.dom.mousemove.call(s,s.dataObj,t)):s=void 0}}),h.addEventListener("click",function(t){console.log("click"),t.preventDefault(),s&&s.dom.click&&s.dom.click.call(s,s.dataObj,t)}),h.addEventListener("dblclick",function(t){s&&s.dom.dblclick&&s.dom.dblclick.call(s,s.dataObj,t)}),h.addEventListener("mousedown",function(t){if(console.log("down"),t.preventDefault(),s&&s.dom.mousedown&&(s.dom.mousedown.call(s,s.dataObj,t),s.down=!0),s&&s.dom.drag&&s.dom.drag.onDragStart){s.dom.drag.dragStartFlag=!0,s.dom.drag.onDragStart.call(s,s.dataObj,t);var e={};e.x=t.offsetX,e.y=t.offsetY,e.dx=0,e.dy=0,s.dom.drag.event=e}}),h.addEventListener("mouseup",function(t){t.preventDefault(),s&&s.dom.mouseup&&s.down&&(s.dom.mouseup.call(s,s.dataObj),s.down=!1),s&&s.dom.drag&&s.dom.drag.dragStartFlag&&s.dom.drag.onDragEnd&&(s.dom.drag.dragStartFlag=!1,s.dom.drag.event=null,s.dom.drag.onDragEnd.call(s,s.dataObj,t))}),h.addEventListener("mouseleave",function(t){t.preventDefault(),s&&s.dom.mouseleave&&s.dom.mouseleave.call(s,s.dataObj,t),s&&s.dom.onDragEnd&&s.dom.drag.dragStartFlag&&(s.dom.drag.dragStartFlag=!1,s.dom.drag.event=null,s.dom.drag.onDragEnd.call(s,s.dataObj,t))}),h.addEventListener("contextmenu",function(t){t.preventDefault(),s&&s.dom.contextmenu&&s.dom.contextmenu.call(s,s.dataObj)})),gt.execute(),g},dt.SVGLayer=function(t){function e(){var t=i.width?i.width:this.container.clientWidth,e=i.height?i.height:this.container.clientHeight,r=t/this.width,n=e/this.height;i&&i.rescale&&this.scale([r,n]),this.dom.setAttribute("height",e),this.dom.setAttribute("width",t)}function r(){"function"==typeof i.resize&&i.resize.call(p),e.call(p)}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new n,s=gt.addVdom(o),h=document.querySelector(t),c=i.height?i.height:h.clientHeight,l=i.width?i.width:h.clientWidth,f=document.createElementNS(Rt.svg,"svg");f.setAttribute("height",c),f.setAttribute("width",l),f.style.position="absolute",h.appendChild(f);var p=new zt(f,{},u(),s);return p.container=h,p.type="SVG",p.width=l,p.height=c,o.root(p),p.setAttr=function(t,r){if(2===arguments.length)i[t]=r;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var n=Object.keys(t),o=0,s=n.length;o<s;o+=1)i[n[o]]=t[n[o]];e.call(this)},window.addEventListener("resize",r),p.destroy=function(){window.removeEventListener("resize",r),f.remove(),gt.removeVdom(o)},gt.execute(),p},J.prototype.setAttr=function(t,e){this.attr[t]=e},J.prototype.getAttr=function(t){return this.attr[t]},J.prototype.setStyle=function(t,e){this.attr[t]=e},J.prototype.getStyle=function(t){return this.style[t]},tt.prototype.setAttr=function(t,e){this.attr[t]=e},tt.prototype.getAttr=function(t){return this.attr[t]},tt.prototype.setStyle=function(t,e){this.style[t]=e},tt.prototype.getStyle=function(t){return this.style[t]},et.prototype.setAttr=function(t,e){this.attr[t]=e},et.prototype.getAttr=function(t){return this.attr[t]},et.prototype.setStyle=function(t,e){this.style[t]=e},et.prototype.getStyle=function(t){return this.style[t]},rt.prototype.setAttr=function(t,e){this.attr[t]=e},rt.prototype.getAttr=function(t){return this.attr[t]},rt.prototype.setStyle=function(t,e){this.style[t]=e},rt.prototype.getStyle=function(t){return this.style[t]},it.prototype.setAttr=function(t,e){"points"===t&&(this.attr.triangulatedPoints=l(e.reduce(function(t,e){return t.push(e.x),t.push(e.y),t},[])).map(function(t){return e[t]}))},it.prototype.getAttr=function(t){return this.attr[t]},it.prototype.getStyle=function(t){return this.style[t]},nt.prototype.setAttr=function(t,e){this.attr[t]=e},nt.prototype.getAttr=function(t){return this.attr[t]},nt.prototype.getStyle=function(t){return this.style[t]},at.prototype.writeDataToShaderAttributes=ot,at.prototype.execute=function(t){for(var e=[],r=[],i=[],n=0,o=t.length;n<o;n++){var a=t[n].getStyle("fill");a=a||{r:0,g:0,b:0,a:255},e[2*n]=t[n].getAttr("x"),e[2*n+1]=t[n].getAttr("y"),r[4*n]=a.r,r[4*n+1]=a.g,r[4*n+2]=a.b,r[4*n+3]=a.a||255,i[n]=t[n].getAttr("size")||1}this.writeDataToShaderAttributes([{data:new Uint8Array(r),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{data:new Float32Array(i),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.sizeBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.FLOAT,size:1,attribute:this.sizeAttributeLocation},{data:new Float32Array(e),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}]),this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawArrays(this.ctx.POINTS,0,e.length/2)},st.prototype.writeDataToShaderAttributes=ot,st.prototype.execute=function(t){for(var e=[],r=[],i=0,n=t.length;i<n;i++){var o=t[i].getStyle("fill")||{r:0,g:0,b:0,a:255},a=t[i].getAttr("x"),s=t[i].getAttr("y"),h=t[i].getAttr("width"),c=t[i].getAttr("height"),l=a,u=a+h,f=s,p=s+c,d=o.r,y=o.g,x=o.b,g=o.a||255;e[12*i]=l,e[12*i+1]=f,e[12*i+2]=u,e[12*i+3]=f,e[12*i+4]=l,e[12*i+5]=p,e[12*i+6]=l,e[12*i+7]=p,e[12*i+8]=u,e[12*i+9]=f,e[12*i+10]=u,e[12*i+11]=p,r[24*i]=d,r[24*i+1]=y,r[24*i+2]=x,r[24*i+3]=g,r[24*i+4]=d,r[24*i+5]=y,r[24*i+6]=x,r[24*i+7]=g,r[24*i+8]=d,r[24*i+9]=y,r[24*i+10]=x,r[24*i+11]=g,r[24*i+12]=d,r[24*i+13]=y,r[24*i+14]=x,r[24*i+15]=g,r[24*i+16]=d,r[24*i+17]=y,r[24*i+18]=x,r[24*i+19]=g,r[24*i+20]=d,r[24*i+21]=y,r[24*i+22]=x,r[24*i+23]=g}this.writeDataToShaderAttributes([{data:new Uint8Array(r),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{data:new Float32Array(e),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}]),this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawArrays(this.ctx.TRIANGLES,0,e.length/2)},ht.prototype.writeDataToShaderAttributes=ot,ht.prototype.execute=function(t){for(var e=[],r=[],i=0,n=t.length;i<n;i++){var o=t[i].getStyle("stroke"),a=t[i].getAttr("x1"),s=t[i].getAttr("y1"),h=t[i].getAttr("x2"),c=t[i].getAttr("y2");e[4*i]=a,e[4*i+1]=s,e[4*i+2]=h,e[4*i+3]=c,o=o||{r:0,g:0,b:0,a:255};var l=o.r,u=o.g,f=o.b,p=o.a||255;r[8*i]=l,r[8*i+1]=u,r[8*i+2]=f,r[8*i+3]=p,r[8*i+4]=l,r[8*i+5]=u,r[8*i+6]=f,r[8*i+7]=p}this.writeDataToShaderAttributes([{data:new Uint8Array(r),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{data:new Float32Array(e),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}]),this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawArrays(this.ctx.LINES,0,e.length/2)},ct.prototype.writeDataToShaderAttributes=ot,ct.prototype.execute=function(t){this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width,this.ctx.canvas.height);for(var e=0,r=t.length;e<r;e++){var i=t[e],n=i.getStyle("stroke");n=n||{r:0,g:0,b:0,a:255};for(var o=i.getAttr("points"),a=[],s=[],h=n.r||0,c=n.g||0,l=n.b||0,u=n.a||255,f=0,p=o.length;f<p;f++)a[2*f]=o[f].x,a[2*f+1]=o[f].y,s[4*f]=h,s[4*f+1]=c,s[4*f+2]=l,s[4*f+3]=u;this.writeDataToShaderAttributes([{data:new Uint8Array(s),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{data:new Float32Array(a),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}]),this.ctx.drawArrays(this.ctx.LINE_STRIP,0,a.length/2)}},lt.prototype.writeDataToShaderAttributes=ot,lt.prototype.execute=function(t){this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width,this.ctx.canvas.height);for(var e=0,r=t.length;e<r;e++){var i=t[e],n=i.getStyle("fill");n=n||{r:0,g:0,b:0,a:255};for(var o=i.getAttr("triangulatedPoints"),a=[],s=[],h=n.r||0,c=n.g||0,l=n.b||0,u=n.a||255,f=0,p=o.length;f<p;f++)a[2*f]=o[f].x,a[2*f+1]=o[f].y,s[4*f]=h,s[4*f+1]=c,s[4*f+2]=l,s[4*f+3]=u;this.writeDataToShaderAttributes([{data:new Uint8Array(s),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{data:new Float32Array(a),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}]),this.ctx.drawArrays(this.ctx.TRIANGLES,0,a.length/2)}},ut.prototype.writeDataToShaderAttributes=ot,ut.prototype.execute=function(t){this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width,this.ctx.canvas.height);for(var e=[],r=[],i=[],n=0,o=t.length;n<o;n++){var a=t[n],s=a.getStyle("fill");s=s||{r:0,g:0,b:0,a:255},e[2*n]=a.getAttr("cx"),e[2*n+1]=a.getAttr("cy"),i[n]=a.getAttr("r"),r[4*n]=s.r,r[4*n+1]=s.g,r[4*n+2]=s.b,r[4*n+3]=s.a||255}this.writeDataToShaderAttributes([{data:new Uint8Array(r),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{data:new Float32Array(i),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.radiusBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.FLOAT,size:1,attribute:this.radiusAttributeLocation},{data:new Float32Array(e),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}]),this.ctx.drawArrays(this.ctx.POINTS,0,e.length/2)},ft.prototype.execute=function(t){this.shader.execute(t)},pt.prototype.setAttr=function(t,e){if(2===arguments.length)this.attr[t]=e,this.dom.setAttr(t,e);else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r=Object.keys(t),i=0;i<r.length;i+=1)this.attr[r[i]]=t[r[i]],this.dom.setAttr(r[i],t[r[i]]);return gt.vDomChanged(this.vDomIndex),this},pt.prototype.setStyle=function(t,e){if(2===arguments.length)this.style[t]=e;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r=Object.keys(t),i=0;i<r.length;i+=1)this.style[r[i]]=t[r[i]];return gt.vDomChanged(this.vDomIndex),this},pt.prototype.getAttr=function(t){return this.dom.getAttr(t)},pt.prototype.getStyle=function(t){return this.dom.getStyle(t)},pt.prototype.animateTo=Dt,pt.prototype.animateExe=Ct,pt.prototype.execute=function(){if(!this.dom.shader&&this.dom instanceof ft)for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();else this.dom.shader&&this.dom instanceof ft&&this.dom.execute(this.children)},pt.prototype.child=function(t){var e=this,r=t;if(e.dom instanceof ft)for(var i=0;i<r.length;i+=1)r[i].dom.parent=e,e.children[e.children.length]=r[i];else console.log("Error");return this.BBoxUpdate=!0,gt.vDomChanged(this.vDomIndex),e},pt.prototype.fetchEl=y,pt.prototype.fetchEls=d,pt.prototype.join=E,pt.prototype.createEls=function(t,e){var r=new X({type:"WEBGL",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(r.stack),gt.vDomChanged(this.vDomIndex),r},pt.prototype.createEl=function(t){var e=new pt(this.ctx,t,u(),this.vDomIndex);return this.child([e]),gt.vDomChanged(this.vDomIndex),e},pt.prototype.removeChild=function(t){var e=-1;if(this.children.forEach(function(r,i){r===t&&(e=i)}),-1!==e){var r=this.children.splice(e,1)[0];this.dom.removeChild(r.dom)}gt.vDomChanged(this.vDomIndex)},dt.WebglLayer=function(t,e){var r=document.querySelector(t),i=e.height?e.height:r.clientHeight,o=e.width?e.width:r.clientWidth,a=document.createElement("canvas"),s=a.getContext("webgl",{premultipliedAlpha:!1,depth:!1,antialias:!0,alpha:!0});a.height=i,a.width=o,a.style.height=i+"px",a.style.width=o+"px",a.style.position="absolute",r.appendChild(a);var h=new n,c=gt.addVdom(h),l=new pt(s,{el:"group",attr:{id:"rootNode"}},u(),c),f=l.execute.bind(l);return l.container=r,l.domEl=a,l.height=i,l.width=o,l.type="WEBGL",s.clearColor(0,0,0,0),l.execute=function(){this.ctx.viewport(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT),f()},l.destroy=function(){gt.removeVdom(h)},h.root(l),e.resize&&window.addEventListener("resize",function(){l.resize()}),gt.execute(),l},dt.Path=h.instance,dt.queue=gt,dt.geometry=yt,dt.chain=i,dt})}).call(e,r(1)(t))}])});