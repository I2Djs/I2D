!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("i2d",[],e):"object"==typeof exports?exports.i2d=e():t.i2d=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,r){"use strict";(function(t){var i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,a){"object"===n(t)&&t.exports?t.exports=a():void 0!==(i=function(){return a()}.call(e,r,e,t))&&(t.exports=i)}(0,function(){function t(t){function e(t,e){var r=1;if(0===e)return r;for(var i=1;i<=e;i+=1)r*=t;return r}function r(t,e){return Math.atan2(t,e)}function i(t){return Math.sqrt(t)}function n(t,e,r){var i={},n={};i.x=t.x+r.x-2*e.x,i.y=t.y+r.y-2*e.y,n.x=2*e.x-2*t.x,n.y=2*e.y-2*t.y;var o=4*(i.x*i.x+i.y*i.y),a=4*(i.x*n.x+i.y*n.y),s=n.x*n.x+n.y*n.y,h=2*Math.sqrt(o+a+s),c=Math.sqrt(o),l=2*o*c,u=2*Math.sqrt(s),f=a/c,p=(2*c+f+h)/(f+u);return p=isNaN(p)||Math.abs(p)===1/0?1:p,(l*h+c*a*(h-u)+(4*s*o-a*a)*Math.log(p))/(4*l)}function o(t,r){for(var n=0,o=f.bind(null,t,r),a=void 0,s=void 0,h=0;h<=1;h+=.001)a=o(h),s=o(h+.001),n+=.001*i(e((s.x-a.x)/.001,2)+e((s.y-a.y)/.001,2));return n}function a(t,r){var n=0;for(var o in t)n+=e(r[o]-t[o],2);if(isNaN(n))throw new Error("error");return i(n)}function s(t,e){return r(e.x-t.x,e.y-t.y)}function h(t,e){var r={};for(var i in t)r[i]=t[i]*e;return r}function c(t,e,r){var i=(t.y-e.y)/(t.x-e.x),n=t.x*r;return{x:n,y:(i*(n-e.x)+e.y)*r}}function l(t){var e=3*(t.cntrl1.x-t.p0.x),r=3*(t.cntrl2.x-t.cntrl1.x)-e,i=t.p1.x-t.p0.x-e-r,n=3*(t.cntrl1.y-t.p0.y),o=3*(t.cntrl2.y-t.cntrl1.y)-n;return{cx:e,bx:r,ax:i,cy:n,by:o,ay:t.p1.y-t.p0.y-n-o}}function u(t){if(t.length){for(var e=t,r=[],i=0;i<e.length;i+=1)if(-1!==["M","C","S","Q"].indexOf(e[i].type))r.push(e[i]);else if(-1!==["V","H","L","Z"].indexOf(e[i].type)){var n={x:(e[i].p0.x+e[i].p1.x)/2,y:(e[i].p0.y+e[i].p1.y)/2};r.push({p0:e[i].p0,cntrl1:n,cntrl2:n,p1:e[i].p1,type:"C",length:e[i].length})}else console.log("wrong cmd type");return r}}function f(t,r,i){var n=e(i,3),o=e(i,2);return{x:r.ax*n+r.bx*o+r.cx*i+t.x,y:r.ay*n+r.by*o+r.cy*i+t.y}}function p(t,e,r,i){return{x:(t.x-2*e.x+r.x)*i*i+(2*e.x-2*t.x)*i+t.x,y:(t.y-2*e.y+r.y)*i*i+(2*e.y-2*t.y)*i+t.y}}function d(t,e,r){return{x:t.x+(e.x-t.x)*r,y:t.y+(e.y-t.y)*r}}function y(t,e,r){return t+(e-t)*r}function x(t){for(var e=1/0,r=1/0,i=-1/0,n=-1/0,o=void 0,a=void 0,s=0;s<t.length;s+=1)if(o=t[s],-1!==["V","H","L","v","h","l"].indexOf(o.type))[o.p0?o.p0:t[s-1].p1,o.p1].forEach(function(t){t.x<e&&(e=t.x),t.x>i&&(i=t.x),t.y<r&&(r=t.y),t.y>n&&(n=t.y)});else if(-1!==["Q","C","q","c"].indexOf(o.type))for(var h=l(o),c=f.bind(null,o.p0,h),u=0,p=void 0;u<1;)p=c(u),u+=.05,p.x<e&&(e=p.x),p.x>i&&(i=p.x),p.y<r&&(r=p.y),p.y>n&&(n=p.y);else a=o.p0,a.x<e&&(e=a.x),a.x>i&&(i=a.x),a.y<r&&(r=a.y),a.y>n&&(n=a.y);return{x:e,y:r,width:i-e,height:n-r}}function g(t,e,r,i){var n={},o=t.x,a=t.y,s=e.x,h=e.y,c=Math.PI/180*r,l=Math.cos(-c),u=Math.sin(-c);return n.x=l*(o-s)+u*(a-h)+s,n.y=l*(a-h)-u*(o-s)+h,{x:l*(o-s)+u*(a-h)+s,y:l*(a-h)-u*(o-s)+h}}function m(t,e){var r={x:t.x,y:t.y},i={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},o={x:t.x+t.width,y:t.y+t.height},s=e.translate,h=e.rotate,c={x:h[1]||0,y:h[2]||0},l=h[0];s&&s.length>0&&(c.x+=s[0],c.y+=s[1]),r=g(r,c,l,a(r,c)),i=g(i,c,l,a(i,c)),n=g(n,c,l,a(n,c)),o=g(o,c,l,a(o,c));var u=[r.x,i.x,n.x,o.x].sort(function(t,e){return t-e}),f=[r.y,i.y,n.y,o.y].sort(function(t,e){return t-e});return{x:u[0],y:f[0],width:u[3]-u[0],height:f[3]-f[0]}}function v(){}var b=function(){function t(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),A=2*Math.PI,w=function(t,e,r,i,n,o,a){var s=t.x,h=t.y;return s*=e,h*=r,{x:i*s-n*h+o,y:n*s+i*h+a}},B=function(t,e){var r=4/3*Math.tan(e/4),i=Math.cos(t),n=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:i-n*r,y:n+i*r},{x:o+a*r,y:a-o*r},{x:o,y:a}]},S=function(t,e,r,i){var n=t*i-e*r<0?-1:1,o=Math.sqrt(t*t+e*e),a=Math.sqrt(t*t+e*e),s=t*r+e*i,h=s/(o*a);return h>1&&(h=1),h<-1&&(h=-1),n*Math.acos(h)},T=function(t,r,i,n,o,a,s,h,c,l,u,f){var p=e(o,2),d=e(a,2),y=e(u,2),x=e(f,2),g=p*d-p*x-d*y;g<0&&(g=0),g/=p*x+d*y,g=Math.sqrt(g)*(s===h?-1:1);var m=g*o/a*f,v=g*-a/o*u,b=l*m-c*v+(t+i)/2,w=c*m+l*v+(r+n)/2,B=(u-m)/o,T=(f-v)/a,k=(-u-m)/o,L=(-f-v)/a,E=S(1,0,B,T),C=S(B,T,k,L);return 0===h&&C>0&&(C-=A),1===h&&C<0&&(C+=A),[b,w,E,C]},k=function(t){var r=t.px,i=t.py,n=t.cx,o=t.cy,a=t.rx,s=t.ry,h=t.xAxisRotation,c=void 0===h?0:h,l=t.largeArcFlag,u=void 0===l?0:l,f=t.sweepFlag,p=void 0===f?0:f,d=[];if(0===a||0===s)return[];var y=Math.sin(c*A/360),x=Math.cos(c*A/360),g=x*(r-n)/2+y*(i-o)/2,m=-y*(r-n)/2+x*(i-o)/2;if(0===g&&0===m)return[];a=Math.abs(a),s=Math.abs(s);var v=e(g,2)/e(a,2)+e(m,2)/e(s,2);v>1&&(a*=Math.sqrt(v),s*=Math.sqrt(v));var S=T(r,i,n,o,a,s,u,p,y,x,g,m),k=b(S,4),L=k[0],E=k[1],C=k[2],D=k[3],_=Math.max(Math.ceil(Math.abs(D)/(A/4)),1);D/=_;for(var O=0;O<_;O++)d.push(B(C,D)),C+=D;return d.map(function(t){var e=w(t[0],a,s,x,y,L,E),r=e.x,i=e.y,n=w(t[1],a,s,x,y,L,E),o=n.x,h=n.y,c=w(t[2],a,s,x,y,L,E);return{x1:r,y1:i,x2:o,y2:h,x:c.x,y:c.y}})};return v.prototype={pow:e,getAngle:s,getDistance:a,scaleAlongOrigin:h,scaleAlongPoint:c,linearTransitionBetweenPoints:d,bezierTransition:p,bezierLength:n,cubicBezierTransition:f,cubicBezierLength:o,cubicBezierCoefficients:l,arcToBezier:k,intermediateValue:y,getBBox:x,toCubicCurves:u,rotatePoint:g,rotateBBox:m},function(){return new v}()}return t})}).call(e,r(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";var i,n;"function"==typeof Symbol&&Symbol.iterator;!function(r,o){i=[],void 0!==(n=function(){return o()}.apply(e,i))&&(t.exports=n)}(0,function(){function t(t,e,r){this.executable=e,this.duration=e.duration?e.duration:0,this.delay=e.delay?e.delay:0,this.lastTime=0-(e.delay?e.delay:0),this.loopTracker=0,this.loop=e.loop?e.loop:0,this.direction=e.direction,this.easying=r,this.end=e.end?e.end:null,"reverse"===this.direction?this.factor=1:this.factor=0}function e(t){return this.endExe=t,this}function r(t){if("function"!=typeof t)throw new Error("Wrong input");g.push(t),g.length>0&&!x&&this.startAnimeFrames()}function i(t){if("function"!=typeof t)throw new Error("Wrong input");var e=g.indexOf(t);-1!==e&&g.splice(e,1)}function n(e,r,i){var n=new t(e,r,i);n.currTime=performance.now(),d[d.length]=n}function o(){x||(x=window.requestAnimationFrame(h))}function a(){x&&(window.cancelAnimFrame(x),x=null)}function s(){this.vDoms=[]}function h(){w=[],A=0,v=performance.now();for(var t=0;t<d.length;t+=1)m=d[t],m.lastTime+=v-m.currTime,m.currTime=v,m.lastTime<m.duration&&m.lastTime>=0?(m.execute(b(m.factor-m.easying(m.lastTime,m.duration))),w[A++]=m):m.lastTime>m.duration?c(m):w[A++]=m;d=w,g.length>0&&l(),u(),x=window.requestAnimationFrame(h)}function c(t){t.loopTracker>=t.loop-1?(t.execute(1-t.factor),t.end&&t.end()):(t.loopTracker+=1,t.lastTime=t.lastTime-t.duration,"alternate"===t.direction?t.factor=1-t.factor:"reverse"===t.direction?t.factor=1:t.factor=0,t.execute(b(t.factor-t.easying(t.lastTime,t.duration))),w[A++]=t)}function l(){for(var t=0;t<g.length;t+=1)g[t](v)}function u(){for(var t=0,e=y.length;t<e;t+=1)y[t].stateModified&&(y[t].execute(),y[t].stateModified=!1)}function f(){return p||(p=new s),p}var p=null,d=[],y=[],x=void 0,g=[];window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)}}(),window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)}}(),t.prototype.execute=function(t){this.executable.run(t)},t.prototype.resetCallBack=function(t){"function"==typeof t&&(this.callBack=t)},s.prototype={startAnimeFrames:o,stopAnimeFrame:a,add:n,end:e,onRequestFrame:r,removeRequestFrameCall:i,destroy:function(){this.endExe&&this.endExe(),this.stopAnimeFrame()}},s.prototype.addVdom=function(t){return y.push(t),y.length-1},s.prototype.removeVdom=function(t){for(var e=0;e<y.length;e++)y[e]===t&&y.splice(e,1)},s.prototype.vDomChanged=function(t){y[t]&&(y[t].stateModified=!0)},s.prototype.execute=function(){x||(x=window.requestAnimationFrame(h))};var m=void 0,v=void 0,b=Math.abs,A=0,w=[];return f})},function(t,e,r){"use strict";(function(t){var i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){"object"===o(t)&&t.exports?t.exports=s(r(0)):(i=[r(0)],void 0!==(n=function(t){return s(t)}.apply(e,i))&&(t.exports=n))}(0,function(t){function e(t,e){return t/e}function r(t,e){var r=t/e;return 1-(1-r)*Math.sin(r*e*.002*Math.PI*2+Math.PI/2)/Math.exp(8*r)}function i(t,e){var r=t/e,i=r/100;return 1-(1-r)*Math.abs(Math.sin(r*e*i*Math.PI*2+Math.PI/2))/Math.exp(10*r)}function n(t,e){var r=t/e;return r*r}function o(t,e){var r=t/e;return r*(2-r)}function a(t,e){var r=t/e;return r<.5?2*r*r:(4-2*r)*r-1}function s(t,e){var r=t/e;return d.pow(r,3)}function h(t,e){var r=t/e;return(r-=1)*r*r+1}function c(t,e){var r=t/e;return r<.5?4*d.pow(r,3):(r-1)*(2*r-2)*(2*r-2)+1}function l(t,e){var r=t/e;return 1-Math.cos(r*Math.PI/2)}function u(t,e){var r=t/e;return Math.cos(r*Math.PI/2)}function f(t,e){var r=t/e;return(1-Math.cos(Math.PI*r))/2}function p(){function t(t){var p=void 0;if("function"==typeof t)return function(e,r){return t(e/r)};switch(t){case"easeOutQuad":p=o;break;case"easeInQuad":p=n;break;case"easeInOutQuad":p=a;break;case"easeInCubic":p=s;break;case"easeOutCubic":p=h;break;case"easeInOutCubic":p=c;break;case"easeInSin":p=l;break;case"easeOutSin":p=u;break;case"easeInOutSin":p=f;break;case"bounce":p=i;break;case"linear":p=e;break;case"elastic":p=r;break;default:p=e}return p}return t}var d=t("2D");return p})}).call(e,r(1)(t))},function(t,e,r){"use strict";(function(t){var i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){"object"===o(t)&&t.exports?t.exports=s(r(3),r(2)):(i=[r(3),r(2)],void 0!==(n=function(t,e){return s(t,e)}.apply(e,i))&&(t.exports=n))}(0,function(t,e){function r(){return x+=1}function i(){return g+=1}function n(t){return this.easying=m(t),this.transition=t,this}function o(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.durationP=t,this}function a(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.loopValue=t,this}function s(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.directionV=t,this}function h(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.data=t,"CANVAS"===this.data.nodeName&&(this.canvasStack=[]),this}function c(t){return"function"!=typeof t?null:(this.callbckExe=t,this)}function l(t){return this.resetV=t,this}function u(t){return this.end=t,this}function f(t){return this.endExe=t,this}function p(){this.start()}function d(){this.queue=e(),this.sequenceQueue=[],this.lengthV=0,this.currPos=0,this.ID=r(),this.loopCounter=0}function y(){this.queue=e(),this.group=[],this.currPos=0,this.ID=r(),this.loopCounter=1}var x=0,g=0,m=t();d.prototype={duration:o,loop:a,callbck:c,bind:h,child:u,ease:n,end:f,commit:p,reset:l,direction:s},d.prototype.add=function(t){var e=this;return Array.isArray(t)||"function"==typeof t||(t=[t]),Array.isArray(t)&&t.map(function(t){return e.lengthV+=t.length?t.length:0,t}),this.sequenceQueue=this.sequenceQueue.concat(t),this},d.prototype.easyingGlobal=function(t,e){return t/e},d.prototype.start=function(){var t=this;if("alternate"===t.directionV)t.factor=t.factor?-1*t.factor:1,t.currPos=t.factor<0?this.sequenceQueue.length-1:0;else if("reverse"===t.directionV){for(var e=0;e<this.sequenceQueue.length;e+=1){var r=this.sequenceQueue[e];r instanceof d||r instanceof y||r.run(1),t.currPos=e}t.factor=-1}else t.currPos=0,t.factor=1;this.execute()},d.prototype.execute=function(){var t=this,e=this.sequenceQueue[t.currPos];if(e="function"==typeof e?e():e)return e instanceof d||e instanceof y?e.end(t.triggerEnd.bind(t,e)).commit():(this.currObj=e,this.queue.add(i(),{run:function(t){e.run(t)},delay:void 0!==e.delay?e.delay:0,duration:void 0!==e.duration?e.duration:t.durationP,loop:e.loop?e.loop:1,direction:t.factor<0?"reverse":"default",end:t.triggerEnd.bind(t,e)},function(t,e){return t/e})),this},d.prototype.triggerEnd=function(t){var e=this;if(e.currPos+=e.factor,t.end&&e.triggerChild(t),e.sequenceQueue.length===e.currPos||e.currPos<0)return e.endExe&&e.endExe(),e.loopCounter+=1,void(e.loopCounter<e.loopValue&&e.start());this.execute()},d.prototype.triggerChild=function(t){t.end instanceof y||t.end instanceof d?setTimeout(function(){t.end.commit()},0):t.end()},y.prototype={duration:o,loop:a,callbck:c,bind:h,child:u,ease:n,end:f,commit:p,direction:s},y.prototype.add=function(t){var e=this;return Array.isArray(t)||(t=[t]),this.group=this.group.concat(t),this.group.forEach(function(t){t.durationP=t.durationP?t.durationP:e.durationP}),this},y.prototype.execute=function(){var t=this;t.currPos=0;for(var e=0,r=t.group.length;e<r;e++)!function(e,r){var n=t.group[e];n instanceof d||n instanceof y?n.end(t.triggerEnd.bind(t,n)).commit():t.queue.add(i(),{run:function(t){n.run(t)},delay:void 0!==n.delay?n.delay:0,duration:void 0!==n.duration?n.duration:t.durationP,loop:n.loop?n.loop:1,direction:n.direction?n.direction:"default",end:t.triggerEnd.bind(t,n)},n.ease?m(n.ease):t.easying)}(e);return t},y.prototype.start=function(){var t=this;"alternate"===t.directionV?t.factor=t.factor?-1*t.factor:1:"reverse"===t.directionV?t.factor=-1:t.factor=1,this.execute()},y.prototype.triggerEnd=function(t){var e=this;this.currPos+=1,t.end&&this.triggerChild(t.end),this.currPos===this.group.length&&(this.endExe&&this.triggerChild(this.endExe),e.loopCounter+=1,e.loopCounter<e.loopValue&&e.start())},y.prototype.triggerChild=function(t){t instanceof y||t instanceof d?t.commit():"function"==typeof t?t():console.log("wrong type")};var v={};return v.sequenceChain=function(){return new d},v.parallelChain=function(){return new y},v})}).call(e,r(1)(t))},function(t,e,r){"use strict";(function(t){var i,n,o=function(){function t(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,s){"object"===a(t)&&t.exports?t.exports=s(r(0)):(i=[r(0)],void 0!==(n=function(t){return s(t)}.apply(e,i))&&(t.exports=n))}(0,function(t){function e(){}function r(t,e){if((t.dom.mouseover||t.dom.mouseenter)&&!t.hovered){if(t.dom.mouseover&&t.dom.mouseover.call(t,t.dataObj,e),t.dom.mouseenter&&t.dom.mouseenter.call(t,t.dataObj,e),t.hovered=!0,selectedNode&&selectedNode.dom.drag&&selectedNode.dom.drag.onDragStart){selectedNode.dom.drag.dragStartFlag=!0,selectedNode.dom.drag.onDragStart.call(selectedNode,selectedNode.dataObj,e);var r={};r.x=e.offsetX,r.y=e.offsetY,r.dx=0,r.dy=0,selectedNode.dom.drag.event=r}if(t&&t.dom.drag&&t.dom.drag.dragStartFlag&&t.dom.drag.onDrag){var i=t.dom.drag.event;t.dom.drag.event&&(i.dx=e.offsetX-i.x,i.dy=e.offsetY-i.y),i.x=e.offsetX,i.y=e.offsetY,t.dom.drag.event=i,t.dom.drag.onDrag.call(t,t.dataObj,i)}}}function i(t,e){(t.dom.mouseout||t.dom.mouseleave)&&t.hovered&&(t.dom.mouseout&&t.dom.mouseout.call(t,t.dataObj,e),t.dom.mouseleave&&t.dom.mouseleave.call(t,t.dataObj,e),t.hovered=!1),t.dom.drag&&t.dom.drag.dragStartFlag&&(t.dom.drag.dragStartFlag=!1,t.dom.drag.onDragEnd.call(t,t.dataObj,e),t.dom.drag.event=null)}function n(t,e){var r=0,i=0,n=1,a=1,s=e;if(t.attr.transform&&t.attr.transform.translate){var h=o(t.attr.transform.translate,2);r=h[0],i=h[1],s.x-=r,s.y-=i}if(t.attr.transform&&t.attr.transform.scale&&(n=void 0!==t.attr.transform.scale[0]?t.attr.transform.scale[0]:1,a=void 0!==t.attr.transform.scale[1]?t.attr.transform.scale[1]:n,s.x/=n,s.y/=a),t.attr.transform&&t.attr.transform.rotate){var c=t.attr.transform.rotate[0],l=(t.dom.BBox,{x:t.attr.transform.rotate[1],y:t.attr.transform.rotate[2]}),u=s.x,f=s.y,p=l.x,d=l.y,y=Math.PI/180*c,x=Math.cos(y),g=Math.sin(y);s.x=x*(u-p)+g*(f-d)+p,s.y=x*(f-d)-g*(u-p)+d}}t("2D");return e.prototype.execute=function(){this.root.execute(),this.stateModified=!1},e.prototype.root=function(t){this.root=t,this.stateModified=!0},e.prototype.eventsCheck=function(t,e,o){for(var a=this,s=void 0,h=void 0,c=0;c<=t.length-1;c+=1){var l=t[c],u={x:e.x,y:e.y};n(l,u),l.in({x:u.x,y:u.y})?(l.children&&l.children.length>0?(h=a.eventsCheck(l.children,{x:u.x,y:u.y},o))&&(s=h):s=l,r(l,o)):i(l,o)}return s},e.prototype.transformCoOr=n,function(){return new e}})}).call(e,r(1)(t))},function(t,e,r){"use strict";var i,n;"function"==typeof Symbol&&Symbol.iterator;!function(r,o){i=[],void 0!==(n=function(){return o()}.apply(e,i))&&(t.exports=n)}(0,function(){function t(t,e,r,i){this.r=t,this.g=e,this.b=r,this.a=void 0===i?255:i,this.rgba="rgb("+t+","+e+","+r+","+i+")"}function e(t){return p[t]?"#"+p[t]:"#000"}function r(e){var r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(r,function(t,e,r,i){return e+e+r+r+i+i});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return new t(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),255)}function i(t){var e=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")).split(",");return"#"+((1<<24)+(parseInt(e[0],10)<<16)+(parseInt(e[1],10)<<8)+parseInt(e[2],10)).toString(16).slice(1)}function n(e){for(var r=e.replace(/[^0-9\.,]+/g,"").split(","),i={},n=["r","g","b","a"],o=0;o<r.length;o+=1)i[n[o]]=parseFloat(r[o]);return new t(i.r,i.g,i.b,i.a)}function o(e){var r,i,n,o,a,s,h,c={},l=e.replace(/[^0-9\.,]+/g,"").split(",").map(function(t){return parseFloat(t)});if(a=l[0]/360,s=l[1]/100,h=l[2]/100,o=l[3],0===s)r=i=n=h;else{var u=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},f=h<.5?h*(1+s):h+s-h*s,p=2*h-f;r=255*u(p,f,a+1/3),i=255*u(p,f,a),n=255*u(p,f,a-1/3)}return void 0!==o&&(c.a=o),new t(r,i,n,o)}function a(e){return e instanceof t?e:e.startsWith("#")?r(e):e.startsWith("rgb")?n(e):e.startsWith("hsl")?o(e):{r:0,g:0,b:0,a:255}}function s(t,e){return t=t||y,e=e||y,t=a(t),e=a(e),function(r){return"rgb("+Math.round(t.r+(e.r-t.r)*r)+","+Math.round(t.g+(e.g-t.g)*r)+","+Math.round(t.b+(e.b-t.b)*r)+")"}}function h(e,r){return e=e||y,r=r||y,e=a(e),r=a(r),function(i){return new t(d(e.r+(r.r-e.r)*i),d(e.g+(r.g-e.g)*i),d(e.b+(r.b-e.b)*i),d(e.a+(r.a-e.a)*i))}}function c(e,r,i,n){return new t(e,r,i,n)}function l(e){return e instanceof t||e.startsWith("#")||e.startsWith("rgb")||e.startsWith("hsl")}for(var u=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],f=["f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","000000","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"],p={},d=Math.round,y="rgba(0,0,0,0)",x=0;x<u.length;x+=1)p[u[x]]=f[x];return{nameToHex:e,hexToRgb:r,rgbToHex:i,hslToRgb:o,transition:s,transitionObj:h,colorToRGB:a,rgba:c,isTypeColor:l}})},function(t,e,r){"use strict";(function(t){var i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){"object"===o(t)&&t.exports?t.exports=s(r(0),r(2),r(3),r(4)):(i=[r(0),r(2),r(3),r(4)],void 0!==(n=function(t){return s(t,queue,easing,chain)}.apply(e,i))&&(t.exports=n))}(0,function(t,e,r,i){function n(){return"morph_"+(S+=1)}function o(t){var e=t.replace(/e-/g,"$");e=e.replace(/ /g,","),e=e.replace(/-/g,",-"),e=e.split(/([a-zA-Z,])/g).filter(function(t){return""!==t&&","!==t}).map(function(t){return t.replace(/\$/g,"e-")});for(var r=0;r<e.length;r+=1)if(e[r].split(".").length>2){for(var i=e[r].split("."),n=[i[0]+"."+i[1]],o=2;o<i.length;o+=1)n.push("."+i[o]);e.splice(r,1,n[0],n[1])}return e}function a(t,e){return{x:t.x+e.x,y:t.y+e.y}}function s(t,e){return{x:t.x-e.x,y:t.y-e.y}}function h(){return{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:parseFloat(this.pathArr[this.currPathArr+=1])}}function c(t,e,r){return t?r:e}function l(t,e){var r=c(t,this.pp?this.pp:{x:0,y:0},{x:0,y:0});return this.cntrl=null,this.cp=a(e,r),this.start=this.cp,this.segmentLength=0,this.length=this.segmentLength,0!==this.currPathArr&&this.pp?(this.stackGroup.push(this.stack),this.stack=[]):this.stackGroup.push(this.stack),this.stack.push({type:"M",p0:this.cp,length:this.segmentLength,pointAt:function(t){return this.p0}}),this.pp=this.cp,this}function u(t,e){var r=c(t,this.pp,{x:this.pp.x,y:0});return this.cntrl=null,this.cp=a(e,r),this.segmentLength=T.getDistance(this.pp,this.cp),this.stack.push({type:"V",p0:this.pp,p1:this.cp,length:this.segmentLength,pointAt:function(t){return T.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function f(t,e){var r=c(t,this.pp,{x:0,y:0});return this.cntrl=null,this.cp=a(e,r),this.segmentLength=T.getDistance(this.pp,this.cp),this.stack.push({type:t?"L":"l",p0:this.pp,p1:this.cp,relative:{p1:e},length:this.segmentLength,pointAt:function(t){return T.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function p(t,e){var r=c(t,this.pp,{x:0,y:this.pp.y});return this.cp=a(e,r),this.cntrl=null,this.segmentLength=T.getDistance(this.pp,this.cp),this.stack.push({type:t?"H":"h",p0:this.pp,p1:this.cp,length:this.segmentLength,relative:{p1:e},pointAt:function(t){return T.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function d(){return this.cp=this.start,this.segmentLength=T.getDistance(this.pp,this.cp),this.stack.push({p0:this.pp,p1:this.cp,type:"Z",length:this.segmentLength,pointAt:function(t){return T.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function y(t,e,r){var i=c(t,this.pp,{x:0,y:0}),n=a(e,i),o=a(r,i);return this.cp=o,this.segmentLength=T.bezierLength(this.pp,n,this.cp),this.cp=o,this.stack.push({type:t?"Q":"q",p0:this.pp,cntrl1:n,cntrl2:n,p1:this.cp,relative:{cntrl1:e,p1:r},length:this.segmentLength,pointAt:function(t){return T.bezierTransition(this.p0,this.cntrl1,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this.cntrl=null,this}function x(t,e,r,i){var n=c(t,this.pp,{x:0,y:0}),o=a(e,n),s=a(r,n),h=a(i,n),l=T.cubicBezierCoefficients({p0:this.pp,cntrl1:o,cntrl2:s,p1:h});return this.cntrl=s,this.cp=h,this.segmentLength=T.cubicBezierLength(this.pp,l),this.stack.push({type:t?"C":"c",p0:this.pp,cntrl1:o,cntrl2:s,p1:this.cp,length:this.segmentLength,co:l,relative:{cntrl1:e,cntrl2:r,p1:i},pointAt:function(t){return T.cubicBezierTransition(this.p0,this.co,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this}function g(t,e,r){var i=c(t,this.pp,{x:0,y:0}),n=a(this.pp,s(this.pp,this.cntrl?this.cntrl:this.pp)),o=a(e,i),h=a(r,i);this.cp=h;var l=T.cubicBezierCoefficients({p0:this.pp,cntrl1:n,cntrl2:o,p1:h});return this.segmentLength=T.cubicBezierLength(this.pp,l),this.stack.push({type:t?"S":"s",p0:this.pp,cntrl1:n,cntrl2:o,p1:this.cp,co:l,length:this.segmentLength,relative:{cntrl2:e,p1:r},pointAt:function(t){return T.cubicBezierTransition(this.p0,this.co,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this.cntrl=o,this}function m(t,e,r,i,n,o,s){var h=c(t,this.pp,{x:0,y:0}),l=this,u=a(s,h);this.cp=u;var f=T.arcToBezier({px:this.pp.x,py:this.pp.y,cx:u.x,cy:u.y,rx:e,ry:r,xAxisRotation:i,largeArcFlag:n,sweepFlag:o});return f.forEach(function(t,e){var r=0===e?l.pp:{x:f[0].x,y:f[0].y},i={x:t.x1,y:t.y1},n={x:t.x2,y:t.y2},o={x:t.x,y:t.y},a=T.cubicBezierLength(r,T.cubicBezierCoefficients({p0:r,cntrl1:i,cntrl2:n,p1:o}));l.stack.push({type:"C",p0:r,cntrl1:i,cntrl2:n,p1:o,length:a,pointAt:function(t){return T.bezierTransition(this.p0,this.cntrl1,this.cntrl2,this.p1,t)}}),l.length+=a}),this.pp=this.cp,this}function v(t){this.stack=[],this.length=0,this.stackGroup=[],t&&(this.path=t,this.parse())}function b(t){return["S","C","V","L","H","Q"].indexOf(t)>-1}function A(t){var e=this,r=t.duration,n=t.ease,o=t.end,a=t.loop,s=t.direction,h=t.d,c=h||e.attr.d,l=0;if(e.arrayStack=[],!c)throw Error("Path Not defined");for(var u=i.sequenceChain(),f=B(c)?c:new v(c),p=f.stackGroup.reduce(function(t,e){return t=t.concat(e)},[]),d=[],y=0;y<p.length;y+=1)!function(t){if("Z"===p[t].type)d.push({run:function(t){f.stack.splice(this.id,f.stack.length-1),f.stack[this.id]=this.render.execute(t),e.setAttr("d",f)},id:t,render:new D(p[t].type,p[t].p0,p[0].p0,p[t].segmentLength),length:p[t].length}),l+=0;else if(-1!==["V","v","H","h","L","l"].indexOf(p[t].type))d.push({run:function(t){f.stack.splice(this.id,f.stack.length-1),f.stack[this.id]=this.render.execute(t),e.setAttr("d",f)},id:t,render:new D(p[t].type,p[t].p0,p[t].p1,p[t].length),length:p[t].length}),l+=p[t].length;else if("Q"===p[t].type||"q"===p[t].type)d.push({run:function(t){f.stack.splice(this.id,f.stack.length-1),f.stack[this.id]=this.render.execute(t),e.setAttr("d",f)},id:t,render:new C(p[t].type,p[t].p0,p[t].cntrl1,p[t].p1,p[t].length),length:p[t].length}),l+=p[t].length;else if("C"===p[t].type||"S"===p[t].type||"c"===p[t].type||"s"===p[t].type){var r=T.cubicBezierCoefficients(p[t]);d.push({run:function(t){f.stack.splice(this.id,f.stack.length-1),f.stack[this.id]=this.render.execute(t),e.setAttr("d",f)},id:t,co:r,render:new E(p[t].type,p[t].p0,p[t].cntrl1,p[t].cntrl2,r,p[t].length),length:p[t].length}),l+=p[t].length}else"M"===p[t].type&&(d.push({run:function(){f.stack.splice(this.id,f.stack.length-1),f.stack[this.id]={type:"M",p0:p[t].p0,length:0,pointAt:function(t){return this.p0}}},id:t,length:0}),l+=0)}(y);return d.forEach(function(t){t.duration=t.length/l*r}),u.duration(r).add(d).ease(n).loop(a||0).direction(s||"default"),"function"==typeof o&&u.end(o.bind(e)),u.commit(),this}function w(t){function e(t){if(t.length){for(var e=t,r=[],i=0;i<e.length;i+=1)if(-1!==["M","C","S","Q"].indexOf(e[i].type))r.push(e[i]);else if(-1!==["V","H","L","Z"].indexOf(e[i].type)){var n={x:(e[i].p0.x+e[i].p1.x)/2,y:(e[i].p0.y+e[i].p1.y)/2};r.push({p0:e[i].p0,cntrl1:n,cntrl2:n,p1:e[i].p1,type:"C",length:e[i].length})}return r}}function r(t,e){E.push({run:function(t,e){var r=this.pointTansition(e);t.m(!0,{x:r.x,y:r.y})},pointTansition:T.linearTransitionBetweenPoints.bind(null,t.p0,e.p0)})}function i(t,e){E.push({run:function(t,e){var r=this,i=r.ctrl1Transition(e),n=r.ctrl2Transition(e),o=r.destTransition(e);t.c(!0,{x:i.x,y:i.y},{x:n.x,y:n.y},{x:o.x,y:o.y})},srcTransition:T.linearTransitionBetweenPoints.bind(null,t.p0,e.p0),ctrl1Transition:T.linearTransitionBetweenPoints.bind(null,t.cntrl1,e.cntrl1),ctrl2Transition:T.linearTransitionBetweenPoints.bind(null,t.cntrl2,e.cntrl2),destTransition:T.linearTransitionBetweenPoints.bind(null,t.p1,e.p1)})}function o(t,e){if(t.length===e)return t;for(var r=t.reduce(function(t,e){return t+e.length},0),i=[],n=0;n<t.length;n+=1){var o=t[n].length,s=Math.floor(e/r*o);if(s<=1)i.push(t[n]);else{for(var h=t[n],c=void 0;s>1;){var l=h;c=a([l.p0,l.cntrl1,l.cntrl2,l.p1].slice(0),1/s),i.push({p0:l.p0,cntrl1:c.b1[0],cntrl2:c.b1[1],p1:c.b1[2],type:"C"}),h={p0:c.b1[2],cntrl1:c.b2[0],cntrl2:c.b2[1],p1:c.b2[2],type:"C"},s-=1}i.push(h)}}return i}function a(t,e){for(var r=[],i=t;i.length>0;){for(var n=0;n<i.length-1;n+=1)r.unshift(i[n]),i[n]=s(i[n],i[n+1],e);r.unshift(i.pop())}return{b1:[{x:r[5].x,y:r[5].y},{x:r[2].x,y:r[2].y},{x:r[0].x,y:r[0].y}],b2:[{x:r[1].x,y:r[1].y},{x:r[3].x,y:r[3].y},{x:r[6].x,y:r[6].y}]}}function s(t,e,r){return{x:t.x+(e.x-t.x)*(void 0!==r?r:.5),y:t.y+(e.y-t.y)*(void 0!==r?r:.5)}}function h(t){for(var e=0,r=0;r<t.length;r+=1)"M"!==t[r].type&&(e+=(t[r].p1.x-t[r].p0.x)*(t[r].p1.y+t[r].p0.y));return e}function c(t){var e=t.reverse(),r=[{type:"M",p0:e[0].p1}];return e.forEach(function(t){if("C"===t.type){var e=t,i=e.p0,n=e.cntrl1;e.p0=t.p1,e.p1=i,e.cntrl1=t.cntrl2,e.cntrl2=n,r.push(e)}}),r}function l(t){var e=0,r=0,i=0,n=0;return t.forEach(function(t){t.p0&&(e+=t.p0.x,r+=t.p0.y,i+=1,n+=1),t.p1&&(e+=t.p1.x,r+=t.p1.y,i+=1,n+=1)}),{x:e/i,y:r/n}}function u(t,e){return e.x>=t.x&&e.y<=t.y?1:e.x<=t.x&&e.y<=t.y?2:e.x<=t.x&&e.y>=t.y?3:4}function f(t,e){for(var r=l(t),i=l(e),n=t,o=e,a=0;a<t.length;a+=1)n[a].quad=u(r,t[a].p0);for(var s=0;s<e.length;s+=1)o[s].quad=u(i,e[s].p0);var h=0;return t.forEach(function(t,e){var i=T.getDistance(t.p0,r);1===t.quad&&i>=h&&(h=i)}),h=0,e.forEach(function(t,e){var r=T.getDistance(t.p0,i);1===t.quad&&r>h&&(h=r)}),{src:p(t,0),dest:p(e,0),srcCentroid:r,destCentroid:i}}function p(t,e){if(e<=0)return t;var r=t,i=r.splice(0,e);return i.shift(),r=r.concat(i),r.unshift({type:"M",p0:r[0].p0}),r.push({type:"M",p0:r[0].p0}),r}function d(t,e){var n=void 0,a=void 0,s=t.length>e.length?t.length:e.length;e.length>2&&t.length>2?(s>50?s+=30:s=s>=20?s+15:s+4,n=o(t,s),a=o(e,s)):(n=t,a=e),h(n)<0&&(n=c(n)),h(a)<0&&(a=c(a));var l=f(n,a,this);n=l.src.length>1?l.src:[{type:"M",p0:l.destCentroid}],a=l.dest.length>1?l.dest:[{type:"M",p0:l.srcCentroid}];for(var u=a.length<n.length?n.length:a.length,p=0;p<n.length;p+=1)n[p].index=p;for(var d=0;d<a.length;d+=1)a[d].index=d;for(var y=0;y<u;y+=1){var x=n[n.length-1].p0?n[n.length-1].p0:n[n.length-1].p1,g=a[a.length-1].p0?a[a.length-1].p0:a[a.length-1].p1,m=n[y]?n[y]:{type:"C",p0:x,p1:x,cntrl1:x,cntrl2:x,length:0},v=a[y]?a[y]:{type:"C",p0:g,p1:g,cntrl1:g,cntrl2:g,length:0};"M"===m.type&&"M"===v.type?r(m,v):"M"===m.type||"M"===v.type?"M"===m.type?i({type:"C",p0:m.p0,p1:m.p0,cntrl1:m.p0,cntrl2:m.p0,length:0},v):i(m,{type:"C",p0:v.p0,p1:v.p0,cntrl1:v.p0,cntrl2:v.p0,length:0}):i(m,v)}}var y=this,x=t.duration,g=t.ease,m=t.loop?t.loop:0,b=t.direction?t.direction:"default",A=t.attr.d?t.attr.d:y.attr.d,w=B(y.attr.d)?y.attr.d.stackGroup:new v(y.attr.d).stackGroup,S=B(A)?A.stackGroup:new v(A).stackGroup,E=[];y.arrayStack=[],w.length>1&&(w=w.sort(function(t,e){return e.segmentLength-t.segmentLength})),S.length>1&&(S=S.sort(function(t,e){return e.segmentLength-t.segmentLength}));var C=w.length>S.length?w.length:S.length;d(e(w[0]),e(S[0]));for(var D=1;D<C;D+=1)w[D]&&d(e(w[D]),[{type:"M",p0:w[D][0].p0}]),S[D]&&d([{type:"M",p0:S[D][0].p0}],e(S[D]));k.add(n(),{run:function(t){for(var e=new v,r=0,i=E.length;r<i;r++)E[r].run(e,t);y.setAttr("d",e)},duration:x,loop:m,direction:b},L(g))}function B(t){return t instanceof v}var S=0,T=t("2D"),k=e(),L=r();v.prototype={z:d,m:l,v:u,h:p,l:f,q:y,s:g,c:x,a:m,fetchXY:h},v.prototype.parse=function(){for(this.currPathArr=-1,this.stack=[],this.length=0,this.pathArr=o(this.path),this.stackGroup=[];this.currPathArr<this.pathArr.length-1;)this.case(this.pathArr[this.currPathArr+=1]);return this.stack},v.prototype.fetchPathString=function(){for(var t="",e=void 0,r=0;r<this.stack.length;r++)e=this.stack[r],"M"===e.type?t+=e.type+" "+e.p0.x+","+e.p0.y+" ":"Z"===e.type?t+="z":"C"===e.type?t+=e.type+" "+e.cntrl1.x+","+e.cntrl1.y+" "+e.cntrl2.x+","+e.cntrl2.y+" "+e.p1.x+","+e.p1.y+" ":"c"===e.type?t+=e.type+" "+e.relative.cntrl1.x+","+e.relative.cntrl1.y+" "+e.relative.cntrl2.x+","+e.relative.cntrl2.y+" "+e.relative.p1.x+","+e.relative.p1.y+" ":"Q"===e.type?t+=e.type+" "+e.cntrl1.x+","+e.cntrl1.y+" "+e.p1.x+","+e.p1.y+" ":"q"===e.type?t+=e.type+" "+e.relative.cntrl1.x+","+e.relative.cntrl1.y+" "+e.relative.p1.x+","+e.relative.p1.y+" ":"S"===e.type?t+=e.type+" "+e.cntrl2.x+","+e.cntrl2.y+" "+e.p1.x+","+e.p1.y+" ":"s"===e.type?t+=e.type+" "+e.relative.cntrl2.x+","+e.relative.cntrl2.y+" "+e.relative.p1.x+","+e.relative.p1.y+" ":"V"===e.type?t+=e.type+" "+e.p1.y+" ":"v"===e.type?t+=e.type+" "+e.relative.p1.y+" ":"H"===e.type?t+=e.type+" "+e.p1.x+" ":"h"===e.type?t+=e.type+" "+e.relative.p1.x+" ":"L"===e.type?t+=e.type+" "+e.p1.x+","+e.p1.y+" ":"l"===e.type&&(t+=e.type+" "+e.relative.p1.x+","+e.relative.p1.y+" ");return t},v.prototype.getTotalLength=function(){return this.length},v.prototype.getAngleAtLength=function(t,e){if(t>this.length)return null;var r=this.getPointAtLength(t),i=this.getPointAtLength(t+("src"===e?-1*t*.01:.01*t));return Math.atan2(i.y-r.y,i.x-r.x)},v.prototype.getPointAtLength=function(t){var e={x:0,y:0},r=t;return this.stack.every(function(t,i){return r-=t.length,Math.floor(r)>=0||(e=t.pointAt((t.length+r)/(0===t.length?1:t.length)),!1)}),e},v.prototype.isValid=function(t){return-1!==["m","M","v","V","l","L","h","H","q","Q","c","C","s","S","a","A","z","Z"].indexOf(t)},v.prototype.case=function(t){var e=t;switch(this.isValid(e)?this.PC=e:(e=this.PC,this.currPathArr=this.currPathArr-1),e){case"m":this.m(!1,this.fetchXY());break;case"M":this.m(!0,this.fetchXY());break;case"v":this.v(!1,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"V":this.v(!0,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"l":this.l(!1,this.fetchXY());break;case"L":this.l(!0,this.fetchXY());break;case"h":this.h(!1,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"H":this.h(!0,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"q":this.q(!1,this.fetchXY(),this.fetchXY());break;case"Q":this.q(!0,this.fetchXY(),this.fetchXY());break;case"c":this.c(!1,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"C":this.c(!0,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"s":this.s(!1,this.fetchXY(),this.fetchXY());break;case"S":this.s(!0,this.fetchXY(),this.fetchXY());break;case"a":var r=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),a=parseFloat(this.pathArr[this.currPathArr+=1]);this.a(!1,r,i,n,o,a,this.fetchXY());break;case"A":r=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),a=parseFloat(this.pathArr[this.currPathArr+=1]),this.a(!0,r,i,n,o,a,this.fetchXY());break;case"z":this.z()}};var E=function(t,e,r,i,n,o){this.type=t,this.p0=e,this.c1_src=r,this.c2_src=i,this.co=n,this.length_src=o};E.prototype.execute=function(t){var e=this.co,r=this.p0,i=this.c1_src,n=this.c2_src,o={x:r.x+(i.x-r.x)*t,y:r.y+(i.y-r.y)*t},a={x:i.x+(n.x-i.x)*t,y:i.y+(n.y-i.y)*t};return this.cntrl1=o,this.cntrl2={x:o.x+(a.x-o.x)*t,y:o.y+(a.y-o.y)*t},this.p1={x:e.ax*T.pow(t,3)+e.bx*T.pow(t,2)+e.cx*t+r.x,y:e.ay*T.pow(t,3)+e.by*T.pow(t,2)+e.cy*t+r.y},this.length=this.length_src*t,this.relative={cntrl1:b(this.type)?this.cntrl1:s(this.cntrl1,this.p0),cntrl2:b(this.type)?this.cntrl2:s(this.cntrl2,this.p0),p1:b(this.type)?this.p1:s(this.p1,this.p0)},this},E.prototype.pointAt=function(t){return T.cubicBezierTransition(this.p0,this.co,t)};var C=function(t,e,r,i,n,o){this.type=t,this.p0=e,this.p1_src=r,this.p2_src=i,this.length_src=n,this.length=0};C.prototype.execute=function(t){var e=this.p0,r=this.p1_src,i=this.p2_src;return this.length=this.length_src*t,this.cntrl1={x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t},this.cntrl2=this.cntrl1,this.p1={x:(e.x-2*r.x+i.x)*t*t+(2*r.x-2*e.x)*t+e.x,y:(e.y-2*r.y+i.y)*t*t+(2*r.y-2*e.y)*t+e.y},this.relative={cntrl1:b(this.type)?this.cntrl1:s(this.cntrl1,this.p0),p1:b(this.type)?this.p1:s(this.p1,this.p0)},this},C.prototype.pointAt=function(t){return T.bezierTransition(this.p0,this.cntrl1,this.p1,t)};var D=function(t,e,r,i,n){this.type=t,this.p0=e,this.p1=e,this.p2_src=r,this.length_src=i,this.length=0};return D.prototype.execute=function(t){var e=this.p0,r=this.p2_src;return this.p1={x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t},this.length=this.length_src*t,this.relative={p1:b(this.type)?this.p1:s(this.p1,this.p0)},this},D.prototype.pointAt=function(t){return T.linearTransitionBetweenPoints(this.p0,this.p1,t)},{instance:function(t){return new v(t)},isTypePath:B,animatePathTo:A,morphTo:w}})}).call(e,r(1)(t))},function(t,e,r){"use strict";(function(t){var r,i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,a){"object"===n(t)&&t.exports?t.exports=a():(r=[],void 0!==(i=function(){return a()}.apply(e,r))&&(t.exports=i))}(0,function(){function t(t){var e=void 0;switch(t){case"point":e={vertexShader:"\n          attribute vec2 a_position;\n          attribute vec4 a_color;\n          attribute float a_size;\n          \n          uniform vec2 u_resolution;\n          uniform vec2 u_translate;\n          uniform vec2 u_scale;\n          \n          varying vec4 v_color;\n          void main() {\n            vec2 zeroToOne = (u_scale * (a_position + u_translate)) / u_resolution;\n            vec2 clipSpace = ((zeroToOne) * 2.0) - 1.0;\n            gl_Position = vec4((clipSpace * vec2(1, -1)), 0, 1);\n            gl_PointSize = a_size;\n            v_color = a_color;\n          }\n          ",fragmentShader:"\n                    precision mediump float;\n                    varying vec4 v_color;\n                    void main() {\n                        gl_FragColor = v_color;\n                    }\n                    "};break;case"circle":e={vertexShader:"\n          attribute vec2 a_position;\n          attribute vec4 a_color;\n          attribute float a_radius;\n          uniform vec2 u_resolution;\n          uniform vec2 u_translate;\n          uniform vec2 u_scale;\n          varying vec4 v_color;\n          void main() {\n            vec2 zeroToOne = (u_scale * (a_position + u_translate)) / u_resolution;\n            vec2 zeroToTwo = zeroToOne * 2.0;\n            vec2 clipSpace = zeroToTwo - 1.0;\n            gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n            gl_PointSize = a_radius;\n            v_color = a_color;\n          }\n          ",fragmentShader:"\n                    precision mediump float;\n                    varying vec4 v_color;\n                    void main() {\n                      float r = 0.0, delta = 0.0, alpha = 1.0;\n                      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n                      r = dot(cxy, cxy);\n                      if(r > 1.0) {\n                        discard;\n                      }\n                      delta = 0.09;\n                      alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);                      \n                      gl_FragColor = v_color * alpha;\n                    }\n                    "};break;case"image":e={vertexShader:"\n                    attribute vec2 a_position;\n                    attribute vec2 a_texCoord;\n                    uniform vec2 u_resolution;\n                    uniform vec2 u_translate;\n                    uniform vec2 u_scale;\n                    varying vec2 v_texCoord;\n                    void main() {\n                      vec2 zeroToOne = (u_scale * (a_position + u_translate)) / u_resolution;\n                      vec2 clipSpace = zeroToOne * 2.0 - 1.0;\n                      gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n                      v_texCoord = a_texCoord;\n                    }\n          ",fragmentShader:"\n                    precision mediump float;\n                    uniform sampler2D u_image;\n                    varying vec2 v_texCoord;\n                    void main() {\n                      gl_FragColor = texture2D(u_image, v_texCoord);\n                    }\n                    "};break;default:e={vertexShader:"\n                    attribute vec2 a_position;\n                    attribute vec4 a_color;\n                    uniform vec2 u_resolution;\n                    uniform vec2 u_translate;\n                    uniform vec2 u_scale;\n                    varying vec4 v_color;\n                    void main() {\n                    vec2 zeroToOne = (u_scale * (a_position + u_translate)) / u_resolution;\n                    vec2 clipSpace = zeroToOne * 2.0 - 1.0;\n                    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n                    v_color = a_color;\n                    }\n                    ",fragmentShader:"\n                    precision mediump float;\n                    varying vec4 v_color;\n                    void main() {\n                        gl_FragColor = v_color;\n                    }\n                    "}}return e}return t})}).call(e,r(1)(t))},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i=e&&e.length,o=i?e[0]*r:t.length,s=n(t,0,o,r,!0),h=[];if(!s)return h;var c,l,f,p,d,y,x;if(i&&(s=u(t,e,s,r)),t.length>80*r){c=f=t[0],l=p=t[1];for(var g=r;g<o;g+=r)d=t[g],y=t[g+1],d<c&&(c=d),y<l&&(l=y),d>f&&(f=d),y>p&&(p=y);x=Math.max(f-c,p-l),x=0!==x?1/x:0}return a(s,h,r,c,l,x),h}function n(t,e,r,i,n){var o,a;if(n===_(t,e,r,i)>0)for(o=e;o<r;o+=i)a=E(o,t[o],t[o+1],a);else for(o=r-i;o>=e;o-=i)a=E(o,t[o],t[o+1],a);return a&&w(a,a.next)&&(C(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!w(i,i.next)&&0!==A(i.prev,i,i.next))i=i.next;else{if(C(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function a(t,e,r,i,n,u,f){if(t){!f&&u&&y(t,i,n,u);for(var p,d,x=t;t.prev!==t.next;)if(p=t.prev,d=t.next,u?h(t,i,n,u):s(t))e.push(p.i/r),e.push(t.i/r),e.push(d.i/r),C(t),t=d.next,x=d.next;else if((t=d)===x){f?1===f?(t=c(t,e,r),a(t,e,r,i,n,u,2)):2===f&&l(t,e,r,i,n,u):a(o(t),e,r,i,n,u,1);break}}}function s(t){var e=t.prev,r=t,i=t.next;if(A(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(v(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&A(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,r,i){var n=t.prev,o=t,a=t.next;if(A(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,h=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,c=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,l=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,u=g(s,h,e,r,i),f=g(c,l,e,r,i),p=t.prevZ,d=t.nextZ;p&&p.z>=u&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&A(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&A(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&A(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&A(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function c(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!w(n,o)&&B(n,i,i.next,o)&&T(n,o)&&T(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),C(i),C(i.next),i=t=o),i=i.next}while(i!==t);return i}function l(t,e,r,i,n,s){var h=t;do{for(var c=h.next.next;c!==h.prev;){if(h.i!==c.i&&b(h,c)){var l=L(h,c);return h=o(h,h.next),l=o(l,l.next),a(h,e,r,i,n,s),void a(l,e,r,i,n,s)}c=c.next}h=h.next}while(h!==t)}function u(t,e,r,i){var a,s,h,c,l,u=[];for(a=0,s=e.length;a<s;a++)h=e[a]*i,c=a<s-1?e[a+1]*i:t.length,l=n(t,h,c,i,!1),l===l.next&&(l.steiner=!0),u.push(m(l));for(u.sort(f),a=0;a<u.length;a++)p(u[a],r),r=o(r,r.next);return r}function f(t,e){return t.x-e.x}function p(t,e){if(e=d(t,e)){var r=L(e,t);o(r,r.next)}}function d(t,e){var r,i=e,n=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===a)return r.prev;var h,c=r,l=r.x,u=r.y,f=1/0;for(i=r.next;i!==c;)n>=i.x&&i.x>=l&&n!==i.x&&v(o<u?n:a,o,l,u,o<u?a:n,o,i.x,i.y)&&((h=Math.abs(o-i.y)/(n-i.x))<f||h===f&&i.x>r.x)&&T(i,t)&&(r=i,f=h),i=i.next;return r}function y(t,e,r,i){var n=t;do{null===n.z&&(n.z=g(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,x(n)}function x(t){var e,r,i,n,o,a,s,h,c=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,i=r,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(h=c;s>0||h>0&&i;)0!==s&&(0===h||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,c*=2}while(a>1);return t}function g(t,e,r,i,n){return t=32767*(t-r)*n,e=32767*(e-i)*n,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function v(t,e,r,i,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S(t,e)&&T(t,e)&&T(e,t)&&k(t,e)}function A(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function B(t,e,r,i){return!!(w(t,e)&&w(r,i)||w(t,i)&&w(r,e))||A(t,e,r)>0!=A(t,e,i)>0&&A(r,i,t)>0!=A(r,i,e)>0}function S(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&B(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function T(t,e){return A(t.prev,t,t.next)<0?A(t,e,t.next)>=0&&A(t,t.prev,e)>=0:A(t,e,t.prev)<0||A(t,t.next,e)<0}function k(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}function L(t,e){var r=new D(t.i,t.x,t.y),i=new D(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function E(t,e,r,i){var n=new D(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function D(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _(t,e,r,i){for(var n=0,o=e,a=r-i;o<r;o+=i)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}t.exports=i,t.exports.default=i,i.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,a=Math.abs(_(t,0,o,r));if(n)for(var s=0,h=e.length;s<h;s++){var c=e[s]*r,l=s<h-1?e[s+1]*r:t.length;a-=Math.abs(_(t,c,l,r))}var u=0;for(s=0;s<i.length;s+=3){var f=i[s]*r,p=i[s+1]*r,d=i[s+2]*r;u+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[n][o][a]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";(function(t){var i,n,o=function(){function t(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,s){"object"===a(t)&&t.exports?t.exports=s(r(0),r(2),r(3),r(4),r(5),r(6),r(7),r(8),r(9)):(i=[r(0),r(2),r(3),r(4),r(5),r(6),r(7),r(8),r(9)],void 0!==(n=function(t,e,r,i,n,o,a,h,c){return s(t,e,r,i,n,o,a,h,c)}.apply(e,i))&&(t.exports=n))}(0,function(t,e,r,i,n,s,h,c,l){function u(){return Pt+=1}function f(){return It+=1}function p(t,e){for(var r=void 0,i=[],n=0;n<this.stack.length;n+=1)r=this.stack[n],i.push(r.fetchEls(t,e));var o=new rt;return o.wrapper(i),o}function d(t,e){var r=[],i=new rt;if(this.children.length>0)if("."===t.charAt(0)){var n=t.substring(1,t.length);this.children.forEach(function(t){(e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.class===n||!e&&t.attr.class===n)&&r.push(t)})}else if("#"===t.charAt(0)){var o=t.substring(1,t.length);this.children.every(function(t){return!(e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.id===o||!e&&t.attr.id===o)||(r.push(t),!1)})}else this.children.forEach(function(i){(e&&i.dataObj&&-1!==e.indexOf(i.dataObj)&&i.nodeName===t||!e&&i.nodeName===t)&&r.push(i)});return i.wrapper(r)}function y(t,e){var r=void 0;if(this.children.length>0)if("."===t.charAt(0)){var i=t.substring(1,t.length);this.children.every(function(t){return!(e&&t.dataObj&&e===t.dataObj&&t.attr.class===i||!e&&t.attr.class===i)||(r=t,!1)})}else if("#"===t.charAt(0)){var n=t.substring(1,t.length);this.children.every(function(t){return!(e&&t.dataObj&&e===t.dataObj&&t.attr.id===n||!e&&t.attr.id===n)||(r=t,!1)})}else this.children.forEach(function(i){(e&&i.dataObj&&e===i.dataObj&&i.nodeName===t||!e&&i.nodeName===t)&&(r=i)});return r}function x(t,e,r){for(var i=void 0,n=[],o=0;o<this.stack.length;o+=1)i=this.stack[o],n.push(i.join(t,e,r));var a=new rt;return a.wrapper(n),a}function g(t){for(var e=void 0,r=[],i=0,n=this.stack.length;i<n;i+=1){var o={};if(e=this.stack[i],"function"==typeof t)o=t.call(e,e.dataObj,i);else for(var s=Object.keys(t),h=0,c=s.length;h<c;h+=1){var l=s[h];"object"!==a(t[l])?o[l]=t[l]:o[l]=JSON.parse(JSON.stringify(t[l]))}r.push(e.createEl(o))}var u=new rt;return u.wrapper(r),u}function m(t,e){for(var r=void 0,i=[],n=t,o=0,a=this.stack.length;o<a;o+=1){var s={};if(r=this.stack[o],"function"==typeof t&&(n=t.call(r,r.dataObj,o)),"function"==typeof e)s=e.call(r,r.dataObj,o);else for(var h=Object.keys(e),c=0,l=h.length;c<l;c+=1){var u=h[c];s[u]=e[u]}i.push(r.createEls(n,s))}var f=new rt;return f.wrapper(i),f}function v(t){for(var e=0,r=this.stack.length;e<r;e+=1)t.call(this.stack[e],this.stack[e].dataObj,e);return this}function b(t,e){for(var r=void 0,i=0,n=this.stack.length;i<n;i+=1)if(r=this.stack[i],arguments.length>1)"function"==typeof e?r.setAttr(t,e.call(r,r.dataObj,i)):r.setAttr(t,e);else if("function"==typeof t)r.setAttr(t.call(r,r.dataObj,i));else for(var o=Object.keys(t),a=0,s=o.length;a<s;a+=1){var h=o[a];"function"==typeof t[h]?r.setAttr(h,t[h].call(r,r.dataObj,i)):r.setAttr(h,t[h])}return this}function A(t,e){for(var r=void 0,i=0,n=this.stack.length;i<n;i+=1)if(r=this.stack[i],arguments.length>1)"function"==typeof e?r.setStyle(t,e.call(r,r.dataObj,i)):r.setStyle(t,e);else{if("function"==typeof t)r.setStyle(t.call(r,r.dataObj,i));else for(var o=Object.keys(t),a=0,s=o.length;a<s;a+=1){var h=o[a];"function"==typeof t[h]?r.setStyle(h,t[h].call(r,r.dataObj,i)):r.setStyle(h,t[h])}"function"==typeof t?r.setStyle(t.call(r,r.dataObj,i)):r.setStyle(t)}return this}function w(t){for(var e=void 0,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.translate(t.call(e,e.dataObj,r)):e.translate(t);return this}function B(t){for(var e=void 0,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.rotate(t.call(e,e.dataObj,r)):e.rotate(t);return this}function S(t){for(var e=void 0,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.scale(t.call(e,e.dataObj,r)):e.scale(t);return this}function T(t){var e=void 0;if("function"==typeof t){for(var r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],t.call(e,e.dataObj,r);return this}}function k(t,e){for(var r=0,i=this.stack.length;r<i;r+=1)this.stack[r].on(t,e);return this}function L(){for(var t=0,e=this.stack.length;t<e;t+=1)this.stack[t].remove();return this}function E(t,e){this[t]=e}function C(t,e,r){for(var i=t.map(r),n={new:[],update:[],old:[]},o=0;o<e.length;o+=1){var a=i.indexOf(r(e[o].dataObj,o));-1!==a?(e[o].dataObj=t[a],n.update.push(e[o]),i[a]=null):n.old.push(e[o])}return n.new=t.filter(function(t,e){var n=i.indexOf(r(t,e));return-1!==n&&(i[n]=null,!0)}),n}function D(t,e,r){var i=this,n=e.split(","),o=r.joinOn,a={new:{},update:{},old:{}};o||(o=function(t,e){return e});for(var s=0,h=n.length;s<h;s++){var c=n[s],l=i.fetchEls(c),u=C(t,l.stack,o);a.new[c]=u.new,a.update[c]=(new rt).wrapper(u.update),a.old[c]=(new rt).wrapper(u.old)}return r.action&&(r.action.enter&&r.action.enter.call(i,a.new),r.action.exit&&r.action.exit.call(i,a.old),r.action.update&&r.action.update.call(i,a.update)),Rt.config={value:r,enumerable:!1,configurable:!0,writable:!0},Rt.selector={value:e,enumerable:!1,configurable:!0,writable:!1},Rt.data={value:t,enumerable:!1,configurable:!0,writable:!0},Object.create(i,Rt)}function _(t,e,r){var i={},n=void 0;for(n in t)"end"!==n&&("function"==typeof t[n]?i[n]=t[n].call(e,e.dataObj,r):i[n]=t[n]);return i}function O(t,e,r){this.config=t,this.type=e||"linear",this.pDom=r}function P(t,e){if("transform"!==e){var r=e.indexOf(":");r>=0?t.dom.setAttributeNS(Wt[e.slice(0,r)],e.slice(r+1),t.changedAttribute[e]):"text"===e?t.dom.textContent=t.changedAttribute[e]:t.dom.setAttribute(e,t.changedAttribute[e])}}function I(t){var e="";for(var r in t.attr.transform)e+="rotate"===r?r+"("+t.attr.transform.rotate[0]+" "+(t.attr.transform.rotate[1]||0)+" "+(t.attr.transform.rotate[2]||0)+") ":r+"("+t.attr.transform[r].join(" ")+") ";t.dom.setAttribute("transform",e)}function j(t){if("[object Array]"===Object.prototype.toString.call(t))return t.reduce(function(t,e){return t+e.x+","+e.y+" "},"")}function R(t,e){var r=null;switch(t.el){case"group":r=Zt("g");break;default:r=Zt(t.el)}var i=new Qt(r,t,u(),e);return t.dataObj&&(r.dataObj=t.dataObj),i}function F(t){var e=this;if(t.transform){var r=t.transform,i=r.scale&&r.scale.length>0?r.scale[0]:1,n=r.scale&&r.scale.length>1?r.scale[1]:i||1,o=r.skewX?r.skewX[0]:0,a=r.skewY?r.skewY[0]:0,s=r.translate&&r.translate.length>0?r.translate[0]:0,h=r.translate&&r.translate.length>1?r.translate[1]:s||0;e.ctx.transform(i,o,a,n,s,h),r.rotate&&(e.ctx.translate(r.rotate[1]||0,r.rotate[2]||0),e.ctx.rotate(r.rotate[0]*(Math.PI/180)),e.ctx.translate(-r.rotate[1]||0,-r.rotate[2]||0))}for(var c=0;c<e.stack.length;c+=1)e.stack[c].execute()}function M(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(t.attr.points&&t.attr.points.length>0){var s=t.attr.points;if(a&&a.translate){var h=o(a.translate,2);e=h[0],r=h[1]}if(a&&a.scale){var c=o(a.scale,2);i=c[0],n=c[1]}for(var l=s[0].x,u=s[0].x,f=s[0].y,p=s[0].y,d=1;d<s.length;d+=1)l>s[d].x&&(l=s[d].x),u<s[d].x&&(u=s[d].x),f>s[d].y&&(f=s[d].y),p<s[d].y&&(p=s[d].y);t.BBox={x:e+l*i,y:r+f*n,width:(u-l)*i,height:(p-f)*n}}else t.BBox={x:0,y:0,width:0,height:0};a&&a.rotate?t.BBoxHit=Dt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox}function U(t,e){void 0!==e?this.attr[t]=e:delete this.attr[t]}function G(t,e){void 0!==e?this.style[t]=e:delete this.style[t]}function z(t,e){this.config=t,this.type=e||"linear",this.mode=this.config.mode&&"percent"!==this.config.mode?"absolute":"percent"}function N(t){return new z(t,"linear")}function Y(t){return new z(t,"radial")}function q(t,e,r,i,n){this.pixels=t,this.width=e,this.height=r,this.x=i,this.y=n}function X(t){return t((this.rImageObj?this.rImageObj:this.imageObj).getContext("2d").getImageData(0,0,this.attr.width,this.attr.height))}function H(t,e){var r=document.createElement("canvas");return r.setAttribute("height",e),r.setAttribute("width",t),r.style.height=e+"px",r.style.width=t+"px",r}function V(t,e,r){var i=new Image,n=this;i.src=e,i.onload=function(){n.pattern=t.ctx.createPattern(i,r),Ot.vDomChanged(t.vDomIndex)}}function W(t,e){return new V(this,t,e)}function Z(){"#000000"!==this.ctx.fillStyle&&this.ctx.fill(),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke()}function Q(){this.BBox={x:0,y:0,width:0,height:0},this.BBoxHit={x:0,y:0,width:0,height:0}}function $(t,e,r,i,n,o){var a=this;a.ctx=t,a.attr=e,a.style=r,a.nodeName="Image",a.image=new Image,a.image.onload=function(){if(this.crossOrigin="anonymous",a.attr.height=a.attr.height?a.attr.height:this.height,a.attr.width=a.attr.width?a.attr.width:this.width,$t[a.attr.src])a.imageObj=$t[a.attr.src];else{var t=H(this.width,this.height);t.getContext("2d").drawImage(this,0,0,this.width,this.height),a.imageObj=t,$t[a.attr.src]=t}if(a.attr.clip){var e=void 0,r=a.attr,n=r.clip,s=r.width,h=r.height,c=n.sx,l=n.sy,u=n.swidth,f=n.sheight;this.rImageObj||(a.rImageObj=H(a.attr.width,a.attr.height)),e=a.rImageObj.getContext("2d"),c=void 0!==c?c:0,l=void 0!==l?l:0,u=void 0!==u?u:s,f=void 0!==f?f:h,e.drawImage(a.imageObj,c,l,u,f,0,0,s,h)}if(a.attr.pixels){var p=void 0,d=a.attr,y=d.width,x=d.height;a.rImageObj||(a.rImageObj=H(a.attr.width,a.attr.height),p=a.rImageObj.getContext("2d"),p.drawImage(a.imageObj,0,0,y,x)),p=a.rImageObj.getContext("2d"),p.putImageData(X.call(a,a.attr.pixels),0,0)}i&&"function"==typeof i&&i.call(o),a.nodeExe.BBoxUpdate=!0,Ot.vDomChanged(a.nodeExe.vDomIndex)},a.image.onerror=function(){n&&"function"==typeof n&&n.call(o)},a.attr.src&&(a.image.src=a.attr.src),Ot.vDomChanged(o.vDomIndex),a.stack=[a]}function K(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="text",i.stack=[i]}function J(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="polyline",i.stack=[i]}function tt(t){var e=new Path2D,r=t,i=[];r=r.replace(/,/g," ").split(" "),e.moveTo(r[0],r[1]),i.push({x:parseFloat(r[0]),y:parseFloat(r[1])});for(var n=2;n<r.length;n+=2)e.lineTo(r[n],r[n+1]),i.push({x:parseFloat(r[n]),y:parseFloat(r[n+1])});return e.closePath(),{path:e,points:i}}function et(t){return"#000"===t||"#000000"===t||"black"===t?"rgba(0, 0, 0, 0.9)":t}function rt(t,e,r,i){e||(e=[]);var n=void 0,o=void 0,a=r&&r.attr?Object.keys(r.attr):[],s=r&&r.style?Object.keys(r.style):[],h=!r||(void 0===r.bbox||r.bbox);return this.stack=e.map(function(e,c){var l=void 0;"SVG"===t.type?l=R({el:r.el},i):"CANVAS"===t.type?l=new oe(t.ctx,{el:r.el,bbox:h},u(),i):"WEBGL"===t.type?l=new Et(t.ctx,{el:r.el,bbox:h},u(),i):console.log("unknow type");for(var f=0,p=a.length;f<p;f+=1)if("transform"!==(o=a[f]))if("function"==typeof r.attr[o]){var d=r.attr[o].call(l,e,c);l.setAttr(o,d)}else l.setAttr(o,r.attr[o]);else{n="function"==typeof r.attr.transform?r.attr[o].call(l,e,c):r.attr.transform;for(var y in n)l[y](n[y])}for(var x=0,g=s.length;x<g;x+=1)if(o=s[x],"function"==typeof r.style[o]){var m=r.style[o].call(l,e,c);l.setStyle(o,m)}else l.setStyle(o,r.style[o]);return l.dataObj=e,l}),this}function it(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}function nt(t,e,r){var i=t.createShader(r);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var n=t.getShaderInfoLog(i);return console.error("*** Error compiling shader '"+i+"':"+n),t.deleteShader(i),null}return i}function ot(t,e){var r=t.createProgram();if(e.forEach(function(e){t.attachShader(r,e)}),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var i=t.getProgramInfoLog(r);return console.error("Error in program linking:"+i),t.deleteProgram(r),null}return r}function at(t,e){return ot(t,[nt(t,e.vertexShader,t.VERTEX_SHADER),nt(t,e.fragmentShader,t.FRAGMENT_SHADER)])}function st(t,e){this.attr=t||{},this.style=e||{}}function ht(t,e){this.attr=t||{},this.style=e||{}}function ct(t,e){this.attr=t||{},this.style=e||{}}function lt(t,e){this.attr=t||{},this.style=e||{}}function ut(t){return l(t.reduce(function(t,e){return t.push(e.x),t.push(e.y),t},[])).map(function(e){return t[e]})}function ft(t,e){this.attr=t,this.style=e,this.attr.points&&(this.attr.triangulatedPoints=ut(this.attr.points))}function pt(t,e){this.attr=t,this.style=e}function dt(t){return 0==(t&t-1)}function yt(t,e,r){var i=this;this.attr=e,this.style=r,this.image=new Image,this.image.onload=function(){if(this.crossOrigin="anonymous",Ot.vDomChanged(i.nodeExe.vDomIndex),!se[i.attr.src]){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i.image),dt(i.image.width)&&dt(i.image.height)?(console.log("mips"),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),se[i.attr.src]=e}},this.image.onerror=function(t){},this.attr.src&&(this.image.src=this.attr.src)}function xt(t,e){for(var r=void 0,i=0,n=e.length;i<n;i++)r=e[i],t.bindBuffer(r.bufferType,r.buffer),t.bufferData(r.bufferType,r.data,r.drawType),t.enableVertexAttribArray(r.attribute),t.vertexAttribPointer(r.attribute,r.size,r.valueType,!0,0,0)}function gt(t,e,r,i){return{bufferType:t[i.bufferType],buffer:t.createBuffer(),drawType:t[i.drawType],valueType:t[i.valueType],size:i.size,attribute:t.getAttribLocation(e,r),data:i.data}}function mt(t,e,r,i){return{type:i.type,data:i.data,attribute:t.getUniformLocation(e,r)}}function vt(t,e,r){this.ctx=t,this.dom={},this.shader=e,this.vDomIndex=r,this.program=at(t,e),this.uniforms={},this.drawArrays=e.drawArrays;for(var i in e.uniforms)this.uniforms[i]=mt(t,this.program,i,e.uniforms[i]);this.inputs=[];for(var n in e.attributes)this.inputs.push(gt(t,this.program,n,e.attributes[n]))}function bt(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=at(t,c("point")),this.colorBuffer=t.createBuffer(),this.sizeBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.sizeAttributeLocation=t.getAttribLocation(this.program,"a_size"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution"),this.translationUniformLocation=t.getUniformLocation(this.program,"u_translate"),this.scaleUniformLocation=t.getUniformLocation(this.program,"u_scale"),this.positionArray=[],this.colorArray=[],this.pointsSize=[],this.inputs=[{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.sizeBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.FLOAT,size:1,attribute:this.sizeAttributeLocation},{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]})}function At(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=at(t,c("rect")),this.colorBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution"),this.translationUniformLocation=t.getUniformLocation(this.program,"u_translate"),this.scaleUniformLocation=t.getUniformLocation(this.program,"u_scale"),this.positionArray=[],this.colorArray=[],this.inputs=[{data:this.colorArray,bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{data:new Float32Array(this.positionArray),bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]})}function wt(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=at(t,c("line")),this.colorBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution"),this.translationUniformLocation=t.getUniformLocation(this.program,"u_translate"),this.scaleUniformLocation=t.getUniformLocation(this.program,"u_scale"),this.positionArray=[],this.colorArray=[],this.inputs=[{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]})}function Bt(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=at(t,c("line")),this.colorBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution"),this.translationUniformLocation=t.getUniformLocation(this.program,"u_translate"),this.scaleUniformLocation=t.getUniformLocation(this.program,"u_scale"),this.polyLineArray=[],this.inputs=[{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]})}function St(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=at(t,c("line")),this.colorBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution"),this.translationUniformLocation=t.getUniformLocation(this.program,"u_translate"),this.scaleUniformLocation=t.getUniformLocation(this.program,"u_scale"),this.polygonArray=[],this.inputs=[{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]})}function Tt(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=at(t,c("circle")),this.colorBuffer=t.createBuffer(),this.radiusBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.colorAttributeLocation=t.getAttribLocation(this.program,"a_color"),this.radiusAttributeLocation=t.getAttribLocation(this.program,"a_radius"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution"),this.translationUniformLocation=t.getUniformLocation(this.program,"u_translate"),this.scaleUniformLocation=t.getUniformLocation(this.program,"u_scale"),this.positionArray=[],this.colorArray=[],this.radius=[],this.inputs=[{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.colorBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.UNSIGNED_BYTE,size:4,attribute:this.colorAttributeLocation},{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.radiusBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.FLOAT,size:1,attribute:this.radiusAttributeLocation},{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]})}function kt(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.program=at(t,c("image")),this.texture=t.createTexture(),this.texCoordBuffer=t.createBuffer(),this.positionBuffer=t.createBuffer(),this.positionAttributeLocation=t.getAttribLocation(this.program,"a_position"),this.texCoordAttributeLocation=t.getAttribLocation(this.program,"a_texCoord"),this.resolutionUniformLocation=t.getUniformLocation(this.program,"u_resolution"),this.translationUniformLocation=t.getUniformLocation(this.program,"u_translate"),this.scaleUniformLocation=t.getUniformLocation(this.program,"u_scale"),this.imagesArray=[],this.texArray=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this.inputs=[{bufferType:this.ctx.ARRAY_BUFFER,buffer:this.positionBuffer,drawType:this.ctx.DYNAMIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.positionAttributeLocation}],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]})}function Lt(t,e,r,i,n,o){var a=void 0;switch(this.ctx=t,i){case"rects":a=new At(t,e,r,n);break;case"points":a=new bt(t,e,r,n);break;case"lines":a=new wt(t,e,r,n);break;case"polylines":a=new Bt(t,e,r,n);break;case"polygons":a=new St(t,e,r,n);break;case"circles":a=new Tt(t,e,r,n);break;case"images":a=new kt(t,e,r,n);break;default:a=null}this.shader=a}function Et(t,e,r,i){switch(this.ctx=t,this.style=e.style?e.style:{},this.attr=e.attr?e.attr:{},this.id=r,this.nodeName=e.el,this.nodeType="WEBGL",this.children=[],this.ctx=t,this.vDomIndex=i,this.el=e.el,this.shaderType=e.shaderType,e.el){case"point":this.dom=new st(this.attr,this.style);break;case"rect":this.dom=new ht(this.attr,this.style);break;case"line":this.dom=new lt(this.attr,this.style);break;case"polyline":this.dom=new ct(this.attr,this.style);break;case"polygon":this.dom=new ft(this.attr,this.style);break;case"circle":this.dom=new pt(this.attr,this.style);break;case"image":this.dom=new yt(t,this.attr,this.style);break;case"group":this.dom=new Lt(this.ctx,this.attr,this.style,this.shaderType,this.vDomIndex,e.shaderObject);break;default:this.dom=null}this.dom.nodeExe=this,this.propChanged=!0}var Ct={},Dt=t("2D"),_t=r(),Ot=e(),Pt=0,It=0,jt=void 0,Rt={};Rt.push={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var e=0,r=t.length;e<r;e++)this.data.push(t[e]);if(this.config.action.enter){var i={};this.selector.split(",").forEach(function(e){i[e]=t}),this.config.action.enter.call(this,i)}},enumerable:!1,configurable:!1,writable:!1},Rt.pop={value:function(){var t=this,e=this.data.pop();if(this.config.action.exit){var r={};this.selector.split(",").forEach(function(i){r[i]=t.fetchEls(i,[e])}),this.config.action.exit.call(this,r)}},enumerable:!1,configurable:!1,writable:!1},Rt.remove={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);var e=this;if(this.config.action.exit){var r={};this.selector.split(",").forEach(function(i){r[i]=e.fetchEls(i,t)}),this.config.action.exit.call(this,r)}for(var i=0,n=t.length;i<n;i++)-1!==this.data.indexOf(t[i])&&this.data.splice(this.data.indexOf(t[i]),1)},enumerable:!1,configurable:!0,writable:!1},Rt.update={value:function(){var t=this;if(this.config.action.update){var e={};this.selector.split(",").forEach(function(r){e[r]=t.fetchEls(r,t.data)}),this.config.action.update.call(this,e)}},enumerable:!1,configurable:!0,writable:!1},Rt.join={value:function(t){D.call(this,t,this.selector,this.config)},enumerable:!1,configurable:!0,writable:!1};var Ft=function(t,e){var r=e.attr?e.attr:{},i=e.style?e.style:{},n=[],o=void 0;if("function"!=typeof r){for(var a in r)!function(i){if("transform"!==i){var a=r[i];"function"==typeof a?n[n.length]=function(e){t.setAttr(i,a.call(t,e))}:"d"===i?t.morphTo(e):n[n.length]=Gt(t,i,r[i])}else if("function"==typeof(o=r[i]))n[n.length]=Mt(t,i,o);else{var s=t.attr.transform;s||(t.attr.transform={});for(var h=Object.keys(r.transform),c=0,l=h.length;c<l;c+=1)n[n.length]=Ut(t,h[c],r.transform[h[c]])}}(a)}else n[n.length]=r.bind(t);if("function"!=typeof i)for(var s in i)n[n.length]=zt(t,s,i[s]);else n[n.length]=i.bind(t);return{run:function(t){for(var e=0,r=n.length;e<r;e+=1)n[e](t)},duration:e.duration,delay:e.delay?e.delay:0,end:e.end?e.end.bind(t,t.dataObj):null,loop:e.loop?e.loop:0,direction:e.direction?e.direction:"default",ease:e.ease?e.ease:"default"}},Mt=function(t,e,r){return function(i){t.setAttr(e,r.call(t,i))}},Ut=function(t,e,r){var i=[],n=t.attr.transform;return"function"==typeof r?function(i){t[e](r.call(t,i))}:(r.forEach(function(t,r){var o=void 0;o=n[e]&&void 0!==n[e][r]?n[e][r]:"scale"===e?1:0,i.push(Dt.intermediateValue.bind(null,o,t))}),function(r){t[e](i.map(function(t){return t(r)}))})},Gt=function(t,e,r){var i=t.attr[e];return function(n){t.setAttr(e,Dt.intermediateValue(i,r,n))}},zt=function(t,e,r){var i=void 0,n=void 0,o=void 0;if("function"==typeof r)return function(i){t.setStyle(e,r.call(t,t.dataObj,i))};if(i=t.style[e],isNaN(r)){if(s.isTypeColor(r)){var a=t instanceof Et?s.transitionObj(i,r):s.transition(i,r);return function(r){t.setStyle(e,a(r))}}i=i.match(/(\d+)/g),o=r.match(/(\d+)/g),n=r.match(/\D+$/),i=parseInt(i.length>0?i[0]:0,10),o=parseInt(o.length>0?o[0]:0,10),n=n.length>0?n[0]:"px"}else i=void 0!==t.style[e]?t.style[e]:1,o=r,n=0;return function(r){t.setStyle(e,Dt.intermediateValue(i,o,r)+n)}},Nt=function(t){return Ot.add(f(),Ft(this,t),_t(t.ease)),this},Yt=function(t){return Ft(this,t)},qt=function(t){for(var e=void 0,r=void 0,i=0;i<this.stack.length;i+=1)r={},e=this.stack[i],r=_(t,e,i),t.attr&&"function"!=typeof t.attr&&(r.attr=_(t.attr,e,i)),t.style&&"function"!=typeof t.style&&(r.style=_(t.style,e,i)),t.end&&(r.end=t.end),t.ease&&(r.ease=t.ease),e.animateTo(r);return this},Xt=function(t){for(var e=void 0,r=void 0,i=[],n=0;n<this.stack.length;n+=1)r={},e=this.stack[n],r=_(t,e,n),t.attr&&"function"!=typeof t.attr&&(r.attr=_(t.attr,e,n)),t.style&&"function"!=typeof t.style&&(r.style=_(t.style,e,n)),t.end&&(r.end=t.end),t.ease&&(r.ease=t.ease),i.push(e.animateExe(r));return i},Ht=function(t){for(var e=void 0,r=Object.keys(t),i=0,n=this.stack.length;i<n;i+=1){e=this.stack[i];for(var o={},a=0;a<r.length;a++){var s=t[r[a]];"function"==typeof s&&(s=s.call(e,e.dataObj,i)),o[r[a]]=s}e.animatePathTo(o)}return this},Vt=function(t){var e=void 0;if("function"!=typeof t)for(var r=0;r<this.stack.length;r+=1)e=this.stack[r],e.text(t);else for(var i=0;i<this.stack.length;i+=1)e=this.stack[i],e.text(t.call(e,e.dataObj,i));return this};O.prototype.exe=function(){return"url(#"+this.config.id+")"},O.prototype.linearGradient=function(){var t=this;return this.defs||(this.defs=this.pDom.createEl({el:"defs"})),this.linearEl=this.defs.join([1],"linearGradient",{action:{enter:function(e){this.createEls(e.linearGradient,{el:"linearGradient"}).setAttr({id:t.config.id,x1:t.config.x1+"%",y1:t.config.y1+"%",x2:t.config.x2+"%",y2:t.config.y2+"%"})},exit:function(t){t.linearGradient.remove()},update:function(e){e.linearGradient.setAttr({id:t.config.id,x1:t.config.x1+"%",y1:t.config.y1+"%",x2:t.config.x2+"%",y2:t.config.y2+"%"})}}}),this.linearEl=this.linearEl.fetchEl("linearGradient"),this.linearEl.fetchEls("stop").remove(),this.linearEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:function(t,e){return t.value+"%"},"stop-color":function(t,e){return t.color}}}),this},O.prototype.radialGradient=function(){var t=this;return this.defs||(this.defs=this.pDom.createEl({el:"defs"})),this.radialEl=this.defs.join([1],"radialGradient",{action:{enter:function(e){this.createEls(e.radialGradient,{el:"radialGradient"}).setAttr({id:t.config.id,cx:t.config.innerCircle.x+"%",cy:t.config.innerCircle.y+"%",r:t.config.outerCircle.r+"%",fx:t.config.outerCircle.x+"%",fy:t.config.outerCircle.y+"%"})},exit:function(t){t.radialGradient.remove()},update:function(e){e.radialGradient.setAttr({id:t.config.id,cx:t.config.innerCircle.x+"%",cy:t.config.innerCircle.y+"%",r:t.config.outerCircle.r+"%",fx:t.config.outerCircle.x+"%",fy:t.config.outerCircle.y+"%"})}}}),this.radialEl=this.radialEl.fetchEl("radialGradient"),this.radialEl.fetchEls("stop").remove(),this.radialEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:function(t,e){return t.value+"%"},"stop-color":function(t,e){return t.color}}}),this},O.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,"linear"===this.type?this.linearGradient():"radial"===this.type&&this.radialGradient())};var Wt={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Zt=function(t){return document.createElementNS(Wt.svg,t)},Qt=function(t,e,r,i){this.dom=t,this.nodeName=t.nodeName,this.attr={},this.style={},this.changedAttribute={},this.changedStyles={},this.id=r,this.nodeType="svg",this.dom.nodeId=r,this.children=[],this.vDomIndex=i,e.style&&this.setStyle(e.style),e.attr&&this.setAttr(e.attr)};Qt.prototype.node=function(){return this.execute(),this.dom},Qt.prototype.transFormAttributes=function(){var t=this;for(var e in t.changedAttribute)P(t,e);this.changedAttribute.transform&&I(t),this.changedAttribute={}},Qt.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.scale=t,this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Qt.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewX=[t],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Qt.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewY=[t],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Qt.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Qt.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)&&t.length>0?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Qt.prototype.setStyle=function(t,e){if(2===arguments.length)"function"==typeof e&&(e=e.call(this,this.dataObj)),this.style[t]=e,this.changedStyles[t]=e;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t))){var r=void 0;for(r in t)this.style[r]=t[r],this.changedStyles[r]=t[r]}return this.styleChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Qt.prototype.setAttr=function(t,e){if(2===arguments.length)"points"===t&&(e=j(e)),this.attr[t]=e,this.changedAttribute[t]=e;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r in t)"points"===r&&(t[r]=j(t[r])),this.attr[r]=t[r],this.changedAttribute[r]=t[r];return this.attrChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Qt.prototype.getAttr=function(t){return this.attr[t]},Qt.prototype.getStyle=function(t){return this.style[t]},Qt.prototype.execute=function(){if(this.styleChanged||this.attrChanged){this.transFormAttributes();for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();for(var r in this.changedStyles)this.changedStyles[r]instanceof O&&(this.changedStyles[r]=this.changedStyles[r].exe()),this.dom.style.setProperty(r,this.changedStyles[r],"");this.changedStyles={}}else for(var i=0,n=this.children.length;i<n;i+=1)this.children[i].execute()},Qt.prototype.child=function(t){var e=this.dom,r=this;if(t instanceof rt){for(var i=document.createDocumentFragment(),n=0,o=t.stack.length;n<o;n++)i.appendChild(t.stack[n].dom),t.stack[n].parentNode=r,this.children[this.children.length]=t.stack[n];e.appendChild(i)}else t instanceof Qt?(e.appendChild(t.dom),t.parentNode=r,this.children.push(t)):console.log("wrong node type");return this},Qt.prototype.fetchEl=y,Qt.prototype.fetchEls=d,Qt.prototype.animateTo=Nt,Qt.prototype.animateExe=Yt,Qt.prototype.animatePathTo=h.animatePathTo,Qt.prototype.morphTo=h.morphTo,Qt.prototype.exec=function(t){return"function"!=typeof t&&console.Error("Wrong Exe type"),t.call(this,this.dataObj),this},Qt.prototype.createRadialGradient=function(t){var e=new O(t,"radial",this);return e.radialGradient(),e},Qt.prototype.createLinearGradient=function(t){var e=new O(t,"linear",this);return e.linearGradient(),e},Qt.prototype.join=D,Qt.prototype.on=function(t,e){var r=e.bind(this),i=this;return this.dom.addEventListener(t,function(t){r(i.dataObj,t)}),this},Qt.prototype.html=function(t){return arguments.length?(this.dom.innerHTML(t),this):this.dom.innerHTML},Qt.prototype.text=function(t){return arguments.length?(this.attr.text=t,this.changedAttribute.text=t,this):this.attr.text},Qt.prototype.remove=function(){this.parentNode.removeChild(this)},Qt.prototype.createEls=function(t,e){var r=new rt({type:"SVG"},t,e,this.vDomIndex);return this.child(r),Ot.vDomChanged(this.vDomIndex),r},Qt.prototype.createEl=function(t){var e=R(t,this.vDomIndex);return this.child(e),Ot.vDomChanged(this.vDomIndex),e},Qt.prototype.removeChild=function(t){var e=this.children,r=e.indexOf(t);-1!==r&&this.dom.removeChild(e.splice(r,1)[0].dom)},z.prototype.exe=function(t,e){return"linear"===this.type&&"percent"===this.mode?this.linearGradient(t,e):"linear"===this.type&&"absolute"===this.mode?this.absoluteLinearGradient(t):"radial"===this.type&&"percent"===this.mode?this.radialGradient(t,e):"radial"===this.type&&"absolute"===this.mode?this.absoluteRadialGradient(t):void console.Error("wrong Gradiant type")},z.prototype.linearGradient=function(t,e){var r=t.createLinearGradient(e.x+e.width*(this.config.x1/100),e.y+e.height*(this.config.y1/100),e.x+e.width*(this.config.x2/100),e.y+e.height*(this.config.y2/100));return this.config.colorStops.forEach(function(t){r.addColorStop(t.value/100,t.color)}),r},z.prototype.absoluteLinearGradient=function(t){var e=t.createLinearGradient(this.config.x1,this.config.y1,this.config.x2,this.config.y2);return this.config.colorStops.forEach(function(t){e.addColorStop(t.value,t.color)}),e},z.prototype.radialGradient=function(t,e){var r=t.createRadialGradient(e.x+e.width*(this.config.innerCircle.x/100),e.y+e.height*(this.config.innerCircle.y/100),e.width>e.height?e.width*this.config.innerCircle.r/100:e.height*this.config.innerCircle.r/100,e.x+e.width*(this.config.outerCircle.x/100),e.y+e.height*(this.config.outerCircle.y/100),e.width>e.height?e.width*this.config.outerCircle.r/100:e.height*this.config.outerCircle.r/100);return this.config.colorStops.forEach(function(t){r.addColorStop(t.value/100,t.color)}),r},z.prototype.absoluteRadialGradient=function(t,e){var r=t.createRadialGradient(this.config.innerCircle.x,this.config.innerCircle.y,this.config.innerCircle.r,this.config.outerCircle.x,this.config.outerCircle.y,this.config.outerCircle.r);return this.config.colorStops.forEach(function(t){r.addColorStop(t.value/100,t.color)}),r},z.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,this)},q.prototype.get=function(t){var e=(t.y-1)*(4*this.width)+4*(t.x-1);return"rgba("+this.pixels[e]+", "+this.pixels[e+1]+", "+this.pixels[e+2]+", "+this.pixels[e+3]+")"},q.prototype.put=function(t,e){var r=(e.y-1)*(4*this.width)+4*(e.x-1);return this.pixels[r]=t[0],this.pixels[r+1]=t[1],this.pixels[r+2]=t[2],this.pixels[r+3]=t[3],this},V.prototype.exe=function(){return this.pattern},Q.prototype={render:F,on:E,setAttr:U,setStyle:G,applyStyles:Z};var $t={};$.prototype=new Q,$.prototype.constructor=$,$.prototype.setAttr=function(t,e){var r=this;if(this.attr[t]=e,"src"===t&&(this.image.src=e),"clip"===t){this.rImageObj||(this.rImageObj=H(r.attr.width,r.attr.height));var i=this.rImageObj.getContext("2d"),n=this.attr,o=n.clip,a=n.width,s=n.height,h=o.sx,c=o.sy,l=o.swidth,u=o.sheight;h=void 0!==h?h:0,c=void 0!==c?c:0,l=void 0!==l?l:a,u=void 0!==u?u:s,i.clearRect(0,0,a,s),this.imageObj&&i.drawImage(this.imageObj,h,c,l,u,0,0,a,s)}if(r.attr.pixels){var f=void 0;f=r.rImageObj.getContext("2d"),f.putImageData(X.call(r,r.attr.pixels),0,0)}Ot.vDomChanged(this.nodeExe.vDomIndex)},$.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform,s=t.attr,h=s.x,c=s.y,l=s.width,u=s.height;if(a){if(a.translate){var f=o(a.translate,2);e=f[0],r=f[1]}a.scale&&(i=void 0!==a.scale[0]?a.scale[0]:1,n=void 0!==a.scale[1]?a.scale[1]:i)}t.BBox={x:(e+h)*i,y:(r+c)*n,width:(l||0)*i,height:(u||0)*n},a&&a.rotate?t.BBoxHit=Dt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},$.prototype.execute=function(){var t=this.attr,e=t.width,r=t.height,i=t.x,n=t.y;this.imageObj&&this.ctx.drawImage(this.rImageObj?this.rImageObj:this.imageObj,i||0,n||0,e,r)},$.prototype.applyStyles=function(){},$.prototype.in=function(t){return t.x>=this.attr.x&&t.x<=this.attr.x+this.attr.width&&t.y>=this.attr.y&&t.y<=this.attr.y+this.attr.height},K.prototype=new Q,K.prototype.constructor=K,K.prototype.text=function(t){this.attr.text=t},K.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=1,s=t.attr.transform;if(s&&s.translate){var h=o(s.translate,2);e=h[0],r=h[1]}if(s&&s.scale){var c=o(s.scale,2);i=c[0],n=c[1]}this.style.font&&(this.ctx.font=this.style.font,a=parseInt(this.style.font,10)),t.BBox={x:e+t.attr.x*i,y:r+(t.attr.y-a+5)*n,width:this.ctx.measureText(this.attr.text).width*i,height:a*n},s&&s.rotate?t.BBoxHit=Dt.rotateBBox(this.BBox,s):t.BBoxHit=this.BBox},K.prototype.execute=function(){void 0!==this.attr.text&&null!==this.attr.text&&("#000000"!==this.ctx.fillStyle&&this.ctx.fillText(this.attr.text,this.attr.x,this.attr.y),"#000000"!==this.ctx.strokeStyle&&this.ctx.strokeText(this.attr.text,this.attr.x,this.attr.y))},K.prototype.applyStyles=function(){},K.prototype.in=function(t){return t.x>=this.attr.x&&t.x<=this.attr.x+this.attr.width&&t.y>=this.attr.y&&t.y<=this.attr.y+this.attr.height};var Kt=function(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="circle",i.stack=[i]};Kt.prototype=new Q,Kt.prototype.constructor=Kt,Kt.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a){if(a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}}t.BBox={x:(e+(t.attr.cx-t.attr.r))*i,y:(r+(t.attr.cy-t.attr.r))*n,width:2*t.attr.r*i,height:2*t.attr.r*n},a&&a.rotate?t.BBoxHit=Dt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},Kt.prototype.execute=function(){this.ctx.beginPath(),this.ctx.arc(this.attr.cx,this.attr.cy,this.attr.r,0,2*Math.PI,!1),this.applyStyles(),this.ctx.closePath()},Kt.prototype.in=function(t){return Math.sqrt((t.x-this.attr.cx)*(t.x-this.attr.cx)+(t.y-this.attr.cy)*(t.y-this.attr.cy))<=this.attr.r};var Jt=function(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="line",i.stack=[i]};Jt.prototype=new Q,Jt.prototype.constructor=Jt,Jt.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a&&a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a&&a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}t.BBox={x:e+(t.attr.x1<t.attr.x2?t.attr.x1:t.attr.x2)*i,y:r+(t.attr.y1<t.attr.y2?t.attr.y1:t.attr.y2)*n,width:Math.abs(t.attr.x2-t.attr.x1)*i,height:Math.abs(t.attr.y2-t.attr.y1)*n},a&&a.rotate?t.BBoxHit=Dt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},Jt.prototype.execute=function(){var t=this.ctx;t.beginPath(),t.moveTo(this.attr.x1,this.attr.y1),t.lineTo(this.attr.x2,this.attr.y2),this.applyStyles(),t.closePath()},Jt.prototype.in=function(t){return parseFloat(Dt.getDistance({x:this.attr.x1,y:this.attr.y1},t)+Dt.getDistance(t,{x:this.attr.x2,y:this.attr.y2})).toFixed(1)===parseFloat(Dt.getDistance({x:this.attr.x1,y:this.attr.y1},{x:this.attr.x2,y:this.attr.y2})).toFixed(1)},J.prototype=new Q,J.constructor=J,J.prototype.execute=function(){var t=this;this.attr.points&&(this.ctx.beginPath(),this.attr.points.forEach(function(e,r){0===r?t.ctx.moveTo(e.x,e.y):t.ctx.lineTo(e.x,e.y)}),this.applyStyles(),this.ctx.closePath())},J.prototype.updateBBox=M,J.prototype.in=function(t){for(var e=!1,r=0,i=this.attr.points.length;r<=i-2;r++){var n=this.attr.points[r],o=this.attr.points[r+1];e=e||parseFloat(Dt.getDistance({x:n.x,y:n.y},t)+Dt.getDistance(t,{x:o.x,y:o.y})).toFixed(1)===parseFloat(Dt.getDistance({x:n.x,y:n.y},{x:o.x,y:o.y})).toFixed(1)}return e};var te=function(t,e,r){var i=this;return i.ctx=t,i.angle=0,i.nodeName="path",i.attr=e,i.style=r,i.attr.d&&(h.isTypePath(i.attr.d)?(i.path=i.attr.d,i.attr.d=i.attr.d.fetchPathString()):i.path=Ct.Path(i.attr.d),i.pathNode=new Path2D(i.attr.d)),i.stack=[i],i};te.prototype=new Q,te.prototype.constructor=te,te.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a&&a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a&&a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}t.BBox=t.path?Dt.getBBox(t.path.stack):{x:0,y:0,width:0,height:0},t.BBox.x=e+t.BBox.x*i,t.BBox.y=r+t.BBox.y*n,t.BBox.width*=i,t.BBox.height*=n,a&&a.rotate?t.BBoxHit=Dt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},te.prototype.setAttr=function(t,e){this.attr[t]=e,"d"===t&&(h.isTypePath(e)?(this.path=e,this.attr.d=e.fetchPathString()):this.path=Ct.Path(this.attr.d),this.pathNode=new Path2D(this.attr.d))},te.prototype.getPointAtLength=function(t){return this.path?this.path.getPointAtLength(t):{x:0,y:0}},te.prototype.getAngleAtLength=function(t){return this.path?this.path.getAngleAtLength(t):0},te.prototype.getTotalLength=function(){return this.path?this.path.getTotalLength():0},te.prototype.execute=function(){this.attr.d&&("#000000"!==this.ctx.fillStyle&&this.ctx.fill(this.pathNode),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke(this.pathNode))},te.prototype.applyStyles=function(){},te.prototype.in=function(t){var e=!1;return this.attr.d?(this.ctx.save(),this.ctx.scale(1/jt,1/jt),e=this.style.fillStyle?this.ctx.isPointInPath(this.pathNode,t.x,t.y):e,this.ctx.restore(),e):e};var ee=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="polygon",i.attr=e,i.style=r,i.stack=[i],e.points&&(i.polygon=tt(i.attr.points)),this};ee.prototype=new Q,ee.prototype.constructor=ee,ee.prototype.setAttr=function(t,e){this.attr[t]=e,"points"===t&&(this.polygon=tt(this.attr[t]),this.attr.points=this.polygon.points)},ee.prototype.updateBBox=M,ee.prototype.execute=function(){this.attr.points&&("#000000"!==this.ctx.fillStyle&&this.ctx.fill(this.polygon.path),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke(this.polygon.path))},ee.prototype.applyStyles=function(){},ee.prototype.in=function(t){var e=!1;return this.attr.points?(this.ctx.save(),this.ctx.scale(1/jt,1/jt),e=this.style.fillStyle?this.ctx.isPointInPath(this.polygon.path,t.x,t.y):e,this.ctx.restore(),e):e};var re=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="ellipse",i.attr=e,i.style=r,i.stack=[i],this};re.prototype=new Q,re.prototype.constructor=re,re.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a&&a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a&&a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}t.BBox={x:e+(t.attr.cx-t.attr.rx)*i,y:r+(t.attr.cy-t.attr.ry)*n,width:2*t.attr.rx*i,height:2*t.attr.ry*n},a&&a.rotate?t.BBoxHit=Dt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},re.prototype.execute=function(){var t=this.ctx;t.beginPath(),t.ellipse(this.attr.cx,this.attr.cy,this.attr.rx,this.attr.ry,0,0,2*Math.PI),this.applyStyles(),t.closePath()},re.prototype.in=function(t){var e=this.attr,r=e.cx,i=e.cy,n=e.rx,o=e.ry;return(t.x-r)*(t.x-r)/(n*n)+(t.y-i)*(t.y-i)/(o*o)<=1};var ie=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="rect",i.attr=e,i.style=r,i.stack=[i],this};ie.prototype=new Q,ie.prototype.constructor=ie,ie.prototype.updateBBox=function(){var t=this,e=0,r=0,i=1,n=1,a=t.attr.transform;if(a&&a.translate){var s=o(a.translate,2);e=s[0],r=s[1]}if(a&&a.scale){var h=o(a.scale,2);i=h[0],n=h[1]}t.BBox={x:e+t.attr.x*i,y:r+t.attr.y*n,width:t.attr.width*i,height:t.attr.height*n},a&&a.rotate?t.BBoxHit=Dt.rotateBBox(this.BBox,a):t.BBoxHit=this.BBox},ie.prototype.applyStyles=function(){},ie.prototype.execute=function(){var t=this.ctx;"#000000"!==t.strokeStyle&&t.strokeRect(this.attr.x,this.attr.y,this.attr.width,this.attr.height),"#000000"!==t.fillStyle&&t.fillRect(this.attr.x,this.attr.y,this.attr.width,this.attr.height)},ie.prototype.in=function(t){var e=this.attr,r=e.x,i=e.y,n=e.width,o=e.height;return t.x>=r&&t.x<=r+n&&t.y>=i&&t.y<=i+o};var ne=function(t,e,r){var i=this;return i.nodeName="group",i.ctx=t,i.attr=e,i.style=r,i.stack=new Array(0),this};ne.prototype=new Q,ne.prototype.constructor=ne,ne.prototype.updateBBox=function(t){var e=this,r=void 0,i=void 0,n=void 0,o=void 0,a=0,s=0,h=1,c=1,l=e.attr.transform;if(e.BBox={},l&&l.translate&&(a=void 0!==l.translate[0]?l.translate[0]:0,s=void 0!==l.translate[1]?l.translate[1]:a),l&&e.attr.transform.scale&&"rootNode"!==e.attr.id&&(h=void 0!==l.scale[0]?l.scale[0]:1,c=void 0!==l.scale[1]?l.scale[1]:h),t&&t.length>0)for(var u=void 0,f=void 0,p=void 0,d=0;d<t.length;d+=1)u=t[d],f=u.dom.BBoxHit.x,p=u.dom.BBoxHit.y,r=void 0===r?f:r>f?f:r,n=void 0===n?p:n>p?p:n,i=void 0===i?f+u.dom.BBoxHit.width:i<f+u.dom.BBoxHit.width?f+u.dom.BBoxHit.width:i,o=void 0===o?p+u.dom.BBoxHit.height:o<p+u.dom.BBoxHit.height?p+u.dom.BBoxHit.height:o;r=void 0===r?0:r,n=void 0===n?0:n,i=void 0===i?0:i,o=void 0===o?0:o,e.BBox.x=a+r*h,e.BBox.y=s+n*c,e.BBox.width=Math.abs(i-r)*h,e.BBox.height=Math.abs(o-n)*c,e.attr.transform&&e.attr.transform.rotate?e.BBoxHit=Dt.rotateBBox(this.BBox,this.attr.transform):e.BBoxHit=this.BBox},ne.prototype.child=function(t){var e=this,r=t;r instanceof oe?(r.dom.parent=e,e.stack[e.stack.length]=r):r instanceof rt?r.stack.forEach(function(t){t.dom.parent=e,e.stack[e.stack.length]=t}):console.log("wrong Object")},ne.prototype.in=function(t){var e=this,r={x:t.x,y:t.y},i=this.BBox,n=e.attr.transform,a=0,s=0,h=1,c=1;if(n&&n.translate){var l=o(n.translate,2);a=l[0],s=l[1]}return n&&n.scale&&(h=void 0!==n.scale[0]?n.scale[0]:1,c=void 0!==n.scale[1]?n.scale[1]:h),r.x>=(i.x-a)/h&&r.x<=(i.x-a+i.width)/h&&r.y>=(i.y-s)/c&&r.y<=(i.y-s+i.height)/c};var oe=function(t,e,r,i){switch(this.style={},this.attr={},this.id=r,this.nodeName=e.el,this.nodeType="CANVAS",this.children=[],this.ctx=t,this.vDomIndex=i,this.bbox=void 0===e.bbox||e.bbox,e.el){case"circle":this.dom=new Kt(this.ctx,this.attr,this.style);break;case"rect":this.dom=new ie(this.ctx,this.attr,this.style);break;case"line":this.dom=new Jt(this.ctx,this.attr,this.style);break;case"polyline":this.dom=new J(this.ctx,this.attr,this.style);break;case"path":this.dom=new te(this.ctx,this.attr,this.style);break;case"group":this.dom=new ne(this.ctx,this.attr,this.style);break;case"text":this.dom=new K(this.ctx,this.attr,this.style);break;case"image":this.dom=new $(this.ctx,this.attr,this.style,e.onload,e.onerror,this);break;case"polygon":this.dom=new ee(this.ctx,this.attr,this.style,this);break;case"ellipse":this.dom=new re(this.ctx,this.attr,this.style,this);break;default:this.dom=null}this.dom.nodeExe=this,this.BBoxUpdate=!0,e.style&&this.setStyle(e.style),e.attr&&this.setAttr(e.attr)};oe.prototype.node=function(){return this.updateBBox(),this.dom},oe.prototype.stylesExe=function(){var t=void 0,e=void 0;for(e in this.style)"function"==typeof this.style[e]||this.style[e]instanceof z||this.style[e]instanceof V?"function"==typeof this.style[e]?(this.style[e]=this.style[e].call(this,this.dataObj),t=this.style[e]):this.style[e]instanceof z||this.style[e]instanceof V?t=this.style[e].exe(this.ctx,this.dom.BBox):console.log("unkonwn Style"):t=this.style[e],"function"!=typeof this.ctx[e]?this.ctx[e]=t:"function"==typeof this.ctx[e]?this.ctx[e](t):console.log("junk comp")},oe.prototype.remove=function(){var t=this.dom.parent.children,e=t.indexOf(this);-1!==e&&t.splice(e,1),this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex)},oe.prototype.attributesExe=function(){this.dom.render(this.attr)},oe.prototype.setStyle=function(t,e){if(2===arguments.length)this.style[t]=et(e);else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r=Object.keys(t),i=0,n=r.length;i<n;i+=1)this.style[r[i]]=et(t[r[i]]);return Ot.vDomChanged(this.vDomIndex),this},oe.prototype.setAttr=function(t,e){if(2===arguments.length)this.attr[t]=e,this.dom.setAttr(t,e);else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r=Object.keys(t),i=0;i<r.length;i+=1)this.attr[r[i]]=t[r[i]],this.dom.setAttr(r[i],t[r[i]]);return this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex),this},oe.prototype.getAttr=function(t){return this.attr[t]},oe.prototype.getStyle=function(t){return this.style[t]},oe.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex),this},oe.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),t.length<1?null:(this.attr.transform.scale=[t[0],t[1]?t[1]:t[0]],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex),this)},oe.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex),this},oe.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewX=[t],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex),this},oe.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewY=[t],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex),this},oe.prototype.execute=function(){if(this.ctx.save(),this.stylesExe(),this.attributesExe(),this.dom instanceof ne)for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();this.ctx.restore()},oe.prototype.child=function(t){var e=this,r=t;if(e.dom instanceof ne)for(var i=0;i<r.length;i+=1)r[i].dom.parent=e,e.children[e.children.length]=r[i];else console.error("Trying to insert child to nonGroup Element");return this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex),e},oe.prototype.fetchEl=y,oe.prototype.fetchEls=d,oe.prototype.updateBBox=function(){for(var t=void 0,e=0,r=this.children.length;e<r;e+=1)this.bbox&&(t=this.children[e].updateBBox()||t);return!(!this.bbox||!this.BBoxUpdate&&!t)&&(this.dom.updateBBox(this.children),this.BBoxUpdate=!1,!0)},oe.prototype.in=function(t){return this.dom.in(t)},oe.prototype.on=function(t,e){return this.dom.on(t,e),this},oe.prototype.exec=function(t){return"function"!=typeof t&&console.Error("Wrong Exe type"),t.call(this,this.dataObj),this},oe.prototype.animateTo=Nt,oe.prototype.animateExe=Yt,oe.prototype.animatePathTo=h.animatePathTo,oe.prototype.morphTo=h.morphTo,oe.prototype.vDomIndex=null,oe.prototype.join=D,oe.prototype.createRadialGradient=Y,oe.prototype.createLinearGradient=N,oe.prototype.createPattern=W,oe.prototype.createEls=function(t,e){var r=new rt({type:"CANVAS",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(r.stack),Ot.vDomChanged(this.vDomIndex),r},oe.prototype.text=function(t){return this.dom instanceof K&&this.dom.text(t),Ot.vDomChanged(this.vDomIndex),this},oe.prototype.createEl=function(t){var e=new oe(this.dom.ctx,t,u(),this.vDomIndex);return this.child([e]),Ot.vDomChanged(this.vDomIndex),e},oe.prototype.removeChild=function(t){var e=-1;if(this.children.forEach(function(r,i){r===t&&(e=i)}),-1!==e){var r=this.children.splice(e,1)[0];this.dom.removeChild(r.dom)}Ot.vDomChanged(this.vDomIndex)},rt.prototype={createEls:m,createEl:g,forEach:v,setAttr:b,fetchEls:p,setStyle:A,translate:w,rotate:B,scale:S,exec:T,animateTo:qt,animateExe:Xt,animatePathTo:Ht,remove:L,text:Vt,join:x,on:k},rt.prototype.wrapper=function(t){var e=this;if(t)for(var r=0,i=t.length;r<i;r++){var n=t[r];n instanceof Qt||n instanceof oe||n instanceof Et||n instanceof rt?e.stack.push(n):e.stack.push(new Qt(n,{},u()))}return this};var ae={dragStart:function(t){return"function"==typeof t&&(this.onDragStart=t),this},drag:function(t){return"function"==typeof t&&(this.onDrag=t),this},dragEnd:function(t){return"function"==typeof t&&(this.onDragEnd=t),this}};Ct.dragEvent=function(){return Object.create(ae)},Ct.CanvasLayer=function(t){function e(){var t=i.width?i.width:this.container.clientWidth,e=i.height?i.height:this.container.clientHeight;if(this.domEl.setAttribute("height",e*o),this.domEl.setAttribute("width",t*o),this.domEl.style.height=e+"px",this.domEl.style.width=t+"px",i.rescale){var r=t/this.width,n=e/this.height;this.scale([r,n])}else this.execute();this.height=e,this.width=t}function r(){i.resize&&"function"==typeof i.resize&&i.resize(),g.resize()}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=void 0,s=void 0,h=document.querySelector(t),c=i.height?i.height:h.clientHeight,l=i.width?i.width:h.clientWidth,f=document.createElement("canvas"),p=f.getContext("2d");jt=it(p),o=jt;var d="clear"!==i.onClear&&i.onClear?i.onClear:function(t){t.clearRect(0,0,l*jt,c*jt)};f.setAttribute("height",c*jt),f.setAttribute("width",l*jt),f.style.height=c+"px",f.style.width=l+"px",f.style.position="absolute",h.appendChild(f);var y=new n,x=Ot.addVdom(y),g=new oe(p,{el:"group",attr:{id:"rootNode"}},u(),x),m=g.execute.bind(g);return g.container=h,g.domEl=f,g.height=c,g.width=l,g.type="CANVAS",g.execute=function(){d(p),p.setTransform(jt,0,0,jt,0,0),g.updateBBox(),m()},g.setAttr=function(t,r){if(2===arguments.length)i[t]=r;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var n=Object.keys(t),o=0,s=n.length;o<s;o+=1)i[n[o]]=t[n[o]];e.call(this)},g.resize=e,window.addEventListener("resize",r),g.destroy=function(){window.removeEventListener("resize",r),f.remove(),Ot.removeVdom(y)},y.root(g),(i.events||void 0===i.events)&&(h.addEventListener("mousemove",function(t){if(t.preventDefault(),s&&s.dom.drag&&s.dom.drag.dragStartFlag&&s.dom.drag.onDrag){var e=s.dom.drag.event;s.dom.drag.event&&(e.dx=t.offsetX-e.x,e.dy=t.offsetY-e.y),e.x=t.offsetX,e.y=t.offsetY,s.dom.drag.event=e,s.dom.drag.onDrag.call(s,s.dataObj,e)}else{var r=y.eventsCheck([g],{x:t.offsetX,y:t.offsetY},t);if(s&&r!==s&&((s.dom.mouseout||s.dom.mouseleave)&&s.hovered&&(s.dom.mouseout&&s.dom.mouseout.call(s,s.dataObj,t),s.dom.mouseleave&&s.dom.mouseleave.call(s,s.dataObj,t)),s.hovered=!1,s.dom.drag&&s.dom.drag.dragStartFlag&&(s.dom.drag.dragStartFlag=!1,s.dom.drag.onDragEnd.call(s,s.dataObj,t),s.dom.drag.event=null)),s&&r===s&&s.dom.drag&&s.dom.drag.dragStartFlag&&s.dom.drag.onDrag){var i=s.dom.drag.event;s.dom.drag.event&&(i.dx=t.offsetX-i.x,i.dy=t.offsetY-i.y),i.x=t.offsetX,i.y=t.offsetY,s.dom.drag.event=i,s.dom.drag.onDrag.call(s,s.dataObj,i)}r?(s=r,!s.dom.mouseover&&!s.dom.mouseenter||s.hovered||(s.dom.mouseover&&s.dom.mouseover.call(s,s.dataObj,t),s.dom.mouseenter&&s.dom.mouseenter.call(s,s.dataObj,t),s.hovered=!0),s.dom.mousemove&&s.dom.mousemove.call(s,s.dataObj,t)):s=void 0}}),h.addEventListener("click",function(t){t.preventDefault(),s&&s.dom.click&&s.dom.click.call(s,s.dataObj,t)}),h.addEventListener("dblclick",function(t){s&&s.dom.dblclick&&s.dom.dblclick.call(s,s.dataObj,t)}),h.addEventListener("mousedown",function(t){if(t.preventDefault(),s&&s.dom.mousedown&&(s.dom.mousedown.call(s,s.dataObj,t),s.down=!0),s&&s.dom.drag&&s.dom.drag.onDragStart){s.dom.drag.dragStartFlag=!0,s.dom.drag.onDragStart.call(s,s.dataObj,t);var e={};e.x=t.offsetX,e.y=t.offsetY,e.dx=0,e.dy=0,s.dom.drag.event=e}}),h.addEventListener("mouseup",function(t){t.preventDefault(),s&&s.dom.mouseup&&s.down&&(s.dom.mouseup.call(s,s.dataObj),s.down=!1),s&&s.dom.drag&&s.dom.drag.dragStartFlag&&s.dom.drag.onDragEnd&&(s.dom.drag.dragStartFlag=!1,s.dom.drag.event=null,s.dom.drag.onDragEnd.call(s,s.dataObj,t)),s=null}),h.addEventListener("mouseleave",function(t){t.preventDefault(),s&&s.dom.mouseleave&&s.dom.mouseleave.call(s,s.dataObj,t),s&&s.dom.onDragEnd&&s.dom.drag.dragStartFlag&&(s.dom.drag.dragStartFlag=!1,s.dom.drag.event=null,s.dom.drag.onDragEnd.call(s,s.dataObj,t)),s=null}),h.addEventListener("contextmenu",function(t){t.preventDefault(),s&&s.dom.contextmenu&&s.dom.contextmenu.call(s,s.dataObj)})),Ot.execute(),g},Ct.SVGLayer=function(t){function e(){var t=i.width?i.width:this.container.clientWidth,e=i.height?i.height:this.container.clientHeight,r=t/this.width,n=e/this.height;i&&i.rescale&&this.scale([r,n]),this.dom.setAttribute("height",e),this.dom.setAttribute("width",t)}function r(){i.resize&&"function"==typeof i.resize&&i.resize(),e.call(p)}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new n,s=Ot.addVdom(o),h=document.querySelector(t),c=i.height?i.height:h.clientHeight,l=i.width?i.width:h.clientWidth,f=document.createElementNS(Wt.svg,"svg");f.setAttribute("height",c),f.setAttribute("width",l),f.style.position="absolute",h.appendChild(f);var p=new Qt(f,{},u(),s);return p.container=h,p.type="SVG",p.width=l,p.height=c,o.root(p),p.setAttr=function(t,r){if(2===arguments.length)i[t]=r;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var n=Object.keys(t),o=0,s=n.length;o<s;o+=1)i[n[o]]=t[n[o]];e.call(this)},window.addEventListener("resize",r),p.destroy=function(){window.removeEventListener("resize",r),f.remove(),Ot.removeVdom(o)},Ot.execute(),p},st.prototype.setAttr=function(t,e){this.attr[t]=e},ht.prototype.setAttr=function(t,e){this.attr[t]=e},ct.prototype.setAttr=function(t,e){this.attr[t]=e},ct.prototype.getAttr=function(t){return this.attr[t]},ct.prototype.setStyle=function(t,e){this.style[t]=e},ct.prototype.getStyle=function(t){return this.style[t]},lt.prototype.setAttr=function(t,e){this.attr[t]=e},lt.prototype.getAttr=function(t){return this.attr[t]},lt.prototype.setStyle=function(t,e){this.style[t]=e},lt.prototype.getStyle=function(t){return this.style[t]},ft.prototype.setAttr=function(t,e){"points"===t&&(this.attr.triangulatedPoints=ut(e))},ft.prototype.getAttr=function(t){return this.attr[t]},ft.prototype.getStyle=function(t){return this.style[t]},pt.prototype.setAttr=function(t,e){this.attr[t]=e},pt.prototype.getAttr=function(t){return this.attr[t]},pt.prototype.getStyle=function(t){return this.style[t]};var se={};yt.prototype.setAttr=function(t,e){this.attr[t]=e,"src"===t&&(this.image.src=this.attr.src)},yt.prototype.getAttr=function(t){return this.attr[t]},yt.prototype.getStyle=function(t){return this.style[t]};var he={r:0,g:0,b:0,a:255};return vt.prototype.execute=function(){this.ctx.useProgram(this.program);for(var t in this.uniforms)this.ctx[this.uniforms[t].type](this.uniforms[t].attribute,this.uniforms[t].data);xt(this.ctx,this.inputs);for(var e in this.drawArrays)this.ctx.drawArrays(this.ctx[this.drawArrays[e].type],this.drawArrays[e].start,this.drawArrays[e].end)},vt.prototype.addUniform=function(t,e){this.uniforms[t]=e},vt.prototype.addAttribute=function(t,e){this.attribute[t]=e},vt.prototype.setAttribute=function(t,e){},vt.prototype.setUniformData=function(t,e){this.uniforms[t].data=e,Ot.vDomChanged(this.vDomIndex)},bt.prototype.remove=function(t){this.positionArray.splice(2*t,2),this.pointsSize.splice(t,1),this.colorArray.splice(4*t,4)},bt.prototype.execute=function(t){for(var e=this.positionArray,r=this.colorArray,i=this.pointsSize,n=void 0,o=void 0,a=!1,s=!1,h=0,c=t.length;h<c;h++)n=t[h],n.propChanged&&(e[2*h]=n.attr.x,e[2*h+1]=n.attr.y,i[h]=(n.attr.size||1)*jt,s=!0,n.propChanged=!1),n.styleChanged&&(o=n.style.fill||he,r[4*h]=o.r,r[4*h+1]=o.g,r[4*h+2]=o.b,r[4*h+3]=void 0===o.a?255:o.a,a=!0,n.styleChanged=!1);s&&(this.inputs[2].data=new Float32Array(e),this.inputs[1].data=new Float32Array(i)),a&&(this.inputs[0].data=new Uint8Array(r)),this.attr.transform.scale||(this.attr.transform.scale=[1,1]),this.attr.transform.translate||(this.attr.transform.translate=[0,0]),this.ctx.useProgram(this.program),xt(this.ctx,this.inputs),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width/jt,this.ctx.canvas.height/jt),this.ctx.uniform2fv(this.translationUniformLocation,[this.attr.transform.translate[0],this.attr.transform.translate[1]]),this.ctx.uniform2fv(this.scaleUniformLocation,[this.attr.transform.scale[0],this.attr.transform.scale[1]]),this.ctx.drawArrays(this.ctx.POINTS,0,e.length/2)},At.prototype.remove=function(t){this.positionArray.splice(12*t,12),this.colorArray.splice(24*t,24)},At.prototype.execute=function(t){for(var e=this.positionArray,r=this.colorArray,i=void 0,n=void 0,o=void 0,a=void 0,s=void 0,h=void 0,c=void 0,l=void 0,u=void 0,f=void 0,p=void 0,d=void 0,y=0,x=t.length;y<x;y++)f=t[y],f.propChanged&&(h=f.attr.x,c=h+f.attr.width,l=f.attr.y,u=l+f.attr.height,d=12*y,e[d]=e[d+4]=e[d+6]=h,e[d+1]=e[d+3]=e[d+9]=l,e[d+2]=e[d+8]=e[d+10]=c,e[d+5]=e[d+7]=e[d+11]=u,f.propChanged=!1),f.styleChanged&&(i=f.style.fill||he,n=i.r,o=i.g,a=i.b,s=void 0===i.a?255:i.a,p=24*y,r[p]=r[p+4]=r[p+8]=r[p+12]=r[p+16]=r[p+20]=n,r[p+1]=r[p+5]=r[p+9]=r[p+13]=r[p+17]=r[p+21]=o,r[p+2]=r[p+6]=r[p+10]=r[p+14]=r[p+18]=r[p+22]=a,r[p+3]=r[p+7]=r[p+11]=r[p+15]=r[p+19]=r[p+23]=s,f.styleChanged=!1);this.attr.transform.scale||(this.attr.transform.scale=[1,1]),this.attr.transform.translate||(this.attr.transform.translate=[0,0]),this.inputs[0].data=new Uint8Array(this.colorArray),this.inputs[1].data=new Float32Array(this.positionArray),xt(this.ctx,this.inputs),this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width/jt,this.ctx.canvas.height/jt),this.ctx.uniform2fv(this.translationUniformLocation,[this.attr.transform.translate[0],this.attr.transform.translate[1]]),this.ctx.uniform2fv(this.scaleUniformLocation,[this.attr.transform.scale[0],this.attr.transform.scale[1]]),this.ctx.drawArrays(this.ctx.TRIANGLES,0,e.length/2)},wt.prototype.remove=function(t){this.positionArray.splice(4*t,4),this.colorArray.splice(8*t,8)},wt.prototype.execute=function(t){for(var e=this.positionArray,r=this.colorArray,i=void 0,n=void 0,o=void 0,a=void 0,s=void 0,h=void 0,c=0,l=t.length;c<l;c++)i=t[c],i.propChanged&&(e[4*c]=i.attr.x1,e[4*c+1]=i.attr.y1,e[4*c+2]=i.attr.x2,e[4*c+3]=i.attr.y2),i.styleChanged&&(h=i.style.stroke||he,n=h.r,o=h.g,a=h.b,s=void 0===h.a?255:h.a,r[8*c]=n,r[8*c+1]=o,r[8*c+2]=a,r[8*c+3]=s,r[8*c+4]=n,r[8*c+5]=o,r[8*c+6]=a,r[8*c+7]=s,i.styleChanged=!1);this.attr.transform.scale||(this.attr.transform.scale=[1,1]),this.attr.transform.translate||(this.attr.transform.translate=[0,0]),this.inputs[0].data=new Uint8Array(this.colorArray),this.inputs[1].data=new Float32Array(this.positionArray),xt(this.ctx,this.inputs),this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width/jt,this.ctx.canvas.height/jt),this.ctx.drawArrays(this.ctx.LINES,0,e.length/2)},Bt.prototype.remove=function(t){this.polyLineArray.splice(t,1)},Bt.prototype.execute=function(t){var e=void 0,r=void 0,i=void 0;this.attr.transform.scale||(this.attr.transform.scale=[1,1]),this.attr.transform.translate||(this.attr.transform.translate=[0,0]),this.ctx.useProgram(this.program),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width/jt,this.ctx.canvas.height/jt),this.ctx.uniform2fv(this.translationUniformLocation,[this.attr.transform.translate[0],this.attr.transform.translate[1]]),this.ctx.uniform2fv(this.scaleUniformLocation,[this.attr.transform.scale[0],this.attr.transform.scale[1]]);for(var n=0,o=t.length;n<o;n++){if(e=t[n],r=e.style.stroke,i=e.attr.points,r=r||he,e.propChanged){for(var a=[],s=0,h=i.length;s<h;s++)a[2*s]=i[s].x,a[2*s+1]=i[s].y;this.polyLineArray[n]||(this.polyLineArray[n]={}),this.polyLineArray[n].positionArray=new Float32Array(a)}if(e.styleChanged){for(var c=[],l=r.r||0,u=r.g||0,f=r.b||0,p=void 0===r.a?255:r.a,d=0,y=i.length;d<y;d++)c[4*d]=l,c[4*d+1]=u,c[4*d+2]=f,c[4*d+3]=p;this.polyLineArray[n].colorArray=new Uint8Array(c)}this.inputs[0].data=this.polyLineArray[n].colorArray,this.inputs[1].data=this.polyLineArray[n].positionArray,xt(this.ctx,this.inputs),this.ctx.drawArrays(this.ctx.LINE_STRIP,0,this.polyLineArray[n].positionArray.length/2)}},St.prototype.remove=function(t){this.polygonArray.splice(t,1)},St.prototype.execute=function(t){this.ctx.useProgram(this.program),this.attr.transform.scale||(this.attr.transform.scale=[1,1]),this.attr.transform.translate||(this.attr.transform.translate=[0,0]),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width/jt,this.ctx.canvas.height/jt),this.ctx.uniform2fv(this.translationUniformLocation,[this.attr.transform.translate[0],this.attr.transform.translate[1]]),this.ctx.uniform2fv(this.scaleUniformLocation,[this.attr.transform.scale[0],this.attr.transform.scale[1]]);for(var e=0,r=t.length;e<r;e++){var i=t[e],n=i.attr.triangulatedPoints;if(i.propChanged){for(var o=[],a=0,s=n.length;a<s;a++)o[2*a]=n[a].x,o[2*a+1]=n[a].y;this.polygonArray[e]||(this.polygonArray[e]={}),this.polygonArray[e].positionArray=new Float32Array(o)}if(i.styleChanged){var h=[],c=i.style.fill;c=c||he;for(var l=c.r||0,u=c.g||0,f=c.b||0,p=void 0===c.a?255:c.a,d=0,y=n.length;d<y;d++)h[4*d]=l,h[4*d+1]=u,h[4*d+2]=f,h[4*d+3]=p;this.polygonArray[e].colorArray=new Uint8Array(h)}this.inputs[0].data=this.polygonArray[e].colorArray,this.inputs[1].data=this.polygonArray[e].positionArray,xt(this.ctx,this.inputs),this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.polygonArray[e].positionArray.length/2)}},Tt.prototype.remove=function(t){this.positionArray.splice(2*t,2),this.radius.splice(t,1),this.colorArray.splice(4*t,4)},Tt.prototype.execute=function(t){this.ctx.useProgram(this.program),this.attr.transform.scale||(this.attr.transform.scale=[1,1]),this.attr.transform.translate||(this.attr.transform.translate=[0,0]),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width/jt,this.ctx.canvas.height/jt),this.ctx.uniform2fv(this.translationUniformLocation,[this.attr.transform.translate[0],this.attr.transform.translate[1]]),this.ctx.uniform2fv(this.scaleUniformLocation,[this.attr.transform.scale[0],this.attr.transform.scale[1]]);for(var e=this.positionArray,r=this.colorArray,i=this.radius,n=void 0,o=void 0,a=0,s=t.length;a<s;a++){var h=t[a],c=h.style.fill;c=c||he,h.propChanged&&(e[2*a]=h.attr.cx,e[2*a+1]=h.attr.cy,i[a]=h.attr.r*jt,h.propChanged=!1,n=!0),h.styleChanged&&(r[4*a]=c.r,r[4*a+1]=c.g,r[4*a+2]=c.b,r[4*a+3]=void 0===c.a?255:c.a,h.styleChanged=!1,o=!0)}n&&(this.inputs[2].data=new Float32Array(e),this.inputs[1].data=new Float32Array(i)),o&&(this.inputs[0].data=new Uint8Array(r)),xt(this.ctx,this.inputs),this.ctx.drawArrays(this.ctx.POINTS,0,e.length/2)},kt.prototype.remove=function(t){this.imagesArray.splice(t,1)},kt.prototype.execute=function(t){this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.ONE,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.useProgram(this.program),this.attr.transform.scale||(this.attr.transform.scale=[1,1]),this.attr.transform.translate||(this.attr.transform.translate=[0,0]),this.ctx.uniform2f(this.resolutionUniformLocation,this.ctx.canvas.width/jt,this.ctx.canvas.height/jt),this.ctx.uniform2fv(this.translationUniformLocation,[this.attr.transform.translate[0],this.attr.transform.translate[1]]),this.ctx.uniform2fv(this.scaleUniformLocation,[this.attr.transform.scale[0],this.attr.transform.scale[1]]),xt(this.ctx,[{bufferType:this.ctx.ARRAY_BUFFER,data:this.texArray,buffer:this.texCoordBuffer,drawType:this.ctx.STATIC_DRAW,valueType:this.ctx.FLOAT,size:2,attribute:this.texCoordAttributeLocation}]);for(var e=void 0,r=void 0,i=void 0,n=void 0,o=null,a=0,s=t.length;a<s;a++){this.imagesArray[a]||(this.imagesArray[a]={positionArray:new Float32Array(12)});var h=this.imagesArray[a].positionArray,c=t[a];c.propChanged&&(e=c.attr.x,r=e+c.attr.width,i=c.attr.y,n=i+c.attr.height,h[0]=h[4]=h[6]=e,h[1]=h[3]=h[9]=i,h[2]=h[8]=h[10]=r,h[5]=h[7]=h[11]=n,c.propChanged=!1),se[c.attr.src]&&(this.inputs[0].data=this.imagesArray[a].positionArray,xt(this.ctx,this.inputs),o!==se[c.attr.src]&&(this.ctx.bindTexture(this.ctx.TEXTURE_2D,se[c.attr.src]),o=se[c.attr.src]),this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.imagesArray[a].positionArray.length/2))}},Lt.prototype.execute=function(t){this.shader.execute(t)},Et.prototype.setAttr=function(t,e){if(2===arguments.length)this.attr[t]=e,this.dom.setAttr(t,e);else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r in t)this.attr[r]=t[r],this.dom.setAttr(r,t[r]);return this.propChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Et.prototype.setStyle=function(t,e){if(2===arguments.length)"fill"!==t&&"stroke"!==t||(e=s.colorToRGB(e)),this.style[t]=e;else if(1===arguments.length&&"object"===(void 0===t?"undefined":a(t)))for(var r in t)e=t[r],"fill"!==r&&"stroke"!==r||(e=s.colorToRGB(t[r])),this.style[r]=e;return this.styleChanged=!0,Ot.vDomChanged(this.vDomIndex),this},Et.prototype.getAttr=function(t){return this.attr[t]},Et.prototype.getStyle=function(t){return this.style[t]},Et.prototype.animateTo=Nt,Et.prototype.animateExe=Yt,Et.prototype.execute=function(){if(!this.dom.shader&&this.dom instanceof Lt)for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();else this.dom.shader&&this.dom.execute(this.children)},Et.prototype.child=function(t){var e=this;if(e.dom instanceof Lt)for(var r=0;r<t.length;r+=1)t[r].dom.parent=e,t[r].nindex=e.children.length,e.children[e.children.length]=t[r];else console.log("Error");return this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex),e},Et.prototype.fetchEl=y,Et.prototype.fetchEls=d,Et.prototype.join=D,Et.prototype.createEls=function(t,e){var r=new rt({type:"WEBGL",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(r.stack),Ot.vDomChanged(this.vDomIndex),r},Et.prototype.createEl=function(t){var e=new Et(this.ctx,t,u(),this.vDomIndex);return this.child([e]),Ot.vDomChanged(this.vDomIndex),e},Et.prototype.createShaderEl=function(t){var e=new vt(this.ctx,t,this.vDomIndex);return this.child([e]),Ot.vDomChanged(this.vDomIndex),e},Et.prototype.remove=function(){var t=this.dom.parent.children,e=t.indexOf(this);-1!==e&&(t.splice(e,1),this.dom.parent.dom.shader&&this.dom.parent.dom.shader.remove(e)),this.BBoxUpdate=!0,Ot.vDomChanged(this.vDomIndex)},Et.prototype.removeChild=function(t){var e=-1;if(this.children.forEach(function(r,i){r===t&&(e=i)}),-1!==e){var r=this.children.splice(e,1)[0];this.dom.removeChild(r.dom)}Ot.vDomChanged(this.vDomIndex)},Ct.WebglLayer=function(t,e){var r=document.querySelector(t),i=e.height?e.height:r.clientHeight,o=e.width?e.width:r.clientWidth,a=e.clearColor?color.colorToRGB(e.clearColor):{r:0,g:0,b:0,a:0},s=document.createElement("canvas"),h=s.getContext("webgl",{premultipliedAlpha:!1,depth:!1,antialias:!0,alpha:!0});jt=it(h),s.setAttribute("height",i*jt),s.setAttribute("width",o*jt),s.style.height=i+"px",s.style.width=o+"px",s.style.position="absolute",r.appendChild(s);var c=new n,l=Ot.addVdom(c),f=new Et(h,{el:"group",attr:{id:"rootNode"}},u(),l),p=f.execute.bind(f);return f.container=r,f.domEl=s,f.height=i,f.width=o,f.type="WEBGL",f.pixelRatio=jt,h.clearColor(a.r,a.g,a.b,a.a),f.execute=function(){this.ctx.viewport(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT),p()},f.destroy=function(){Ot.removeVdom(c)},c.root(f),e.resize&&window.addEventListener("resize",function(){f.resize()}),Ot.execute(),f},Ct.Path=h.instance,Ct.queue=Ot,Ct.geometry=Dt,Ct.chain=i,Ct.color=s,Ct})}).call(e,r(1)(t))}])});